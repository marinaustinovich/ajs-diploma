(()=>{"use strict";class e{constructor(e){this.elemModal=null,this.eventShowModal=null,this.eventHideModal=null,this.hiding=!1,this.destroyed=!1,this.animationSpeed=200,this.options=e||{},this.createModal(),this.elemModal.addEventListener("click",this.handlerCloseModal.bind(this)),this.eventShowModal=new CustomEvent("show.modalFunc",{detail:this.elemModal}),this.eventHideModal=new CustomEvent("hide.modalFunc",{detail:this.elemModal})}createModal(){this.elemModal=document.createElement("div");let e,t="";if(this.elemModal.classList.add("modalFunc"),e='<div class="modal__backdrop" data-dismiss="modalFunc"><div class="modal__content"><div class="modal__header"><div class="modal__title" data-modalFunc="title">{{title}}</div><span class="modal__btn-close" data-dismiss="modalFunc" title="–ó–∞–∫—Ä—ã—Ç—å">√ó</span></div><div class="modal__body" data-modalFunc="content">{{content}}</div>{{footer}}</div></div>'.replace("{{title}}",this.options.title||"–ù–æ–≤–æ–µ –æ–∫–Ω–æ"),e=e.replace("{{content}}",this.options.content||""),this.options.footerButtons){for(const e of this.options.footerButtons){let a='<button type="button" class="{{button_class}}" data-handler={{button_handler}}>{{button_text}}</button>'.replace("{{button_class}}",e.class);a=a.replace("{{button_handler}}",e.handler),a=a.replace("{{button_text}}",e.text),t+=a}t='<div class="modal__footer">{{buttons}}</div>'.replace("{{buttons}}",t)}e=e.replace("{{footer}}",t),this.elemModal.innerHTML=e,document.body.appendChild(this.elemModal)}show(){this.destroyed||this.hiding||(this.elemModal.classList.add("modal__show"),document.dispatchEvent(this.eventShowModal))}hide(){this.hiding=!0,this.elemModal.classList.remove("modal__show"),this.elemModal.classList.add("modal__hiding"),setTimeout((()=>{this.elemModal.classList.remove("modal__hiding"),this.hiding=!1}),this.animationSpeed),document.dispatchEvent(this.eventHideModal)}handlerCloseModal(e){("modalFunc"===e.target.dataset.dismiss||e.target.dataset.handler)&&this.hide()}destroy(){this.elemModal.parentElement&&this.elemModal.parentElement.removeChild(this.elemModal),this.elemModal.removeEventListener("click",this.handlerCloseModal.bind(this))}setContent(e){this.elemModal.querySelector('[data-modalFunc="content"]').innerHTML=e}setTitle(e){this.elemModal.querySelector('[data-modalFunc="title"]').innerHTML=e}}function t(e,t){if(e<t-1&&e>0)return"top";if(e<t**2-1&&e>t**2-t)return"bottom";for(let a=1;a<t-1;a+=1){if(e===t*a)return"left";if(e===t*a+(t-1))return"right"}switch(e){case 0:return"top-left";case t-1:return"top-right";case t*(t-1):return"bottom-left";case t**2-1:return"bottom-right";default:return"center"}}function a(e,t){return e.map(t)}function s(e,t){return Math.floor(Math.max(e,e*(80+t)/100))}function i(e,t){return Object.assign(e,t),e}const l={prairie:"prairie",desert:"desert",arctic:"arctic",mountain:"mountain"};class n{constructor(e){this.levelGame=1,this.gamePlay=e,this.isMove="user",this.countClick=0,this.survivors=[],this.history=[],this.points=0,this.block=!1,this.userTeam=[],this.compTeam=[],this.activeChar=null,this.indexSelect=null,this.transitionCells=[],this.attackCells=[],this.showModal=!1}getAllPlayer(){if(!this.userTeam||!this.compTeam)throw new Error("it must have 2 arguments");return[...this.userTeam,...this.compTeam]}calculateSumPoints(){return this.userTeam.reduce(((e,t)=>e+t.character.health),0)}getUserPosition(){const e=this.userTeam.find((e=>this.attackCells.includes(e.position)));return e?e.position:void 0}findPresumedDeceasedPlayer(){return this.getAllPlayer().find((e=>e.position===this.activeCharUser?.position))}getPresumedDeceasedPlayerInfo(e){return{index:("comp"===this.isMove?this.userTeam:this.compTeam).findIndex((t=>e===t.position)),teamKey:"comp"===this.isMove?"userTeam":"compTeam"}}getPlayer(e){return this.getAllPlayer().find((t=>t.position===e))}}const o="auto",h="pointer",r="crosshair",c="not-allowed";function d(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=[];for(let e=0;e<t**2;e+=1)i.push(e);const l=function(e,t){const a=[];for(let s=0,i=t;s<e.length;s+=t,i+=t)a.push(e.slice(s,i));return a}(i,t);return s?function(e,t,a){const s=[];let i,l;for(let a=0;a<e.length&&(l=a,i=e[a].findIndex((e=>e===t)),-1===i);a+=1);for(let n=-a;n<=a;n+=1)for(let o=-a;o<=a;o+=1)l+n>=0&&i+o>=0&&l+n<e.length&&i+o<e.length&&e[l+n][i+o]!==t&&s.push(e[l+n][i+o]);return s}(l,e,a):function(e,t,a){const s=[];let i,l;for(let a=0;a<e.length&&(l=a,i=e[a].findIndex((e=>e===t)),-1===i);a+=1);for(let t=1;t<=a;t+=1)i-t>=0&&s.push(e[l][i-t]),i+t<e.length&&s.push(e[l][i+t]),l+t<e.length&&i-t>=0&&s.push(e[l+t][i-t]),l+t<e.length&&i+t<e.length&&s.push(e[l+t][i+t]),l-t>=0&&i-t>=0&&s.push(e[l-t][i-t]),l-t>=0&&i+t<e.length&&s.push(e[l-t][i+t]),l-t>=0&&s.push(e[l-t][i]),l+t<e.length&&s.push(e[l+t][i]);return s}(l,e,a)}class m{constructor(e){this.characters=e}}class g{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic";if("Character"===new.target.name)throw new Error("Invalid class");this.type=t,this.level=e,this.attack=0,this.defence=0,this.health=50}levelUp(){if(this.health<=0)throw new Error("Can't level up a dead character");this.level=Math.min(this.level+1,4),this.attack=s(this.attack,this.health),this.defence=s(this.defence,this.health),this.health=Math.min(this.health+80,100)}}class u{constructor(e,t){this.character=e,this.position=t}set character(e){if(!(e instanceof g))throw new Error("character must be instance of Character or its children");this._character=e}get character(){return this._character}set position(e){if("number"!=typeof e)throw new Error("position must be a number");this._position=e}get position(){return this._position}}class v extends g{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="bowman",this.attack=25,this.defence=25,this.maxRange=2,this.maxAttack=2}}class S extends g{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="swordsman",this.attack=40,this.defence=10,this.maxRange=4,this.maxAttack=1}}class p extends g{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="magician",this.attack=10,this.defence=40,this.maxRange=1,this.maxAttack=4}}class C extends g{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="daemon",this.attack=10,this.defence=10,this.maxRange=1,this.maxAttack=4}}class f extends g{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="undead",this.attack=40,this.defence=10,this.maxRange=4,this.maxAttack=1}}class y extends g{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="vampire",this.attack=25,this.defence=25,this.maxRange=2,this.maxAttack=2}}function w(e){const t=[];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])for(let a=e-2;a<e**2;a+=e)t.push(a),t.push(a+1);else for(let a=0;a<e**2;a+=8)t.push(a),t.push(a+1);return t}function M(e){const t=w(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t[Math.floor(Math.random()*t.length)]}function P(e,t,a,s){let[i,l]=s;const n=[];i>=4&&(i=4),l>=10&&(l=10);const o=function(e,t,a){const s=[],i=function*(e,t){for(;;){const a=Math.floor(Math.random()*t+1),s=e[Math.floor(Math.random()*e.length)];yield new s(a)}}(e,t);for(let e=0;e<a;e+=1)s.push(i.next().value);return new m(s)}(e,i,l),h=[];return o.characters.forEach((e=>{let s,i=!1;do{s=M(t,a),h.find((e=>e===s))?s=M(t,a):(h.push(s),i=!0)}while(!i);n.push(new u(e,s))})),n}function k(e){if(!e)return null;const t=new({bowman:v,swordsman:S,magician:p,daemon:C,undead:f,vampire:y}[e._character.type]||null)(e._character.level),a=new u(t,e._position);return t.attack=e._character.attack,t.health=e._character.health,t.defence=e._character.defence,a}const b=new class{constructor(){this.boardSize=8,this.container=null,this.boardEl=null,this.cells=[],this.cellClickListeners=[],this.cellEnterListeners=[],this.cellLeaveListeners=[],this.newGameListeners=[],this.saveGameListeners=[],this.loadGameListeners=[],this.isModal=!1,this.initModalListener()}bindToDOM(e){if(!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e}initModalListener(){document.addEventListener("click",(e=>{"modalHandlerCancel"===e.target.dataset.handler&&this.currentModal&&(this.currentModal.hide(),this.isModal=!1)}))}drawUi(e){this.checkBinding(),this.container.innerHTML='\n      <div class="controls">\n        <button data-id="action-restart" class="btn">New Game</button>\n        <button data-id="action-save" class="btn">Save Game</button>\n        <button data-id="action-load" class="btn">Load Game</button>\n      </div>\n      <div class="board-container">\n        <div data-id="board" class="board"></div>\n      </div>\n    ',this.newGameEl=this.container.querySelector("[data-id=action-restart]"),this.saveGameEl=this.container.querySelector("[data-id=action-save]"),this.loadGameEl=this.container.querySelector("[data-id=action-load]"),this.newGameEl.addEventListener("click",(e=>this.onNewGameClick(e))),this.saveGameEl.addEventListener("click",(e=>this.onSaveGameClick(e))),this.loadGameEl.addEventListener("click",(e=>this.onLoadGameClick(e))),this.boardEl=this.container.querySelector("[data-id=board]"),this.boardEl.classList.add(e);for(let e=0;e<this.boardSize**2;e+=1){const a=document.createElement("div");a.classList.add("cell","map-tile",`map-tile-${t(e,this.boardSize)}`),a.addEventListener("mouseenter",(e=>this.onCellEnter(e))),a.addEventListener("mouseleave",(e=>this.onCellLeave(e))),a.addEventListener("click",(e=>this.onCellClick(e))),this.boardEl.appendChild(a)}this.cells=Array.from(this.boardEl.children)}redrawPositions(e){for(const e of this.cells)e.innerHTML="";for(const a of e){const e=this.boardEl.children[a.position],s=document.createElement("div");s.classList.add("character",a.character.type);const i=document.createElement("div");i.classList.add("health-level");const l=document.createElement("div");l.classList.add("health-level-indicator","health-level-indicator-"+((t=a.character.health)<15?"critical":t<50?"normal":"high")),l.style.width=`${a.character.health}%`,i.appendChild(l),s.appendChild(i),e.appendChild(s)}var t}showModal(t,a){const s=new e({title:t,content:`&#${a}`,footerButtons:[{class:"btn btn__cancel",text:"Close",handler:"modalHandlerCancel"}]});this.currentModal=s,s.show()}addCellEnterListener(e){this.cellEnterListeners.push(e)}addCellLeaveListener(e){this.cellLeaveListeners.push(e)}addCellClickListener(e){this.cellClickListeners.push(e)}addNewGameListener(e){this.newGameListeners.push(e)}addSaveGameListener(e){this.saveGameListeners.push(e)}addLoadGameListener(e){this.loadGameListeners.push(e)}onCellEnter(e){const t=this.cells.indexOf(e.currentTarget);this.cellEnterListeners.forEach((e=>e.call(null,t)))}onCellLeave(e){const t=this.cells.indexOf(e.currentTarget);this.cellLeaveListeners.forEach((e=>e.call(null,t)))}onCellClick(e){const t=this.cells.indexOf(e.currentTarget);this.cellClickListeners.forEach((e=>e.call(null,t)))}onNewGameClick(){this.newGameListeners.forEach((e=>e.call(null)))}onSaveGameClick(){this.saveGameListeners.forEach((e=>e.call(null)))}onLoadGameClick(){this.loadGameListeners.forEach((e=>e.call(null)))}showModalMessage(e,t){this.isModal||(this.isModal=!0,this.showModal(e,t))}selectCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yellow";this.deselectCell(e),this.cells[e].classList.add("selected",`selected-${t}`)}deselectCell(e){const t=this.cells[e];t&&t.classList.remove(...Array.from(t.classList).filter((e=>e.startsWith("selected"))))}showCellTooltip(e,t){this.cells[t].title=e}hideCellTooltip(e){this.cells[e].title=""}showDamage(e,t){return new Promise((a=>{const s=this.cells[e],i=document.createElement("span");i.className="damage",i.textContent=t,s.appendChild(i),i.addEventListener("animationend",(()=>{s.removeChild(i),a(!0)}))}))}setCursor(e){this.boardEl.style.cursor=e}checkBinding(){if(null===this.container)throw new Error("GamePlay not bind to DOM")}};b.bindToDOM(document.querySelector("#game-container"));const L=new class{constructor(e){this.storage=e}save(e){this.storage.setItem("state",JSON.stringify(e))}load(){try{return JSON.parse(this.storage.getItem("state"))}catch(e){throw new Error("Invalid state")}}}(localStorage),G=new class{constructor(e,t){this.gamePlay=e,this.stateService=t,this.gameState=new n(this.gamePlay),this.onCellClick=this.onCellClick.bind(this),this.onCellEnter=this.onCellEnter.bind(this),this.onCellLeave=this.onCellLeave.bind(this),this.newGame=this.newGame.bind(this),this.saveGame=this.saveGame.bind(this),this.loadGame=this.loadGame.bind(this),this.events()}init(){this.initNewTeams(),this.updatePicture()}events(){this.gamePlay.addCellEnterListener(this.onCellEnter),this.gamePlay.addCellLeaveListener(this.onCellLeave),this.gamePlay.addCellClickListener(this.onCellClick),this.gamePlay.addNewGameListener(this.newGame),this.gamePlay.addSaveGameListener(this.saveGame),this.gamePlay.addLoadGameListener(this.loadGame)}newGame(){const e={levelGame:1,countClick:0,history:[...this.gameState.history,{levelGame:this.gameState.levelGame,points:this.gameState.points}],isMove:"user",block:!1,points:0};i(this.gameState,e),this.reset(),this.init()}saveGame(){this.stateService.save(this.gameState),this.gamePlay.showModalMessage("Your game has saved!","9997")}loadGame(){try{const e=this.stateService.load();this.restoreGameState(e),this.restoreActiveCharacter(e.activeChar),this.updatePicture(),this.showGameInfo()}catch(e){this.handleLoadingError()}}restoreGameState(e){const{levelGame:t,countClick:a,history:s,isMove:l,block:n,points:o,indexSelect:h}=e;i(this.gameState,{levelGame:n?t-1:t,countClick:a,history:s,isMove:l,block:n,points:o,indexSelect:h}),this.resetTeams(e)}restoreActiveCharacter(e){const t=k(e);t&&"user"===t.isMove&&this.reactOnClick(t,["bowman","swordsman","magician"])}handleLoadingError(){this.gamePlay.showModalMessage("There's no game in memory","128075"),this.newGame()}initNewTeams(){this.gameState.userTeam=this.getUserTeam([this.gameState.levelGame,this.gameState.levelGame]),this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame,this.gameState.levelGame])}getUserTeam(e){let[t,a]=e;const s=P([v,S,p],this.gamePlay.boardSize,!1,[t,a]);return this.gameState.userTeam=s,s}getCompTeam(e){let[t,a]=e;const s=P([y,C,f],this.gamePlay.boardSize,!0,[t,a]);return this.gameState.compTeam=s,s}resetTeams(e){this.gameState.userTeam=a(e.userTeam,k),this.gameState.compTeam=a(e.compTeam,k)}levelUp(){this.updateTeams(),this.gameState.getAllPlayer().forEach((e=>e.character.levelUp())),this.gamePlay.drawUi(Object.values(l)[this.gameState.levelGame-1]),this.gameState.countClick=0,this.gameState.indexSelect=null}updateTeams(){const e=this.getUserTeam([this.gameState.levelGame-1,this.gameState.levelGame]),t=w(this.gamePlay.boardSize);e.forEach((e=>{t.splice(t.indexOf(e.position),1)})),this.gameState.survivors.forEach((e=>{if(!t.includes(e.position)){const a=t[Math.floor(Math.random()*t.length)];e.position=a}})),this.gameState.userTeam=this.gameState.survivors.concat(e),this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame,this.gameState.levelGame+this.gameState.getAllPlayer().length])}showGameInfo(){const e=this.gameState.points?`Your level ${this.gameState.levelGame} and points ${this.gameState.points}`:"There's no points. \n It's the first round",t=this.gameState.points?"128076":"128083";this.gamePlay.showModalMessage(e,t)}async onCellClick(e){if(this.gameState.block)return;const t=this.gameState.getAllPlayer().find((t=>t.position===e));this.gameState.activeChar&&await this.handleUserTurn(e),this.reactOnClick(t,["bowman","swordsman","magician"]),this.gameState.countClick>=1&&await this.handleComputerTurn()}async handleUserTurn(e){this.gameState.indexSelect&&(this.gameState.indexSelect.green===e&&(this.gameState.activeChar.position=e,this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.indexSelect.red===e)&&(this.gameState.isMove="user",await this.doDamage(e)&&(this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),await this.checkGameProgress()))}async checkGameProgress(){0===this.gameState.compTeam.length&&(this.gameState.levelGame+=1,this.gameState.points+=this.gameState.calculateSumPoints(),this.reset(),this.gameState.survivors=this.gameState.userTeam,this.gamePlay.showModalMessage(`Level up! Your level ${this.gameState.levelGame} and total points are ${this.gameState.points}`,"9996"),this.levelUp(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()))}async handleComputerTurn(){this.gameState.activeCharUser=this.gameState.activeChar,this.gameState.isMove="comp",await this.doAttackComp(this)&&(this.gameState.countClick=0,this.gameState.isMove="user",this.gameState.findPresumedDeceasedPlayer()&&(this.gameState.activeChar=this.gameState.activeCharUser,this.reactOnClick(this.gameState.activeChar,["bowman","swordsman","magician"]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())))}onCellEnter(e){if(this.gameState.block)return;const t=this.gameState.getPlayer(e);if(t&&this.gamePlay.showCellTooltip(function(e){return`üéñ${e.level} ‚öî${e.attack} üõ°${e.defence} ‚ù§${e.health}`}(t.character),e),!this.gameState.activeChar)return;const a=this.gameState.transitionCells.includes(e),s=this.gameState.attackCells.includes(e),i=this.gameState.userTeam.some((t=>t.position===e)),l=this.gameState.compTeam.some((t=>t.position===e));this.gamePlay.setCursor(h),this.gameState.indexSelect&&(!a||i||l||(this.gameState.indexSelect.green=e,this.gamePlay.selectCell(e,"green")),s&&l&&(this.gameState.indexSelect.red=e,this.gamePlay.selectCell(e,"red"),this.gamePlay.setCursor(r)))}onCellLeave(e){if(this.gamePlay.hideCellTooltip(e),this.gameState.block)return;const t=document.querySelector(".selected-green"),a=this.gameState.attackCells?.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),!a&&s&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),this.gamePlay.setCursor(c))),document.querySelector(".selected-red")&&this.gamePlay.deselectCell(this.gameState.indexSelect.red)}reactOnClick(e,t){if(e)if(t.includes(e.character.type)){this.updateSelectedCell(e.position),this.gamePlay.selectCell(e.position),this.gameState.activeChar=e;const{maxRange:t,maxAttack:a}=e.character;this.gameState.transitionCells=d(e.position,this.gamePlay.boardSize,t),this.gameState.attackCells=d(e.position,this.gamePlay.boardSize,a,!0)}else this.handleInvalidSelection(e.position)}updateSelectedCell(e){this.gameState.indexSelect&&document.querySelector(".selected-yellow")&&this.gamePlay.deselectCell(this.gameState.indexSelect.yellow),this.gameState.indexSelect={yellow:e}}handleInvalidSelection(e){const t=this.gameState.indexSelect,a=!this.gameState.attackCells.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&a&&s?this.gamePlay.showModalMessage("It can't be done","9940"):this.gameState.activeChar||this.gamePlay.showModalMessage("This isn`t your character","9995")}async doDamage(e){const{attack:t}=this.gameState.activeChar.character,a=this.gameState.getPlayer(e),{defence:s,health:i}=a.character,l=function(e,t){return Math.round(Math.max(e-t,.3*e))}(t,s);return!!await this.gamePlay.showDamage(e,l)&&(a.character.health=i-l,this.checkHealthRemoveDead(a),!0)}checkHealthRemoveDead(e){if(e.character.health<=0){const t=this.gameState.getPresumedDeceasedPlayerInfo(e.position);-1!==t.index&&(this.gameState[t.teamKey].splice(t.index,1),this.gameState.indexSelect=null)}}reset(){this.gameState.indexSelect&&(Object.keys(this.gameState.indexSelect).forEach((e=>{this.gamePlay.deselectCell(this.gameState.indexSelect[e])})),this.gameState.indexSelect=null,this.gamePlay.setCursor(o))}updatePicture(){const e=this.gameState.levelGame>0?this.gameState.levelGame-1:0;this.gamePlay.drawUi(Object.values(l)[e]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),this.gameState.indexSelect&&this.gameState.indexSelect.yellow&&this.gamePlay.selectCell(this.gameState.indexSelect.yellow)}async doAttackComp(){const e=(t=this.gameState.compTeam)[Math.floor(Math.random()*t.length)];var t;this.gameState.activeChar=e,this.reactOnClick(e,["daemon","undead","vampire"]);const a=this.gameState.getUserPosition();return void 0!==a?await this.doDamage(a)&&(this.checkAndEndGameIfNecessary(),this.updatePicture()):(this.gameState.activeChar.position=this.moveToRandomPosition(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.activeChar=null,this.reset(),!0}checkAndEndGameIfNecessary(){0===this.gameState.userTeam.length&&(this.gameState.block=!0,this.gamePlay.showModalMessage("You lose!","129335"))}moveToRandomPosition(){let e,t;do{e=Math.floor(Math.random()*this.gameState.transitionCells.length);const a=this.gameState.transitionCells[e];t=this.gameState.getAllPlayer().some((e=>e.position===a))}while(t);return this.gameState.transitionCells[e]}}(b,L);G.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TCxnQkFBZ0I2QixRQUNqRSxNQUFNME4sRUFBb0IxVSxLQUFLb1EsVUFBVWpMLGdCQUFnQnFQLEdBQ3pEQyxFQUFXelUsS0FBS29RLFVBQVU5SyxlQUFlNE4sTUFBTTdFLEdBQU1BLEVBQUVsSSxXQUFhdU8sR0FDdEUsT0FBU0QsR0FFVCxPQUFPelUsS0FBS29RLFVBQVVqTCxnQkFBZ0JxUCxFQUN4QyxHSDlla0NqUSxFQUFVaUwsR0FDOUNXLEVBQVNNLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9Nb2RhbFBvcHVwLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL3V0aWxzLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL3RoZW1lcy5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9HYW1lU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY3Vyc29ycy5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy90cmFuc2l0aW9uQXR0YWNrQ2VsbHMuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvVGVhbS5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL0NoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9Qb3NpdGlvbmVkQ2hhcmFjdGVyLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL2NoYXJhY3RlcnMvQm93bWFuLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL2NoYXJhY3RlcnMvU3dvcmRzbWFuLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL2NoYXJhY3RlcnMvTWFnaWNpYW4uanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9EYWVtb24uanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9VbmRlYWQuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9WYW1waXJlLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL2NyZWF0ZVBvc2l0aW9ucy5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9nZW5lcmF0b3JzLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9HYW1lUGxheS5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9HYW1lU3RhdGVTZXJ2aWNlLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL0dhbWVDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuZWxlbU1vZGFsID0gbnVsbDtcclxuICAgIHRoaXMuZXZlbnRTaG93TW9kYWwgPSBudWxsO1xyXG4gICAgdGhpcy5ldmVudEhpZGVNb2RhbCA9IG51bGw7XHJcbiAgICB0aGlzLmhpZGluZyA9IGZhbHNlO1xyXG4gICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuYW5pbWF0aW9uU3BlZWQgPSAyMDA7XHJcblxyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZU1vZGFsKCk7XHJcbiAgICB0aGlzLmVsZW1Nb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlckNsb3NlTW9kYWwuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgdGhpcy5ldmVudFNob3dNb2RhbCA9IG5ldyBDdXN0b21FdmVudCgnc2hvdy5tb2RhbEZ1bmMnLCB7IGRldGFpbDogdGhpcy5lbGVtTW9kYWwgfSk7XHJcbiAgICB0aGlzLmV2ZW50SGlkZU1vZGFsID0gbmV3IEN1c3RvbUV2ZW50KCdoaWRlLm1vZGFsRnVuYycsIHsgZGV0YWlsOiB0aGlzLmVsZW1Nb2RhbCB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZU1vZGFsKCkge1xyXG4gICAgdGhpcy5lbGVtTW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnN0IG1vZGFsVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIm1vZGFsX19iYWNrZHJvcFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsRnVuY1wiPjxkaXYgY2xhc3M9XCJtb2RhbF9fY29udGVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbF9faGVhZGVyXCI+PGRpdiBjbGFzcz1cIm1vZGFsX190aXRsZVwiIGRhdGEtbW9kYWxGdW5jPVwidGl0bGVcIj57e3RpdGxlfX08L2Rpdj48c3BhbiBjbGFzcz1cIm1vZGFsX19idG4tY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbEZ1bmNcIiB0aXRsZT1cItCX0LDQutGA0YvRgtGMXCI+w5c8L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cIm1vZGFsX19ib2R5XCIgZGF0YS1tb2RhbEZ1bmM9XCJjb250ZW50XCI+e3tjb250ZW50fX08L2Rpdj57e2Zvb3Rlcn19PC9kaXY+PC9kaXY+JztcclxuICAgIGNvbnN0IG1vZGFsRm9vdGVyVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIm1vZGFsX19mb290ZXJcIj57e2J1dHRvbnN9fTwvZGl2Pic7XHJcbiAgICBjb25zdCBtb2RhbEJ1dHRvblRlbXBsYXRlID0gJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwie3tidXR0b25fY2xhc3N9fVwiIGRhdGEtaGFuZGxlcj17e2J1dHRvbl9oYW5kbGVyfX0+e3tidXR0b25fdGV4dH19PC9idXR0b24+JztcclxuICAgIGxldCBtb2RhbEhUTUw7XHJcbiAgICBsZXQgbW9kYWxGb290ZXJIVE1MID0gJyc7XHJcblxyXG4gICAgdGhpcy5lbGVtTW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWxGdW5jJyk7XHJcbiAgICBtb2RhbEhUTUwgPSBtb2RhbFRlbXBsYXRlLnJlcGxhY2UoXHJcbiAgICAgICd7e3RpdGxlfX0nLFxyXG4gICAgICB0aGlzLm9wdGlvbnMudGl0bGUgfHwgJ9Cd0L7QstC+0LUg0L7QutC90L4nLFxyXG4gICAgKTtcclxuICAgIG1vZGFsSFRNTCA9IG1vZGFsSFRNTC5yZXBsYWNlKCd7e2NvbnRlbnR9fScsIHRoaXMub3B0aW9ucy5jb250ZW50IHx8ICcnKTtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuZm9vdGVyQnV0dG9ucykge1xyXG4gICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiB0aGlzLm9wdGlvbnMuZm9vdGVyQnV0dG9ucykge1xyXG4gICAgICAgIGxldCBtb2RhbEZvb3RlckJ1dHRvbiA9IG1vZGFsQnV0dG9uVGVtcGxhdGUucmVwbGFjZShcclxuICAgICAgICAgICd7e2J1dHRvbl9jbGFzc319JyxcclxuICAgICAgICAgIGJ1dHRvbi5jbGFzcyxcclxuICAgICAgICApO1xyXG4gICAgICAgIG1vZGFsRm9vdGVyQnV0dG9uID0gbW9kYWxGb290ZXJCdXR0b24ucmVwbGFjZShcclxuICAgICAgICAgICd7e2J1dHRvbl9oYW5kbGVyfX0nLFxyXG4gICAgICAgICAgYnV0dG9uLmhhbmRsZXIsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBtb2RhbEZvb3RlckJ1dHRvbiA9IG1vZGFsRm9vdGVyQnV0dG9uLnJlcGxhY2UoXHJcbiAgICAgICAgICAne3tidXR0b25fdGV4dH19JyxcclxuICAgICAgICAgIGJ1dHRvbi50ZXh0LFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbW9kYWxGb290ZXJIVE1MICs9IG1vZGFsRm9vdGVyQnV0dG9uO1xyXG4gICAgICB9XHJcbiAgICAgIG1vZGFsRm9vdGVySFRNTCA9IG1vZGFsRm9vdGVyVGVtcGxhdGUucmVwbGFjZShcclxuICAgICAgICAne3tidXR0b25zfX0nLFxyXG4gICAgICAgIG1vZGFsRm9vdGVySFRNTCxcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIG1vZGFsSFRNTCA9IG1vZGFsSFRNTC5yZXBsYWNlKCd7e2Zvb3Rlcn19JywgbW9kYWxGb290ZXJIVE1MKTtcclxuICAgIHRoaXMuZWxlbU1vZGFsLmlubmVySFRNTCA9IG1vZGFsSFRNTDtcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtTW9kYWwpO1xyXG4gIH1cclxuXHJcbiAgc2hvdygpIHtcclxuICAgIGlmICghdGhpcy5kZXN0cm95ZWQgJiYgIXRoaXMuaGlkaW5nKSB7XHJcbiAgICAgIHRoaXMuZWxlbU1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsX19zaG93Jyk7XHJcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQodGhpcy5ldmVudFNob3dNb2RhbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoaWRlKCkge1xyXG4gICAgdGhpcy5oaWRpbmcgPSB0cnVlO1xyXG4gICAgdGhpcy5lbGVtTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfX3Nob3cnKTtcclxuICAgIHRoaXMuZWxlbU1vZGFsLmNsYXNzTGlzdC5hZGQoJ21vZGFsX19oaWRpbmcnKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLmVsZW1Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9faGlkaW5nJyk7XHJcbiAgICAgIHRoaXMuaGlkaW5nID0gZmFsc2U7XHJcbiAgICB9LCB0aGlzLmFuaW1hdGlvblNwZWVkKTtcclxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQodGhpcy5ldmVudEhpZGVNb2RhbCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVyQ2xvc2VNb2RhbChlKSB7XHJcbiAgICBpZiAoZS50YXJnZXQuZGF0YXNldC5kaXNtaXNzID09PSAnbW9kYWxGdW5jJyB8fCBlLnRhcmdldC5kYXRhc2V0LmhhbmRsZXIpIHtcclxuICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuZWxlbU1vZGFsLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5lbGVtTW9kYWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmVsZW1Nb2RhbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmVsZW1Nb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICAnY2xpY2snLFxyXG4gICAgICB0aGlzLmhhbmRsZXJDbG9zZU1vZGFsLmJpbmQodGhpcyksXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgc2V0Q29udGVudChodG1sKSB7XHJcbiAgICB0aGlzLmVsZW1Nb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tb2RhbEZ1bmM9XCJjb250ZW50XCJdJykuaW5uZXJIVE1MID0gaHRtbDtcclxuICB9XHJcblxyXG4gIHNldFRpdGxlKHRleHQpIHtcclxuICAgIHRoaXMuZWxlbU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vZGFsRnVuYz1cInRpdGxlXCJdJykuaW5uZXJIVE1MID0gdGV4dDtcclxuICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIEB0b2RvXHJcbiAqIEBwYXJhbSBpbmRleCAtINC40L3QtNC10LrRgSDQv9C+0LvRj1xyXG4gKiBAcGFyYW0gYm9hcmRTaXplIC0g0YDQsNC30LzQtdGAINC60LLQsNC00YDQsNGC0L3QvtCz0L4g0L/QvtC70Y8gKNCyINC00LvQuNC90YMg0LjQu9C4INGI0LjRgNC40L3RgylcclxuICogQHJldHVybnMg0YHRgtGA0L7QutCwIC0g0YLQuNC/INGP0YfQtdC50LrQuCDQvdCwINC/0L7Qu9C1OlxyXG4gKlxyXG4gKiB0b3AtbGVmdFxyXG4gKiB0b3AtcmlnaHRcclxuICogdG9wXHJcbiAqIGJvdHRvbS1sZWZ0XHJcbiAqIGJvdHRvbS1yaWdodFxyXG4gKiBib3R0b21cclxuICogcmlnaHRcclxuICogbGVmdFxyXG4gKiBjZW50ZXJcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogY2FsY1RpbGVUeXBlKDAsIDgpOyAvLyAndG9wLWxlZnQnXHJcbiAqIGNhbGNUaWxlVHlwZSgxLCA4KTsgLy8gJ3RvcCdcclxuICogY2FsY1RpbGVUeXBlKDYzLCA4KTsgLy8gJ2JvdHRvbS1yaWdodCdcclxuICogY2FsY1RpbGVUeXBlKDcsIDcpOyAvLyAnbGVmdCdcclxuICogYGBgXHJcbiAqICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjVGlsZVR5cGUoaW5kZXgsIGJvYXJkU2l6ZSkge1xyXG4gIC8vIFRPRE86INCy0LDRiCDQutC+0LQg0LHRg9C00LXRgiDRgtGD0YJcclxuICBpZiAoaW5kZXggPCBib2FyZFNpemUgLSAxICYmIGluZGV4ID4gMCkge1xyXG4gICAgcmV0dXJuICd0b3AnO1xyXG4gIH1cclxuICBpZiAoaW5kZXggPCBib2FyZFNpemUgKiogMiAtIDEgJiYgaW5kZXggPiBib2FyZFNpemUgKiogMiAtIGJvYXJkU2l6ZSkge1xyXG4gICAgcmV0dXJuICdib3R0b20nO1xyXG4gIH1cclxuICBmb3IgKGxldCBpID0gMTsgaSA8IGJvYXJkU2l6ZSAtIDE7IGkgKz0gMSkge1xyXG4gICAgaWYgKGluZGV4ID09PSBib2FyZFNpemUgKiBpKSB7XHJcbiAgICAgIHJldHVybiAnbGVmdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoaW5kZXggPT09IGJvYXJkU2l6ZSAqIGkgKyAoYm9hcmRTaXplIC0gMSkpIHtcclxuICAgICAgcmV0dXJuICdyaWdodCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzd2l0Y2ggKGluZGV4KSB7XHJcbiAgICBjYXNlIDA6XHJcbiAgICAgIHJldHVybiAndG9wLWxlZnQnO1xyXG4gICAgY2FzZSBib2FyZFNpemUgLSAxOlxyXG4gICAgICByZXR1cm4gJ3RvcC1yaWdodCc7XHJcbiAgICBjYXNlIGJvYXJkU2l6ZSAqIChib2FyZFNpemUgLSAxKTpcclxuICAgICAgcmV0dXJuICdib3R0b20tbGVmdCc7XHJcbiAgICBjYXNlIGJvYXJkU2l6ZSAqKiAyIC0gMTpcclxuICAgICAgcmV0dXJuICdib3R0b20tcmlnaHQnO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuICdjZW50ZXInO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNIZWFsdGhMZXZlbChoZWFsdGgpIHtcclxuICBpZiAoaGVhbHRoIDwgMTUpIHtcclxuICAgIHJldHVybiAnY3JpdGljYWwnO1xyXG4gIH1cclxuXHJcbiAgaWYgKGhlYWx0aCA8IDUwKSB7XHJcbiAgICByZXR1cm4gJ25vcm1hbCc7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gJ2hpZ2gnO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZUNoYXJhY3RlcnMoY2hhcmFjdGVycywgcmVzdG9yZUZuKSB7XHJcbiAgcmV0dXJuIGNoYXJhY3RlcnMubWFwKHJlc3RvcmVGbik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cEF0dGFja0RlZmVuY2UoYmVmb3JlLCBsaWZlKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5tYXgoYmVmb3JlLCAoYmVmb3JlICogKDgwICsgbGlmZSkpIC8gMTAwKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVEYW1hZ2UoYXR0YWNrLCBkZWZlbmNlKSB7XHJcbiAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5tYXgoYXR0YWNrIC0gZGVmZW5jZSwgYXR0YWNrICogMC4zKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRJbmZvKHBsYXllcikge1xyXG4gIHJldHVybiBgXFx1ezFGMzk2fSR7cGxheWVyLmxldmVsfSBcXHUyNjk0JHtwbGF5ZXIuYXR0YWNrfSBcXHV7MUY2RTF9JHtwbGF5ZXIuZGVmZW5jZX0gXFx1Mjc2NCR7cGxheWVyLmhlYWx0aH1gO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gb3ZlcndyaXRlUHJvcGVydGllcyh0YXJnZXQsIHNvdXJjZSkge1xyXG4gIE9iamVjdC5hc3NpZ24odGFyZ2V0LCBzb3VyY2UpO1xyXG4gIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5kb21DaGFyYWN0ZXIodGVhbSkge1xyXG4gIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGVhbS5sZW5ndGgpO1xyXG4gIHJldHVybiB0ZWFtW3JhbmRvbUluZGV4XTtcclxufVxyXG4iLCJjb25zdCB0aGVtZXMgPSB7XHJcbiAgcHJhaXJpZTogJ3ByYWlyaWUnLFxyXG4gIGRlc2VydDogJ2Rlc2VydCcsXHJcbiAgYXJjdGljOiAnYXJjdGljJyxcclxuICBtb3VudGFpbjogJ21vdW50YWluJyxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHRoZW1lcztcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVN0YXRlIHtcclxuICBjb25zdHJ1Y3RvcihnYW1lUGxheSkge1xyXG4gICAgdGhpcy5sZXZlbEdhbWUgPSAxO1xyXG4gICAgdGhpcy5nYW1lUGxheSA9IGdhbWVQbGF5O1xyXG4gICAgdGhpcy5pc01vdmUgPSAndXNlcic7XHJcbiAgICB0aGlzLmNvdW50Q2xpY2sgPSAwO1xyXG4gICAgdGhpcy5zdXJ2aXZvcnMgPSBbXTtcclxuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xyXG4gICAgdGhpcy5wb2ludHMgPSAwO1xyXG4gICAgdGhpcy5ibG9jayA9IGZhbHNlO1xyXG4gICAgdGhpcy51c2VyVGVhbSA9IFtdO1xyXG4gICAgdGhpcy5jb21wVGVhbSA9IFtdO1xyXG4gICAgdGhpcy5hY3RpdmVDaGFyID0gbnVsbDtcclxuICAgIHRoaXMuaW5kZXhTZWxlY3QgPSBudWxsO1xyXG4gICAgdGhpcy50cmFuc2l0aW9uQ2VsbHMgPSBbXTtcclxuICAgIHRoaXMuYXR0YWNrQ2VsbHMgPSBbXTtcclxuICAgIHRoaXMuc2hvd01vZGFsID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBnZXRBbGxQbGF5ZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMudXNlclRlYW0gfHwgIXRoaXMuY29tcFRlYW0pIHRocm93IG5ldyBFcnJvcignaXQgbXVzdCBoYXZlIDIgYXJndW1lbnRzJyk7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMudXNlclRlYW0sIC4uLnRoaXMuY29tcFRlYW1dO1xyXG4gIH1cclxuXHJcbiAgY2FsY3VsYXRlU3VtUG9pbnRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudXNlclRlYW0ucmVkdWNlKChhLCBiKSA9PiBhICsgYi5jaGFyYWN0ZXIuaGVhbHRoLCAwKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJQb3NpdGlvbigpIHtcclxuICAgIGNvbnN0IGZvdW5kSXRlbSA9IHRoaXMudXNlclRlYW0uZmluZCgoaXRlbSkgPT4gdGhpcy5hdHRhY2tDZWxscy5pbmNsdWRlcyhpdGVtLnBvc2l0aW9uKSk7XHJcbiAgICByZXR1cm4gZm91bmRJdGVtID8gZm91bmRJdGVtLnBvc2l0aW9uIDogdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgZmluZFByZXN1bWVkRGVjZWFzZWRQbGF5ZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5nZXRBbGxQbGF5ZXIoKS5maW5kKChlKSA9PiBlLnBvc2l0aW9uID09PSB0aGlzLmFjdGl2ZUNoYXJVc2VyPy5wb3NpdGlvbik7XHJcbiAgfVxyXG5cclxuICBnZXRQcmVzdW1lZERlY2Vhc2VkUGxheWVySW5mbyhwb3NpdGlvbikge1xyXG4gICAgY29uc3QgdGVhbSA9IHRoaXMuaXNNb3ZlID09PSAnY29tcCcgPyB0aGlzLnVzZXJUZWFtIDogdGhpcy5jb21wVGVhbTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbmRleDogdGVhbS5maW5kSW5kZXgoKGl0ZW0pID0+IHBvc2l0aW9uID09PSBpdGVtLnBvc2l0aW9uKSxcclxuICAgICAgdGVhbUtleTogdGhpcy5pc01vdmUgPT09ICdjb21wJyA/ICd1c2VyVGVhbScgOiAnY29tcFRlYW0nLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldFBsYXllcihpbmRleCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxsUGxheWVyKCkuZmluZCgoZWwpID0+IGVsLnBvc2l0aW9uID09PSBpbmRleCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IGN1cnNvcnMgPSB7XHJcbiAgYXV0bzogJ2F1dG8nLFxyXG4gIHBvaW50ZXI6ICdwb2ludGVyJyxcclxuICBjcm9zc2hhaXI6ICdjcm9zc2hhaXInLFxyXG4gIG5vdGFsbG93ZWQ6ICdub3QtYWxsb3dlZCcsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjdXJzb3JzO1xyXG4iLCIvLyBjcmVhdGUgdHdvLWRpbWVuc2lvbmFsIGZpZWxkXHJcbmZ1bmN0aW9uIGdldFRhYmxlKGNlbGxzLCBib2FyZFNpemUpIHtcclxuICBjb25zdCByZXN1bHQgPSBbXTtcclxuICBmb3IgKFxyXG4gICAgbGV0IHMgPSAwLCBlID0gYm9hcmRTaXplO1xyXG4gICAgcyA8IGNlbGxzLmxlbmd0aDtcclxuICAgIHMgKz0gYm9hcmRTaXplLCBlICs9IGJvYXJkU2l6ZVxyXG4gICkge1xyXG4gICAgcmVzdWx0LnB1c2goY2VsbHMuc2xpY2UocywgZSkpO1xyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBdHRhY2tDZWxscyhjZWxscywgaW5kZXgsIG1heFJhbmdlKSB7XHJcbiAgY29uc3QgYWxsb3dlZENlbGxzID0gW107XHJcbiAgbGV0IGZpbmRJbmRleDtcclxuICBsZXQgcm93O1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIHJvdyA9IGk7XHJcbiAgICBmaW5kSW5kZXggPSBjZWxsc1tpXS5maW5kSW5kZXgoKGVsKSA9PiBlbCA9PT0gaW5kZXgpO1xyXG4gICAgaWYgKGZpbmRJbmRleCAhPT0gLTEpIGJyZWFrO1xyXG4gIH1cclxuICBmb3IgKGxldCBpID0gLW1heFJhbmdlOyBpIDw9IG1heFJhbmdlOyBpICs9IDEpIHtcclxuICAgIGZvciAobGV0IGogPSAtbWF4UmFuZ2U7IGogPD0gbWF4UmFuZ2U7IGogKz0gMSkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgcm93ICsgaSA+PSAwXHJcbiAgICAgICAgJiYgZmluZEluZGV4ICsgaiA+PSAwXHJcbiAgICAgICAgJiYgcm93ICsgaSA8IGNlbGxzLmxlbmd0aFxyXG4gICAgICAgICYmIGZpbmRJbmRleCArIGogPCBjZWxscy5sZW5ndGhcclxuICAgICAgICAmJiBjZWxsc1tyb3cgKyBpXVtmaW5kSW5kZXggKyBqXSAhPT0gaW5kZXhcclxuICAgICAgKSB7XHJcbiAgICAgICAgYWxsb3dlZENlbGxzLnB1c2goY2VsbHNbcm93ICsgaV1bZmluZEluZGV4ICsgal0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBhbGxvd2VkQ2VsbHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRyYW5zaXRpb25DZWxscyhjZWxscywgaW5kZXgsIG1heFJhbmdlKSB7XHJcbiAgY29uc3QgdHJhbnNpdENlbGxzID0gW107XHJcbiAgbGV0IGZpbmRJbmRleDtcclxuICBsZXQgcm93O1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgIHJvdyA9IGk7XHJcbiAgICBmaW5kSW5kZXggPSBjZWxsc1tpXS5maW5kSW5kZXgoKGVsKSA9PiBlbCA9PT0gaW5kZXgpO1xyXG4gICAgaWYgKGZpbmRJbmRleCAhPT0gLTEpIGJyZWFrO1xyXG4gIH1cclxuXHJcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbWF4UmFuZ2U7IGkgKz0gMSkge1xyXG4gICAgaWYgKGZpbmRJbmRleCAtIGkgPj0gMCkge1xyXG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3ddW2ZpbmRJbmRleCAtIGldKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZmluZEluZGV4ICsgaSA8IGNlbGxzLmxlbmd0aCkge1xyXG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3ddW2ZpbmRJbmRleCArIGldKTtcclxuICAgIH1cclxuICAgIGlmIChyb3cgKyBpIDwgY2VsbHMubGVuZ3RoICYmIGZpbmRJbmRleCAtIGkgPj0gMCkge1xyXG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgKyBpXVtmaW5kSW5kZXggLSBpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvdyArIGkgPCBjZWxscy5sZW5ndGggJiYgZmluZEluZGV4ICsgaSA8IGNlbGxzLmxlbmd0aCkge1xyXG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgKyBpXVtmaW5kSW5kZXggKyBpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvdyAtIGkgPj0gMCAmJiBmaW5kSW5kZXggLSBpID49IDApIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93IC0gaV1bZmluZEluZGV4IC0gaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb3cgLSBpID49IDAgJiYgZmluZEluZGV4ICsgaSA8IGNlbGxzLmxlbmd0aCkge1xyXG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgLSBpXVtmaW5kSW5kZXggKyBpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvdyAtIGkgPj0gMCkge1xyXG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgLSBpXVtmaW5kSW5kZXhdKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm93ICsgaSA8IGNlbGxzLmxlbmd0aCkge1xyXG4gICAgICB0cmFuc2l0Q2VsbHMucHVzaChjZWxsc1tyb3cgKyBpXVtmaW5kSW5kZXhdKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRyYW5zaXRDZWxscztcclxufVxyXG5cclxuLy8gcmV0dXJucyBjZWxscyBhbGxvd2VkIGZvciBhY3Rpb25cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkF0dGFja0NlbGxzKFxyXG4gIGluZGV4LFxyXG4gIGJvYXJkU2l6ZSxcclxuICBtYXhSYW5nZSxcclxuICBhdHRhY2sgPSBmYWxzZSxcclxuKSB7XHJcbiAgY29uc3QgYXJyYXlDZWxscyA9IFtdO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmRTaXplICoqIDI7IGkgKz0gMSkge1xyXG4gICAgYXJyYXlDZWxscy5wdXNoKGkpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGFibGVDZWxscyA9IGdldFRhYmxlKGFycmF5Q2VsbHMsIGJvYXJkU2l6ZSk7XHJcbiAgaWYgKGF0dGFjaykge1xyXG4gICAgcmV0dXJuIGdldEF0dGFja0NlbGxzKHRhYmxlQ2VsbHMsIGluZGV4LCBtYXhSYW5nZSk7XHJcbiAgfVxyXG4gIHJldHVybiBnZXRUcmFuc2l0aW9uQ2VsbHModGFibGVDZWxscywgaW5kZXgsIG1heFJhbmdlKTtcclxufVxyXG4iLCIvKipcclxuICog0JrQu9Cw0YHRgSwg0L/RgNC10LTRgdGC0LDQstC70Y/RjtGJ0LjQuSDQv9C10YDRgdC+0L3QsNC20LXQuSDQutC+0LzQsNC90LTRi1xyXG4gKlxyXG4gKiBAdG9kbyDQodCw0LzQvtGB0YLQvtGP0YLQtdC70YzQvdC+INC/0YDQvtC00YPQvNCw0LnRgtC1INGF0YDQsNC90LXQvdC40LUg0L/QtdGA0YHQvtC90LDQttC10Lkg0LIg0LrQu9Cw0YHRgdC1XHJcbiAqINCd0LDQv9GA0LjQvNC10YBcclxuICogQGV4YW1wbGVcclxuICogYGBganNcclxuICogY29uc3QgY2hhcmFjdGVycyA9IFtuZXcgU3dvcmRzbWFuKDIpLCBuZXcgQm93bWFuKDEpXVxyXG4gKiBjb25zdCB0ZWFtID0gbmV3IFRlYW0oY2hhcmFjdGVycyk7XHJcbiAqXHJcbiAqIHRlYW0uY2hhcmFjdGVycyAvLyBbc3dvcmRzbWFuLCBib3dtYW5dXHJcbiAqIGBgYFxyXG4gKiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZWFtIHtcclxuICAvLyBUT0RPOiB3cml0ZSB5b3VyIGxvZ2ljIGhlcmVcclxuICBjb25zdHJ1Y3RvcihjaGFyYWN0ZXJzKSB7XHJcbiAgICB0aGlzLmNoYXJhY3RlcnMgPSBjaGFyYWN0ZXJzO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyB1cEF0dGFja0RlZmVuY2UgfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG4vKipcclxuICog0JHQsNC30L7QstGL0Lkg0LrQu9Cw0YHRgSwg0L7RgiDQutC+0YLQvtGA0L7Qs9C+INC90LDRgdC70LXQtNGD0Y7RgtGB0Y8g0LrQu9Cw0YHRgdGLINC/0LXRgNGB0L7QvdCw0LbQtdC5XHJcbiAqIEBwcm9wZXJ0eSBsZXZlbCAtINGD0YDQvtCy0LXQvdGMINC/0LXRgNGB0L7QvdCw0LbQsCwg0L7RgiAxINC00L4gNFxyXG4gKiBAcHJvcGVydHkgYXR0YWNrIC0g0L/QvtC60LDQt9Cw0YLQtdC70Ywg0LDRgtCw0LrQuFxyXG4gKiBAcHJvcGVydHkgZGVmZW5jZSAtINC/0L7QutCw0LfQsNGC0LXQu9GMINC30LDRidC40YLRi1xyXG4gKiBAcHJvcGVydHkgaGVhbHRoIC0g0LfQtNC+0YDQvtCy0YzQtSDQv9C10YDRgdC+0L3QsNC20LBcclxuICogQHByb3BlcnR5IHR5cGUgLSDRgdGC0YDQvtC60LAg0YEg0L7QtNC90LjQvCDQuNC3INC00L7Qv9GD0YHRgtC40LzRi9GFINC30L3QsNGH0LXQvdC40Lk6XHJcbiAqIHN3b3Jkc21hblxyXG4gKiBib3dtYW5cclxuICogbWFnaWNpYW5cclxuICogZGFlbW9uXHJcbiAqIHVuZGVhZFxyXG4gKiB2YW1waXJlXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGxldmVsLCB0eXBlID0gJ2dlbmVyaWMnKSB7XHJcbiAgICBpZiAobmV3LnRhcmdldC5uYW1lID09PSAnQ2hhcmFjdGVyJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY2xhc3MnKTtcclxuICAgIH1cclxuICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLmxldmVsID0gbGV2ZWw7XHJcbiAgICB0aGlzLmF0dGFjayA9IDA7XHJcbiAgICB0aGlzLmRlZmVuY2UgPSAwO1xyXG4gICAgdGhpcy5oZWFsdGggPSA1MDtcclxuICB9XHJcblxyXG4gIGxldmVsVXAoKSB7XHJcbiAgICBpZiAodGhpcy5oZWFsdGggPD0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBsZXZlbCB1cCBhIGRlYWQgY2hhcmFjdGVyXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMubGV2ZWwgPSBNYXRoLm1pbih0aGlzLmxldmVsICsgMSwgNCk7XHJcbiAgICB0aGlzLmF0dGFjayA9IHVwQXR0YWNrRGVmZW5jZSh0aGlzLmF0dGFjaywgdGhpcy5oZWFsdGgpO1xyXG4gICAgdGhpcy5kZWZlbmNlID0gdXBBdHRhY2tEZWZlbmNlKHRoaXMuZGVmZW5jZSwgdGhpcy5oZWFsdGgpO1xyXG4gICAgdGhpcy5oZWFsdGggPSBNYXRoLm1pbih0aGlzLmhlYWx0aCArIDgwLCAxMDApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vY2hhcmFjdGVycy9DaGFyYWN0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9zaXRpb25lZENoYXJhY3RlciB7XHJcbiAgY29uc3RydWN0b3IoY2hhcmFjdGVyLCBwb3NpdGlvbikge1xyXG4gICAgdGhpcy5jaGFyYWN0ZXIgPSBjaGFyYWN0ZXI7XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgfVxyXG5cclxuICBzZXQgY2hhcmFjdGVyKHZhbHVlKSB7XHJcbiAgICBpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIENoYXJhY3RlcikpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICdjaGFyYWN0ZXIgbXVzdCBiZSBpbnN0YW5jZSBvZiBDaGFyYWN0ZXIgb3IgaXRzIGNoaWxkcmVuJyxcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2NoYXJhY3RlciA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNoYXJhY3RlcigpIHtcclxuICAgIHJldHVybiB0aGlzLl9jaGFyYWN0ZXI7XHJcbiAgfVxyXG5cclxuICBzZXQgcG9zaXRpb24odmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcigncG9zaXRpb24gbXVzdCBiZSBhIG51bWJlcicpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fcG9zaXRpb24gPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGdldCBwb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9wb3NpdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb3dtYW4gZXh0ZW5kcyBDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGxldmVsID0gMSkge1xyXG4gICAgc3VwZXIobGV2ZWwpO1xyXG4gICAgdGhpcy50eXBlID0gJ2Jvd21hbic7XHJcbiAgICB0aGlzLmF0dGFjayA9IDI1O1xyXG4gICAgdGhpcy5kZWZlbmNlID0gMjU7XHJcbiAgICB0aGlzLm1heFJhbmdlID0gMjtcclxuICAgIHRoaXMubWF4QXR0YWNrID0gMjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTd29yZHNtYW4gZXh0ZW5kcyBDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGxldmVsID0gMSkge1xyXG4gICAgc3VwZXIobGV2ZWwpO1xyXG4gICAgdGhpcy50eXBlID0gJ3N3b3Jkc21hbic7XHJcbiAgICB0aGlzLmF0dGFjayA9IDQwO1xyXG4gICAgdGhpcy5kZWZlbmNlID0gMTA7XHJcbiAgICB0aGlzLm1heFJhbmdlID0gNDtcclxuICAgIHRoaXMubWF4QXR0YWNrID0gMTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL0NoYXJhY3Rlcic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWdpY2lhbiBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgY29uc3RydWN0b3IobGV2ZWwgPSAxKSB7XHJcbiAgICBzdXBlcihsZXZlbCk7XHJcbiAgICB0aGlzLnR5cGUgPSAnbWFnaWNpYW4nO1xyXG4gICAgdGhpcy5hdHRhY2sgPSAxMDtcclxuICAgIHRoaXMuZGVmZW5jZSA9IDQwO1xyXG4gICAgdGhpcy5tYXhSYW5nZSA9IDE7XHJcbiAgICB0aGlzLm1heEF0dGFjayA9IDQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi9DaGFyYWN0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGFlbW9uIGV4dGVuZHMgQ2hhcmFjdGVyIHtcclxuICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEpIHtcclxuICAgIHN1cGVyKGxldmVsKTtcclxuICAgIHRoaXMudHlwZSA9ICdkYWVtb24nO1xyXG4gICAgdGhpcy5hdHRhY2sgPSAxMDtcclxuICAgIHRoaXMuZGVmZW5jZSA9IDEwO1xyXG4gICAgdGhpcy5tYXhSYW5nZSA9IDE7XHJcbiAgICB0aGlzLm1heEF0dGFjayA9IDQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi9DaGFyYWN0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5kZWFkIGV4dGVuZHMgQ2hhcmFjdGVyIHtcclxuICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEpIHtcclxuICAgIHN1cGVyKGxldmVsKTtcclxuICAgIHRoaXMudHlwZSA9ICd1bmRlYWQnO1xyXG4gICAgdGhpcy5hdHRhY2sgPSA0MDtcclxuICAgIHRoaXMuZGVmZW5jZSA9IDEwO1xyXG4gICAgdGhpcy5tYXhSYW5nZSA9IDQ7XHJcbiAgICB0aGlzLm1heEF0dGFjayA9IDE7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi9DaGFyYWN0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFtcGlyZSBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgY29uc3RydWN0b3IobGV2ZWwgPSAxKSB7XHJcbiAgICBzdXBlcihsZXZlbCk7XHJcbiAgICB0aGlzLnR5cGUgPSAndmFtcGlyZSc7XHJcbiAgICB0aGlzLmF0dGFjayA9IDI1O1xyXG4gICAgdGhpcy5kZWZlbmNlID0gMjU7XHJcbiAgICB0aGlzLm1heFJhbmdlID0gMjtcclxuICAgIHRoaXMubWF4QXR0YWNrID0gMjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZ2VuZXJhdGVUZWFtIH0gZnJvbSAnLi9nZW5lcmF0b3JzJztcclxuaW1wb3J0IFBvc2l0aW9uZWRDaGFyYWN0ZXIgZnJvbSAnLi9Qb3NpdGlvbmVkQ2hhcmFjdGVyJztcclxuaW1wb3J0IEJvd21hbiBmcm9tICcuL2NoYXJhY3RlcnMvQm93bWFuJztcclxuaW1wb3J0IFN3b3Jkc21hbiBmcm9tICcuL2NoYXJhY3RlcnMvU3dvcmRzbWFuJztcclxuaW1wb3J0IE1hZ2ljaWFuIGZyb20gJy4vY2hhcmFjdGVycy9NYWdpY2lhbic7XHJcbmltcG9ydCBEYWVtb24gZnJvbSAnLi9jaGFyYWN0ZXJzL0RhZW1vbic7XHJcbmltcG9ydCBVbmRlYWQgZnJvbSAnLi9jaGFyYWN0ZXJzL1VuZGVhZCc7XHJcbmltcG9ydCBWYW1waXJlIGZyb20gJy4vY2hhcmFjdGVycy9WYW1waXJlJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaG9vc2VSYW5kUG9zaXRpb25zKGJvYXJkU2l6ZSwgb3Bwb25lbnQgPSBmYWxzZSkge1xyXG4gIGNvbnN0IGNlbGxzID0gW107XHJcbiAgaWYgKCFvcHBvbmVudCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZFNpemUgKiogMjsgaSArPSA4KSB7XHJcbiAgICAgIGNlbGxzLnB1c2goaSk7XHJcbiAgICAgIGNlbGxzLnB1c2goaSArIDEpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBmb3IgKGxldCBpID0gYm9hcmRTaXplIC0gMjsgaSA8IGJvYXJkU2l6ZSAqKiAyOyBpICs9IGJvYXJkU2l6ZSkge1xyXG4gICAgICBjZWxscy5wdXNoKGkpO1xyXG4gICAgICBjZWxscy5wdXNoKGkgKyAxKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGNlbGxzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaG9vc2VSYW5kUG9zaXRpb24oYm9hcmRTaXplLCBvcHBvbmVudCA9IGZhbHNlKSB7XHJcbiAgY29uc3QgY2VsbHMgPSBjaG9vc2VSYW5kUG9zaXRpb25zKGJvYXJkU2l6ZSwgb3Bwb25lbnQpO1xyXG4gIGNvbnN0IHJhbmQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjZWxscy5sZW5ndGgpO1xyXG4gIHJldHVybiBjZWxsc1tyYW5kXTtcclxufVxyXG5cclxuLyogZXNsaW50LWRpc2FibGUgKi9cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25zQ2hhcihcclxuICBwbGF5ZXJUeXBlcyxcclxuICBib2FyZFNpemUsXHJcbiAgb3Bwb25lbnQsXHJcbiAgW21heExldmVsLCBjaGFyQ291bnRdXHJcbikge1xyXG4gIGNvbnN0IHBvc2l0aW9ucyA9IFtdO1xyXG4gIGlmIChtYXhMZXZlbCA+PSA0KSBtYXhMZXZlbCA9IDQ7XHJcbiAgaWYgKGNoYXJDb3VudCA+PSAxMCkgY2hhckNvdW50ID0gMTA7XHJcbiAgY29uc3QgdGVhbSA9IGdlbmVyYXRlVGVhbShwbGF5ZXJUeXBlcywgbWF4TGV2ZWwsIGNoYXJDb3VudCk7XHJcblxyXG4gIGNvbnN0IHJhbmRQb3NpdGlvbnMgPSBbXTtcclxuICB0ZWFtLmNoYXJhY3RlcnMuZm9yRWFjaCgoY2hhcikgPT4ge1xyXG4gICAgbGV0IHJhbmRQb3NpdGlvbjtcclxuICAgIGxldCBpc1Bvc2l0aW9uVW5pcXVlID0gZmFsc2U7XHJcbiAgICBkbyB7XHJcbiAgICAgIHJhbmRQb3NpdGlvbiA9IGNob29zZVJhbmRQb3NpdGlvbihib2FyZFNpemUsIG9wcG9uZW50KTtcclxuICAgICAgaWYgKHJhbmRQb3NpdGlvbnMuZmluZCgoZWwpID0+IGVsID09PSByYW5kUG9zaXRpb24pKSB7XHJcbiAgICAgICAgcmFuZFBvc2l0aW9uID0gY2hvb3NlUmFuZFBvc2l0aW9uKGJvYXJkU2l6ZSwgb3Bwb25lbnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJhbmRQb3NpdGlvbnMucHVzaChyYW5kUG9zaXRpb24pO1xyXG4gICAgICAgIGlzUG9zaXRpb25VbmlxdWUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9IHdoaWxlICghaXNQb3NpdGlvblVuaXF1ZSk7XHJcbiAgICBwb3NpdGlvbnMucHVzaChuZXcgUG9zaXRpb25lZENoYXJhY3RlcihjaGFyLCByYW5kUG9zaXRpb24pKTtcclxuICB9KTtcclxuICByZXR1cm4gcG9zaXRpb25zO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZUNoYXIob2JqKSB7XHJcbiAgaWYgKCFvYmopIHJldHVybiBudWxsO1xyXG4gXHJcbiAgY29uc3QgY2hhckNsYXNzZXMgPSB7XHJcbiAgICBib3dtYW46IEJvd21hbixcclxuICAgIHN3b3Jkc21hbjogU3dvcmRzbWFuLFxyXG4gICAgbWFnaWNpYW46IE1hZ2ljaWFuLFxyXG4gICAgZGFlbW9uOiBEYWVtb24sXHJcbiAgICB1bmRlYWQ6IFVuZGVhZCxcclxuICAgIHZhbXBpcmU6IFZhbXBpcmUsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgQ2hhckNsYXNzID0gY2hhckNsYXNzZXNbb2JqLl9jaGFyYWN0ZXIudHlwZV0gfHwgbnVsbDtcclxuICBjb25zdCBjaGFyID0gbmV3IENoYXJDbGFzcyhvYmouX2NoYXJhY3Rlci5sZXZlbCk7XHJcbiAgY29uc3QgcmVzdG9yZVBvc2l0aW9uZWRDaGFyID0gbmV3IFBvc2l0aW9uZWRDaGFyYWN0ZXIoY2hhciwgb2JqLl9wb3NpdGlvbik7XHJcblxyXG4gIGNoYXIuYXR0YWNrID0gb2JqLl9jaGFyYWN0ZXIuYXR0YWNrO1xyXG4gIGNoYXIuaGVhbHRoID0gb2JqLl9jaGFyYWN0ZXIuaGVhbHRoO1xyXG4gIGNoYXIuZGVmZW5jZSA9IG9iai5fY2hhcmFjdGVyLmRlZmVuY2U7XHJcblxyXG4gIHJldHVybiByZXN0b3JlUG9zaXRpb25lZENoYXI7XHJcbn1cclxuIiwiaW1wb3J0IFRlYW0gZnJvbSAnLi9UZWFtJztcclxuXHJcbi8qKlxyXG4gKiDQpNC+0YDQvNC40YDRg9C10YIg0Y3QutC30LXQvNC/0LvRj9GAINC/0LXRgNGB0L7QvdCw0LbQsCDQuNC3INC80LDRgdGB0LjQstCwIGFsbG93ZWRUeXBlcyDRgdC+XHJcbiAqINGB0LvRg9GH0LDQudC90YvQvCDRg9GA0L7QstC90LXQvCDQvtGCIDEg0LTQviBtYXhMZXZlbFxyXG4gKlxyXG4gKiBAcGFyYW0gYWxsb3dlZFR5cGVzINC80LDRgdGB0LjQsiDQutC70LDRgdGB0L7QslxyXG4gKiBAcGFyYW0gbWF4TGV2ZWwg0LzQsNC60YHQuNC80LDQu9GM0L3Ri9C5INCy0L7Qt9C80L7QttC90YvQuSDRg9GA0L7QstC10L3RjCDQv9C10YDRgdC+0L3QsNC20LBcclxuICogQHJldHVybnMg0LPQtdC90LXRgNCw0YLQvtGALCDQutC+0YLQvtGA0YvQuSDQv9GA0Lgg0LrQsNC20LTQvtC8INCy0YvQt9C+0LLQtSDQstC+0LfQstGA0LDRidCw0LXRgiDQvdC+0LLRi9C5INGN0LrQt9C10LzQv9C70Y/RgCDQutC70LDRgdGB0LAg0L/QtdGA0YHQvtC90LDQttCwXHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24qIGNoYXJhY3RlckdlbmVyYXRvcihhbGxvd2VkVHlwZXMsIG1heExldmVsKSB7XHJcbiAgLy8gVE9ETzogd3JpdGUgbG9naWMgaGVyZVxyXG4gIHdoaWxlICh0cnVlKSB7XHJcbiAgICBjb25zdCByYW5kb21MZXZlbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1heExldmVsICsgMSk7XHJcbiAgICBjb25zdCBSYW5kb21DbGFzcyA9IGFsbG93ZWRUeXBlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkVHlwZXMubGVuZ3RoKV07XHJcbiAgICB5aWVsZCBuZXcgUmFuZG9tQ2xhc3MocmFuZG9tTGV2ZWwpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqINCk0L7RgNC80LjRgNGD0LXRgiDQvNCw0YHRgdC40LIg0L/QtdGA0YHQvtC90LDQttC10Lkg0L3QsCDQvtGB0L3QvtCy0LUgY2hhcmFjdGVyR2VuZXJhdG9yXHJcbiAqIEBwYXJhbSBhbGxvd2VkVHlwZXMg0LzQsNGB0YHQuNCyINC60LvQsNGB0YHQvtCyXHJcbiAqIEBwYXJhbSBtYXhMZXZlbCDQvNCw0LrRgdC40LzQsNC70YzQvdGL0Lkg0LLQvtC30LzQvtC20L3Ri9C5INGD0YDQvtCy0LXQvdGMINC/0LXRgNGB0L7QvdCw0LbQsFxyXG4gKiBAcGFyYW0gY2hhcmFjdGVyQ291bnQg0LrQvtC70LjRh9C10YHRgtCy0L4g0L/QtdGA0YHQvtC90LDQttC10LksINC60L7RgtC+0YDQvtC1INC90YPQttC90L4g0YHRhNC+0YDQvNC40YDQvtCy0LDRgtGMXHJcbiAqIEByZXR1cm5zINGN0LrQt9C10LzQv9C70Y/RgCBUZWFtLCDRhdGA0LDQvdGP0YnQuNC5INGN0LrQt9C10LzQv9C70Y/RgNGLINC/0LXRgNGB0L7QvdCw0LbQtdC5LlxyXG4gKiDQmtC+0LvQuNGH0LXRgdGC0LLQviDQv9C10YDRgdC+0L3QsNC20LXQuSDQsiDQutC+0LzQsNC90LTQtSAtIGNoYXJhY3RlckNvdW50XHJcbiAqICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRlYW0oYWxsb3dlZFR5cGVzLCBtYXhMZXZlbCwgY2hhcmFjdGVyQ291bnQpIHtcclxuICAvLyBUT0RPOiB3cml0ZSBsb2dpYyBoZXJlXHJcbiAgY29uc3QgY2hhcmFjdGVycyA9IFtdO1xyXG4gIGNvbnN0IHBsYXllckdlbmVyYXRvciA9IGNoYXJhY3RlckdlbmVyYXRvcihhbGxvd2VkVHlwZXMsIG1heExldmVsKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhY3RlckNvdW50OyBpICs9IDEpIHtcclxuICAgIGNoYXJhY3RlcnMucHVzaChwbGF5ZXJHZW5lcmF0b3IubmV4dCgpLnZhbHVlKTtcclxuICB9XHJcbiAgcmV0dXJuIG5ldyBUZWFtKGNoYXJhY3RlcnMpO1xyXG59XHJcbiIsIi8qKlxyXG4gKiBFbnRyeSBwb2ludCBvZiBhcHA6IGRvbid0IGNoYW5nZSB0aGlzXHJcbiAqL1xyXG5pbXBvcnQgR2FtZVBsYXkgZnJvbSAnLi9HYW1lUGxheSc7XHJcbmltcG9ydCBHYW1lQ29udHJvbGxlciBmcm9tICcuL0dhbWVDb250cm9sbGVyJztcclxuaW1wb3J0IEdhbWVTdGF0ZVNlcnZpY2UgZnJvbSAnLi9HYW1lU3RhdGVTZXJ2aWNlJztcclxuXHJcbmNvbnN0IGdhbWVQbGF5ID0gbmV3IEdhbWVQbGF5KCk7XHJcbmdhbWVQbGF5LmJpbmRUb0RPTShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2FtZS1jb250YWluZXInKSk7XHJcblxyXG5jb25zdCBzdGF0ZVNlcnZpY2UgPSBuZXcgR2FtZVN0YXRlU2VydmljZShsb2NhbFN0b3JhZ2UpO1xyXG5jb25zdCBnYW1lQ3RybCA9IG5ldyBHYW1lQ29udHJvbGxlcihnYW1lUGxheSwgc3RhdGVTZXJ2aWNlKTtcclxuZ2FtZUN0cmwuaW5pdCgpO1xyXG5cclxuLy8gZG9uJ3Qgd3JpdGUgeW91ciBjb2RlIGhlcmVcclxuIiwiaW1wb3J0IE1vZGFsUG9wdXAgZnJvbSAnLi9Nb2RhbFBvcHVwJztcclxuaW1wb3J0IHsgY2FsY0hlYWx0aExldmVsLCBjYWxjVGlsZVR5cGUgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVQbGF5IHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuYm9hcmRTaXplID0gODtcclxuICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcclxuICAgIHRoaXMuYm9hcmRFbCA9IG51bGw7XHJcbiAgICB0aGlzLmNlbGxzID0gW107XHJcbiAgICB0aGlzLmNlbGxDbGlja0xpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMuY2VsbExlYXZlTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLm5ld0dhbWVMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMuc2F2ZUdhbWVMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMubG9hZEdhbWVMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMuaXNNb2RhbCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuaW5pdE1vZGFsTGlzdGVuZXIoKTtcclxuICB9XHJcblxyXG4gIGJpbmRUb0RPTShjb250YWluZXIpIHtcclxuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbnRhaW5lciBpcyBub3QgSFRNTEVsZW1lbnQnKTtcclxuICAgIH1cclxuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gIH1cclxuXHJcbiAgaW5pdE1vZGFsTGlzdGVuZXIoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBlLnRhcmdldC5kYXRhc2V0LmhhbmRsZXIgPT09ICdtb2RhbEhhbmRsZXJDYW5jZWwnXHJcbiAgICAgICAgJiYgdGhpcy5jdXJyZW50TW9kYWxcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kYWwuaGlkZSgpO1xyXG4gICAgICAgIHRoaXMuaXNNb2RhbCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIGJvYXJkRWwgd2l0aCBzcGVjaWZpYyB0aGVtZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIHRoZW1lXHJcbiAgICovXHJcbiAgZHJhd1VpKHRoZW1lKSB7XHJcbiAgICB0aGlzLmNoZWNrQmluZGluZygpO1xyXG5cclxuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRyb2xzXCI+XHJcbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLXJlc3RhcnRcIiBjbGFzcz1cImJ0blwiPk5ldyBHYW1lPC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVwiYWN0aW9uLXNhdmVcIiBjbGFzcz1cImJ0blwiPlNhdmUgR2FtZTwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1sb2FkXCIgY2xhc3M9XCJidG5cIj5Mb2FkIEdhbWU8L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJib2FyZC1jb250YWluZXJcIj5cclxuICAgICAgICA8ZGl2IGRhdGEtaWQ9XCJib2FyZFwiIGNsYXNzPVwiYm9hcmRcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHRoaXMubmV3R2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLXJlc3RhcnRdJyk7XHJcbiAgICB0aGlzLnNhdmVHYW1lRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1hY3Rpb24tc2F2ZV0nKTtcclxuICAgIHRoaXMubG9hZEdhbWVFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPWFjdGlvbi1sb2FkXScpO1xyXG5cclxuICAgIHRoaXMubmV3R2FtZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB0aGlzLm9uTmV3R2FtZUNsaWNrKGV2ZW50KSk7XHJcbiAgICB0aGlzLnNhdmVHYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMub25TYXZlR2FtZUNsaWNrKGV2ZW50KSk7XHJcbiAgICB0aGlzLmxvYWRHYW1lRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMub25Mb2FkR2FtZUNsaWNrKGV2ZW50KSk7XHJcblxyXG4gICAgdGhpcy5ib2FyZEVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9Ym9hcmRdJyk7XHJcbiAgICB0aGlzLmJvYXJkRWwuY2xhc3NMaXN0LmFkZCh0aGVtZSk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYm9hcmRTaXplICoqIDI7IGkgKz0gMSkge1xyXG4gICAgICBjb25zdCBjZWxsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgY2VsbEVsLmNsYXNzTGlzdC5hZGQoXHJcbiAgICAgICAgJ2NlbGwnLFxyXG4gICAgICAgICdtYXAtdGlsZScsXHJcbiAgICAgICAgYG1hcC10aWxlLSR7Y2FsY1RpbGVUeXBlKGksIHRoaXMuYm9hcmRTaXplKX1gLFxyXG4gICAgICApO1xyXG4gICAgICBjZWxsRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIChldmVudCkgPT4gdGhpcy5vbkNlbGxFbnRlcihldmVudCkpO1xyXG4gICAgICBjZWxsRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIChldmVudCkgPT4gdGhpcy5vbkNlbGxMZWF2ZShldmVudCkpO1xyXG4gICAgICBjZWxsRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMub25DZWxsQ2xpY2soZXZlbnQpKTtcclxuICAgICAgdGhpcy5ib2FyZEVsLmFwcGVuZENoaWxkKGNlbGxFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jZWxscyA9IEFycmF5LmZyb20odGhpcy5ib2FyZEVsLmNoaWxkcmVuKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERyYXdzIHBvc2l0aW9ucyAod2l0aCBjaGFycykgb24gYm9hcmRFbFxyXG4gICAqXHJcbiAgICogQHBhcmFtIHBvc2l0aW9ucyBhcnJheSBvZiBQb3NpdGlvbmVkQ2hhcmFjdGVyIG9iamVjdHNcclxuICAgKi9cclxuICByZWRyYXdQb3NpdGlvbnMocG9zaXRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGNlbGwgb2YgdGhpcy5jZWxscykge1xyXG4gICAgICBjZWxsLmlubmVySFRNTCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgcG9zaXRpb25zKSB7XHJcbiAgICAgIGNvbnN0IGNlbGxFbCA9IHRoaXMuYm9hcmRFbC5jaGlsZHJlbltwb3NpdGlvbi5wb3NpdGlvbl07XHJcbiAgICAgIGNvbnN0IGNoYXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBjaGFyRWwuY2xhc3NMaXN0LmFkZCgnY2hhcmFjdGVyJywgcG9zaXRpb24uY2hhcmFjdGVyLnR5cGUpO1xyXG5cclxuICAgICAgY29uc3QgaGVhbHRoRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgaGVhbHRoRWwuY2xhc3NMaXN0LmFkZCgnaGVhbHRoLWxldmVsJyk7XHJcblxyXG4gICAgICBjb25zdCBoZWFsdGhJbmRpY2F0b3JFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICBoZWFsdGhJbmRpY2F0b3JFbC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICdoZWFsdGgtbGV2ZWwtaW5kaWNhdG9yJyxcclxuICAgICAgICBgaGVhbHRoLWxldmVsLWluZGljYXRvci0ke2NhbGNIZWFsdGhMZXZlbChwb3NpdGlvbi5jaGFyYWN0ZXIuaGVhbHRoKX1gLFxyXG4gICAgICApO1xyXG4gICAgICBoZWFsdGhJbmRpY2F0b3JFbC5zdHlsZS53aWR0aCA9IGAke3Bvc2l0aW9uLmNoYXJhY3Rlci5oZWFsdGh9JWA7XHJcbiAgICAgIGhlYWx0aEVsLmFwcGVuZENoaWxkKGhlYWx0aEluZGljYXRvckVsKTtcclxuICAgICAgY2hhckVsLmFwcGVuZENoaWxkKGhlYWx0aEVsKTtcclxuICAgICAgY2VsbEVsLmFwcGVuZENoaWxkKGNoYXJFbCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzaG93TW9kYWwobWVzc2FnZSwgdW5pY29kZSkge1xyXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWxQb3B1cCh7XHJcbiAgICAgIHRpdGxlOiBtZXNzYWdlLFxyXG4gICAgICBjb250ZW50OiBgJiMke3VuaWNvZGV9YCxcclxuICAgICAgZm9vdGVyQnV0dG9uczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNsYXNzOiAnYnRuIGJ0bl9fY2FuY2VsJyxcclxuICAgICAgICAgIHRleHQ6ICdDbG9zZScsXHJcbiAgICAgICAgICBoYW5kbGVyOiAnbW9kYWxIYW5kbGVyQ2FuY2VsJyxcclxuICAgICAgICB9LFxyXG4gICAgICBdLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jdXJyZW50TW9kYWwgPSBtb2RhbDtcclxuXHJcbiAgICBtb2RhbC5zaG93KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbGlzdGVuZXIgdG8gbW91c2UgZW50ZXIgZm9yIGNlbGxcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIGFkZENlbGxFbnRlckxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmNlbGxFbnRlckxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBsaXN0ZW5lciB0byBtb3VzZSBsZWF2ZSBmb3IgY2VsbFxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNhbGxiYWNrXHJcbiAgICovXHJcbiAgYWRkQ2VsbExlYXZlTGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgIHRoaXMuY2VsbExlYXZlTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIG1vdXNlIGNsaWNrIGZvciBjZWxsXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRDZWxsQ2xpY2tMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5jZWxsQ2xpY2tMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJOZXcgR2FtZVwiIGJ1dHRvbiBjbGlja1xyXG4gICAqXHJcbiAgICogQHBhcmFtIGNhbGxiYWNrXHJcbiAgICovXHJcbiAgYWRkTmV3R2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLm5ld0dhbWVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJTYXZlIEdhbWVcIiBidXR0b24gY2xpY2tcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIGFkZFNhdmVHYW1lTGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgIHRoaXMuc2F2ZUdhbWVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbGlzdGVuZXIgdG8gXCJMb2FkIEdhbWVcIiBidXR0b24gY2xpY2tcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIGFkZExvYWRHYW1lTGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgIHRoaXMubG9hZEdhbWVMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICBvbkNlbGxFbnRlcihldmVudCkge1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmNlbGxzLmluZGV4T2YoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICB0aGlzLmNlbGxFbnRlckxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCwgaW5kZXgpKTtcclxuICB9XHJcblxyXG4gIG9uQ2VsbExlYXZlKGV2ZW50KSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZihldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIHRoaXMuY2VsbExlYXZlTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsLCBpbmRleCkpO1xyXG4gIH1cclxuXHJcbiAgb25DZWxsQ2xpY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgdGhpcy5jZWxsQ2xpY2tMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwsIGluZGV4KSk7XHJcbiAgfVxyXG5cclxuICBvbk5ld0dhbWVDbGljaygpIHtcclxuICAgIHRoaXMubmV3R2FtZUxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCkpO1xyXG4gIH1cclxuXHJcbiAgb25TYXZlR2FtZUNsaWNrKCkge1xyXG4gICAgdGhpcy5zYXZlR2FtZUxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCkpO1xyXG4gIH1cclxuXHJcbiAgb25Mb2FkR2FtZUNsaWNrKCkge1xyXG4gICAgdGhpcy5sb2FkR2FtZUxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCkpO1xyXG4gIH1cclxuXHJcbiAgc2hvd01vZGFsTWVzc2FnZShtZXNzYWdlLCB1bmljb2RlKSB7XHJcbiAgICBpZiAoIXRoaXMuaXNNb2RhbCkge1xyXG4gICAgICB0aGlzLmlzTW9kYWwgPSB0cnVlO1xyXG4gICAgICB0aGlzLnNob3dNb2RhbChtZXNzYWdlLCB1bmljb2RlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNlbGVjdENlbGwoaW5kZXgsIGNvbG9yID0gJ3llbGxvdycpIHtcclxuICAgIHRoaXMuZGVzZWxlY3RDZWxsKGluZGV4KTtcclxuICAgIHRoaXMuY2VsbHNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJywgYHNlbGVjdGVkLSR7Y29sb3J9YCk7XHJcbiAgfVxyXG5cclxuICBkZXNlbGVjdENlbGwoaW5kZXgpIHtcclxuICAgIGNvbnN0IGNlbGwgPSB0aGlzLmNlbGxzW2luZGV4XTtcclxuXHJcbiAgICBpZiAoY2VsbCkge1xyXG4gICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgLi4uQXJyYXkuZnJvbShjZWxsLmNsYXNzTGlzdCkuZmlsdGVyKChvKSA9PiBvLnN0YXJ0c1dpdGgoJ3NlbGVjdGVkJykpLFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hvd0NlbGxUb29sdGlwKG1lc3NhZ2UsIGluZGV4KSB7XHJcbiAgICB0aGlzLmNlbGxzW2luZGV4XS50aXRsZSA9IG1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBoaWRlQ2VsbFRvb2x0aXAoaW5kZXgpIHtcclxuICAgIHRoaXMuY2VsbHNbaW5kZXhdLnRpdGxlID0gJyc7XHJcbiAgfVxyXG5cclxuICBzaG93RGFtYWdlKGluZGV4LCBkYW1hZ2UpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBjb25zdCBjZWxsID0gdGhpcy5jZWxsc1tpbmRleF07XHJcbiAgICAgIGNvbnN0IGRhbWFnZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICBkYW1hZ2VFbC5jbGFzc05hbWUgPSAnZGFtYWdlJztcclxuICAgICAgZGFtYWdlRWwudGV4dENvbnRlbnQgPSBkYW1hZ2U7XHJcbiAgICAgIGNlbGwuYXBwZW5kQ2hpbGQoZGFtYWdlRWwpO1xyXG5cclxuICAgICAgZGFtYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKCkgPT4ge1xyXG4gICAgICAgIGNlbGwucmVtb3ZlQ2hpbGQoZGFtYWdlRWwpO1xyXG4gICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRDdXJzb3IoY3Vyc29yKSB7XHJcbiAgICB0aGlzLmJvYXJkRWwuc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tCaW5kaW5nKCkge1xyXG4gICAgaWYgKHRoaXMuY29udGFpbmVyID09PSBudWxsKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignR2FtZVBsYXkgbm90IGJpbmQgdG8gRE9NJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVTdGF0ZVNlcnZpY2Uge1xyXG4gIGNvbnN0cnVjdG9yKHN0b3JhZ2UpIHtcclxuICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XHJcbiAgfVxyXG5cclxuICBzYXZlKHN0YXRlKSB7XHJcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSgnc3RhdGUnLCBKU09OLnN0cmluZ2lmeShzdGF0ZSkpO1xyXG4gIH1cclxuXHJcbiAgbG9hZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuc3RvcmFnZS5nZXRJdGVtKCdzdGF0ZScpKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0YXRlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB0aGVtZXMgZnJvbSAnLi90aGVtZXMnO1xyXG5pbXBvcnQgR2FtZVN0YXRlIGZyb20gJy4vR2FtZVN0YXRlJztcclxuaW1wb3J0IGN1cnNvcnMgZnJvbSAnLi9jdXJzb3JzJztcclxuaW1wb3J0IGdldFRyYW5zaXRpb25BdHRhY2tDZWxscyBmcm9tICcuL3RyYW5zaXRpb25BdHRhY2tDZWxscyc7XHJcbmltcG9ydCBjcmVhdGVQb3NpdGlvbnNDaGFyLCB7XHJcbiAgY2hvb3NlUmFuZFBvc2l0aW9ucyxcclxuICByZXN0b3JlQ2hhcixcclxufSBmcm9tICcuL2NyZWF0ZVBvc2l0aW9ucyc7XHJcbmltcG9ydCB7XHJcbiAgY2FsY3VsYXRlRGFtYWdlLFxyXG4gIGdldEluZm8sXHJcbiAgZ2V0UmFuZG9tQ2hhcmFjdGVyLFxyXG4gIG92ZXJ3cml0ZVByb3BlcnRpZXMsXHJcbiAgcmVzdG9yZUNoYXJhY3RlcnMsXHJcbn0gZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCBCb3dtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL0Jvd21hbic7XHJcbmltcG9ydCBTd29yZHNtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL1N3b3Jkc21hbic7XHJcbmltcG9ydCBNYWdpY2lhbiBmcm9tICcuL2NoYXJhY3RlcnMvTWFnaWNpYW4nO1xyXG5pbXBvcnQgVmFtcGlyZSBmcm9tICcuL2NoYXJhY3RlcnMvVmFtcGlyZSc7XHJcbmltcG9ydCBEYWVtb24gZnJvbSAnLi9jaGFyYWN0ZXJzL0RhZW1vbic7XHJcbmltcG9ydCBVbmRlYWQgZnJvbSAnLi9jaGFyYWN0ZXJzL1VuZGVhZCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29udHJvbGxlciB7XHJcbiAgY29uc3RydWN0b3IoZ2FtZVBsYXksIHN0YXRlU2VydmljZSkge1xyXG4gICAgdGhpcy5nYW1lUGxheSA9IGdhbWVQbGF5O1xyXG4gICAgdGhpcy5zdGF0ZVNlcnZpY2UgPSBzdGF0ZVNlcnZpY2U7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZSA9IG5ldyBHYW1lU3RhdGUodGhpcy5nYW1lUGxheSk7XHJcblxyXG4gICAgdGhpcy5vbkNlbGxDbGljayA9IHRoaXMub25DZWxsQ2xpY2suYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25DZWxsRW50ZXIgPSB0aGlzLm9uQ2VsbEVudGVyLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uQ2VsbExlYXZlID0gdGhpcy5vbkNlbGxMZWF2ZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5uZXdHYW1lID0gdGhpcy5uZXdHYW1lLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNhdmVHYW1lID0gdGhpcy5zYXZlR2FtZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5sb2FkR2FtZSA9IHRoaXMubG9hZEdhbWUuYmluZCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLmV2ZW50cygpO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIC8vIFRPRE86IGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gZ2FtZVBsYXkgZXZlbnRzXHJcbiAgICAvLyBUT0RPOiBsb2FkIHNhdmVkIHN0YXRlZCBmcm9tIHN0YXRlU2VydmljZVxyXG4gICAgdGhpcy5pbml0TmV3VGVhbXMoKTtcclxuICAgIHRoaXMudXBkYXRlUGljdHVyZSgpO1xyXG4gIH1cclxuXHJcbiAgZXZlbnRzKCkge1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGRDZWxsRW50ZXJMaXN0ZW5lcih0aGlzLm9uQ2VsbEVudGVyKTtcclxuICAgIHRoaXMuZ2FtZVBsYXkuYWRkQ2VsbExlYXZlTGlzdGVuZXIodGhpcy5vbkNlbGxMZWF2ZSk7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmFkZENlbGxDbGlja0xpc3RlbmVyKHRoaXMub25DZWxsQ2xpY2spO1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGROZXdHYW1lTGlzdGVuZXIodGhpcy5uZXdHYW1lKTtcclxuICAgIHRoaXMuZ2FtZVBsYXkuYWRkU2F2ZUdhbWVMaXN0ZW5lcih0aGlzLnNhdmVHYW1lKTtcclxuICAgIHRoaXMuZ2FtZVBsYXkuYWRkTG9hZEdhbWVMaXN0ZW5lcih0aGlzLmxvYWRHYW1lKTtcclxuICB9XHJcblxyXG4gIG5ld0dhbWUoKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICBsZXZlbEdhbWU6IDEsXHJcbiAgICAgIGNvdW50Q2xpY2s6IDAsXHJcbiAgICAgIGhpc3Rvcnk6IFtcclxuICAgICAgICAuLi50aGlzLmdhbWVTdGF0ZS5oaXN0b3J5LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGxldmVsR2FtZTogdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxyXG4gICAgICAgICAgcG9pbnRzOiB0aGlzLmdhbWVTdGF0ZS5wb2ludHMsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgaXNNb3ZlOiAndXNlcicsXHJcbiAgICAgIGJsb2NrOiBmYWxzZSxcclxuICAgICAgcG9pbnRzOiAwLFxyXG4gICAgfTtcclxuXHJcbiAgICBvdmVyd3JpdGVQcm9wZXJ0aWVzKHRoaXMuZ2FtZVN0YXRlLCBkYXRhKTtcclxuXHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB0aGlzLmluaXQoKTtcclxuICB9XHJcblxyXG4gIHNhdmVHYW1lKCkge1xyXG4gICAgdGhpcy5zdGF0ZVNlcnZpY2Uuc2F2ZSh0aGlzLmdhbWVTdGF0ZSk7XHJcbiAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UoJ1lvdXIgZ2FtZSBoYXMgc2F2ZWQhJywgJzk5OTcnKTtcclxuICB9XHJcblxyXG4gIGxvYWRHYW1lKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2F2ZWRHYW1lU3RhdGUgPSB0aGlzLnN0YXRlU2VydmljZS5sb2FkKCk7XHJcbiAgICAgIHRoaXMucmVzdG9yZUdhbWVTdGF0ZShzYXZlZEdhbWVTdGF0ZSk7XHJcbiAgICAgIHRoaXMucmVzdG9yZUFjdGl2ZUNoYXJhY3RlcihzYXZlZEdhbWVTdGF0ZS5hY3RpdmVDaGFyKTtcclxuICAgICAgdGhpcy51cGRhdGVQaWN0dXJlKCk7XHJcbiAgICAgIHRoaXMuc2hvd0dhbWVJbmZvKCk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRoaXMuaGFuZGxlTG9hZGluZ0Vycm9yKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXN0b3JlR2FtZVN0YXRlKHNhdmVkU3RhdGUpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbGV2ZWxHYW1lLFxyXG4gICAgICBjb3VudENsaWNrLFxyXG4gICAgICBoaXN0b3J5LFxyXG4gICAgICBpc01vdmUsXHJcbiAgICAgIGJsb2NrLFxyXG4gICAgICBwb2ludHMsXHJcbiAgICAgIGluZGV4U2VsZWN0LFxyXG4gICAgfSA9IHNhdmVkU3RhdGU7XHJcblxyXG4gICAgb3ZlcndyaXRlUHJvcGVydGllcyh0aGlzLmdhbWVTdGF0ZSwge1xyXG4gICAgICBsZXZlbEdhbWU6IGJsb2NrID8gbGV2ZWxHYW1lIC0gMSA6IGxldmVsR2FtZSxcclxuICAgICAgY291bnRDbGljayxcclxuICAgICAgaGlzdG9yeSxcclxuICAgICAgaXNNb3ZlLFxyXG4gICAgICBibG9jayxcclxuICAgICAgcG9pbnRzLFxyXG4gICAgICBpbmRleFNlbGVjdCxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucmVzZXRUZWFtcyhzYXZlZFN0YXRlKTtcclxuICB9XHJcblxyXG4gIHJlc3RvcmVBY3RpdmVDaGFyYWN0ZXIoc2F2ZWRBY3RpdmVDaGFyKSB7XHJcbiAgICBjb25zdCByZXN0YXJ0ZWRBY3RpdmVDaGFyID0gcmVzdG9yZUNoYXIoc2F2ZWRBY3RpdmVDaGFyKTtcclxuICAgIGlmIChyZXN0YXJ0ZWRBY3RpdmVDaGFyICYmIHJlc3RhcnRlZEFjdGl2ZUNoYXIuaXNNb3ZlID09PSAndXNlcicpIHtcclxuICAgICAgdGhpcy5yZWFjdE9uQ2xpY2socmVzdGFydGVkQWN0aXZlQ2hhciwgWydib3dtYW4nLCAnc3dvcmRzbWFuJywgJ21hZ2ljaWFuJ10pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlTG9hZGluZ0Vycm9yKCkge1xyXG4gICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKFwiVGhlcmUncyBubyBnYW1lIGluIG1lbW9yeVwiLCAnMTI4MDc1Jyk7XHJcbiAgICB0aGlzLm5ld0dhbWUoKTtcclxuICB9XHJcblxyXG4gIGluaXROZXdUZWFtcygpIHtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtID0gdGhpcy5nZXRVc2VyVGVhbShbXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSxcclxuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxyXG4gICAgXSk7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbSA9IHRoaXMuZ2V0Q29tcFRlYW0oW1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSxcclxuICAgIF0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlclRlYW0oW21heExldmVsLCBjaGFyQ291bnRdKSB7XHJcbiAgICBjb25zdCB1c2VyVHlwZXMgPSBbQm93bWFuLCBTd29yZHNtYW4sIE1hZ2ljaWFuXTtcclxuICAgIGNvbnN0IHVzZXJUZWFtID0gY3JlYXRlUG9zaXRpb25zQ2hhcihcclxuICAgICAgdXNlclR5cGVzLFxyXG4gICAgICB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSxcclxuICAgICAgZmFsc2UsXHJcbiAgICAgIFttYXhMZXZlbCwgY2hhckNvdW50XSxcclxuICAgICk7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbSA9IHVzZXJUZWFtO1xyXG4gICAgcmV0dXJuIHVzZXJUZWFtO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29tcFRlYW0oW21heExldmVsLCBjaGFyQ291bnRdKSB7XHJcbiAgICBjb25zdCBjb21wVHlwZXMgPSBbVmFtcGlyZSwgRGFlbW9uLCBVbmRlYWRdO1xyXG4gICAgY29uc3QgY29tcFRlYW0gPSBjcmVhdGVQb3NpdGlvbnNDaGFyKFxyXG4gICAgICBjb21wVHlwZXMsXHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplLFxyXG4gICAgICB0cnVlLFxyXG4gICAgICBbbWF4TGV2ZWwsIGNoYXJDb3VudF0sXHJcbiAgICApO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0gPSBjb21wVGVhbTtcclxuICAgIHJldHVybiBjb21wVGVhbTtcclxuICB9XHJcblxyXG4gIHJlc2V0VGVhbXMoZ2FtZVN0YXRlKSB7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbSA9IHJlc3RvcmVDaGFyYWN0ZXJzKFxyXG4gICAgICBnYW1lU3RhdGUudXNlclRlYW0sXHJcbiAgICAgIHJlc3RvcmVDaGFyLFxyXG4gICAgKTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtID0gcmVzdG9yZUNoYXJhY3RlcnMoXHJcbiAgICAgIGdhbWVTdGF0ZS5jb21wVGVhbSxcclxuICAgICAgcmVzdG9yZUNoYXIsXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgbGV2ZWxVcCgpIHtcclxuICAgIHRoaXMudXBkYXRlVGVhbXMoKTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlXHJcbiAgICAgIC5nZXRBbGxQbGF5ZXIoKVxyXG4gICAgICAuZm9yRWFjaCgocGxheWVyKSA9PiBwbGF5ZXIuY2hhcmFjdGVyLmxldmVsVXAoKSk7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaShPYmplY3QudmFsdWVzKHRoZW1lcylbdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lIC0gMV0pO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayA9IDA7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVUZWFtcygpIHtcclxuICAgIGNvbnN0IG5ld1VzZXJUZWFtID0gdGhpcy5nZXRVc2VyVGVhbShbXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEsXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSxcclxuICAgIF0pO1xyXG4gICAgY29uc3QgYWxsU3RhcnRQb3NpdGlvbnMgPSBjaG9vc2VSYW5kUG9zaXRpb25zKHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKTtcclxuICAgIG5ld1VzZXJUZWFtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgYWxsU3RhcnRQb3NpdGlvbnMuc3BsaWNlKGFsbFN0YXJ0UG9zaXRpb25zLmluZGV4T2YoaXRlbS5wb3NpdGlvbiksIDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5nYW1lU3RhdGUuc3Vydml2b3JzLmZvckVhY2goKHN1cnZpdm9yKSA9PiB7XHJcbiAgICAgIGlmICghYWxsU3RhcnRQb3NpdGlvbnMuaW5jbHVkZXMoc3Vydml2b3IucG9zaXRpb24pKSB7XHJcbiAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBhbGxTdGFydFBvc2l0aW9uc1tcclxuICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbFN0YXJ0UG9zaXRpb25zLmxlbmd0aClcclxuICAgICAgICBdO1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxyXG4gICAgICAgIHN1cnZpdm9yLnBvc2l0aW9uID0gbmV3UG9zaXRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtID0gdGhpcy5nYW1lU3RhdGUuc3Vydml2b3JzLmNvbmNhdChuZXdVc2VyVGVhbSk7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbSA9IHRoaXMuZ2V0Q29tcFRlYW0oW1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSArIHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpLmxlbmd0aCxcclxuICAgIF0pO1xyXG4gIH1cclxuXHJcbiAgc2hvd0dhbWVJbmZvKCkge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZ2FtZVN0YXRlLnBvaW50c1xyXG4gICAgICA/IGBZb3VyIGxldmVsICR7dGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lfSBhbmQgcG9pbnRzICR7dGhpcy5nYW1lU3RhdGUucG9pbnRzfWBcclxuICAgICAgOiBcIlRoZXJlJ3Mgbm8gcG9pbnRzLiBcXG4gSXQncyB0aGUgZmlyc3Qgcm91bmRcIjtcclxuICAgIGNvbnN0IGljb25Db2RlID0gdGhpcy5nYW1lU3RhdGUucG9pbnRzID8gJzEyODA3NicgOiAnMTI4MDgzJztcclxuXHJcbiAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UobWVzc2FnZSwgaWNvbkNvZGUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25DZWxsQ2xpY2soaW5kZXgpIHtcclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5ibG9jaykgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHBsYXllciA9IHRoaXMuZ2FtZVN0YXRlXHJcbiAgICAgIC5nZXRBbGxQbGF5ZXIoKVxyXG4gICAgICAuZmluZCgoZWwpID0+IGVsLnBvc2l0aW9uID09PSBpbmRleCk7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIpIHtcclxuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVc2VyVHVybihpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZWFjdE9uQ2xpY2socGxheWVyLCBbJ2Jvd21hbicsICdzd29yZHNtYW4nLCAnbWFnaWNpYW4nXSk7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmNvdW50Q2xpY2sgPj0gMSkge1xyXG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZUNvbXB1dGVyVHVybigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgaGFuZGxlVXNlclR1cm4oaW5kZXgpIHtcclxuICAgIGlmICghdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QpIHJldHVybjtcclxuXHJcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4gPT09IGluZGV4KSB7XHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIucG9zaXRpb24gPSBpbmRleDtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayArPSAxO1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnJlZCA9PT0gaW5kZXgpIHtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuaXNNb3ZlID0gJ3VzZXInO1xyXG4gICAgICBjb25zdCByZXNwb25zZURvRGFtYWdlID0gYXdhaXQgdGhpcy5kb0RhbWFnZShpbmRleCk7XHJcbiAgICAgIGlmIChyZXNwb25zZURvRGFtYWdlKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayArPSAxO1xyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmNoZWNrR2FtZVByb2dyZXNzKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNoZWNrR2FtZVByb2dyZXNzKCkge1xyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUgKz0gMTtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUucG9pbnRzICs9IHRoaXMuZ2FtZVN0YXRlLmNhbGN1bGF0ZVN1bVBvaW50cygpO1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcblxyXG4gICAgICAvLyBVbmNvbW1lbnQgdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBoYW5kbGUgZ2FtZSBlbmRpbmdcclxuICAgICAgLy8gYXdhaXQgdGhpcy5jaGVja0dhbWVPdmVyKCk7XHJcblxyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5zdXJ2aXZvcnMgPSB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbTtcclxuICAgICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKFxyXG4gICAgICAgIGBMZXZlbCB1cCEgWW91ciBsZXZlbCAke3RoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZX0gYW5kIHRvdGFsIHBvaW50cyBhcmUgJHt0aGlzLmdhbWVTdGF0ZS5wb2ludHN9YCxcclxuICAgICAgICAnOTk5NicsXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMubGV2ZWxVcCgpO1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBVbmNvbW1lbnQgdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBoYW5kbGUgZ2FtZSBlbmRpbmdcclxuICAvLyBhc3luYyBjaGVja0dhbWVPdmVyKCkge1xyXG4gIC8vICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSA+PSA1KSB7XHJcbiAgLy8gICAgIHRoaXMuZ2FtZVN0YXRlLnBvaW50ID0gdGhpcy5nYW1lU3RhdGUuY2FsY3VsYXRlU3VtUG9pbnRzKCk7XHJcbiAgLy8gICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2NrID0gdHJ1ZTtcclxuICAvLyAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5nYW1lU3RhdGUuYWxsUGxheWVyKTtcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxyXG4gIC8vICAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UoYFlvdSB3aW4hIFlvdXIgcG9pbnRzIGFyZSAke3RoaXMuZ2FtZVN0YXRlLnBvaW50fWAsICcxMjc4ODEnKTtcclxuICAvLyAgICAgcmV0dXJuO1xyXG4gIC8vICAgfVxyXG4gIC8vIH1cclxuXHJcbiAgYXN5bmMgaGFuZGxlQ29tcHV0ZXJUdXJuKCkge1xyXG4gICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhclVzZXIgPSB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUuaXNNb3ZlID0gJ2NvbXAnO1xyXG4gICAgY29uc3QgcmVzcG9uc2VEb0F0dGFja0NvbXAgPSBhd2FpdCB0aGlzLmRvQXR0YWNrQ29tcCh0aGlzKTtcclxuICAgIGlmIChyZXNwb25zZURvQXR0YWNrQ29tcCkge1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5jb3VudENsaWNrID0gMDtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuaXNNb3ZlID0gJ3VzZXInO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmZpbmRQcmVzdW1lZERlY2Vhc2VkUGxheWVyKCkpIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyID0gdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhclVzZXI7XHJcbiAgICAgICAgdGhpcy5yZWFjdE9uQ2xpY2sodGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhciwgW1xyXG4gICAgICAgICAgJ2Jvd21hbicsXHJcbiAgICAgICAgICAnc3dvcmRzbWFuJyxcclxuICAgICAgICAgICdtYWdpY2lhbicsXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5nYW1lU3RhdGUuZ2V0QWxsUGxheWVyKCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNlbGxFbnRlcihpbmRleCkge1xyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmJsb2NrKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nYW1lU3RhdGUuZ2V0UGxheWVyKGluZGV4KTtcclxuICAgIGlmIChwbGF5ZXIpIHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5zaG93Q2VsbFRvb2x0aXAoZ2V0SW5mbyhwbGF5ZXIuY2hhcmFjdGVyKSwgaW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhcikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGlzVHJhbnNpdGlvbkNlbGwgPSB0aGlzLmdhbWVTdGF0ZS50cmFuc2l0aW9uQ2VsbHMuaW5jbHVkZXMoaW5kZXgpO1xyXG4gICAgY29uc3QgaXNBdHRhY2tDZWxsID0gdGhpcy5nYW1lU3RhdGUuYXR0YWNrQ2VsbHMuaW5jbHVkZXMoaW5kZXgpO1xyXG4gICAgY29uc3QgaXNVc2VyQ2VsbCA9IHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtLnNvbWUoXHJcbiAgICAgIChpdGVtKSA9PiBpdGVtLnBvc2l0aW9uID09PSBpbmRleCxcclxuICAgICk7XHJcbiAgICBjb25zdCBpc0NvbXBDZWxsID0gdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0uc29tZShcclxuICAgICAgKGl0ZW0pID0+IGl0ZW0ucG9zaXRpb24gPT09IGluZGV4LFxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLnBvaW50ZXIpO1xyXG5cclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCkge1xyXG4gICAgICBpZiAoaXNUcmFuc2l0aW9uQ2VsbCAmJiAhaXNVc2VyQ2VsbCAmJiAhaXNDb21wQ2VsbCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LmdyZWVuID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4LCAnZ3JlZW4nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGlzQXR0YWNrQ2VsbCAmJiBpc0NvbXBDZWxsKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QucmVkID0gaW5kZXg7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKGluZGV4LCAncmVkJyk7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5jcm9zc2hhaXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkNlbGxMZWF2ZShpbmRleCkge1xyXG4gICAgdGhpcy5nYW1lUGxheS5oaWRlQ2VsbFRvb2x0aXAoaW5kZXgpO1xyXG5cclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5ibG9jaykgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGhhc1NlbGVjdGVkR3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtZ3JlZW4nKTtcclxuICAgIGNvbnN0IGlzQXR0YWNrQ2VsbCA9IHRoaXMuZ2FtZVN0YXRlLmF0dGFja0NlbGxzPy5pbmNsdWRlcyhpbmRleCk7XHJcbiAgICBjb25zdCBpc0NvbXBUZWFtUG9zaXRpb24gPSB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbS5zb21lKFxyXG4gICAgICAoaXRlbSkgPT4gaXRlbS5wb3NpdGlvbiA9PT0gaW5kZXgsXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChoYXNTZWxlY3RlZEdyZWVuKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LmdyZWVuKTtcclxuXHJcbiAgICAgIGlmICghaXNBdHRhY2tDZWxsICYmIGlzQ29tcFRlYW1Qb3NpdGlvbikge1xyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LmdyZWVuKTtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLm5vdGFsbG93ZWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1yZWQnKSkge1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LmRlc2VsZWN0Q2VsbCh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC5yZWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVhY3RPbkNsaWNrKHBsYXllciwgYXJyYXlUeXBlcykge1xyXG4gICAgaWYgKCFwbGF5ZXIpIHJldHVybjtcclxuXHJcbiAgICBpZiAoYXJyYXlUeXBlcy5pbmNsdWRlcyhwbGF5ZXIuY2hhcmFjdGVyLnR5cGUpKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRDZWxsKHBsYXllci5wb3NpdGlvbik7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2VsZWN0Q2VsbChwbGF5ZXIucG9zaXRpb24pO1xyXG5cclxuICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhciA9IHBsYXllcjtcclxuICAgICAgY29uc3QgeyBtYXhSYW5nZSwgbWF4QXR0YWNrIH0gPSBwbGF5ZXIuY2hhcmFjdGVyO1xyXG5cclxuICAgICAgdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzID0gZ2V0VHJhbnNpdGlvbkF0dGFja0NlbGxzKFxyXG4gICAgICAgIHBsYXllci5wb3NpdGlvbixcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSxcclxuICAgICAgICBtYXhSYW5nZSxcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuYXR0YWNrQ2VsbHMgPSBnZXRUcmFuc2l0aW9uQXR0YWNrQ2VsbHMoXHJcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uLFxyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplLFxyXG4gICAgICAgIG1heEF0dGFjayxcclxuICAgICAgICB0cnVlLFxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5oYW5kbGVJbnZhbGlkU2VsZWN0aW9uKHBsYXllci5wb3NpdGlvbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVTZWxlY3RlZENlbGwobnVtKSB7XHJcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXllbGxvdycpKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnllbGxvdyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCA9IHsgeWVsbG93OiBudW0gfTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUludmFsaWRTZWxlY3Rpb24obnVtKSB7XHJcbiAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3Q7XHJcbiAgICBjb25zdCBpc05vdEluQXR0YWNrQ2VsbHMgPSAhdGhpcy5nYW1lU3RhdGUuYXR0YWNrQ2VsbHMuaW5jbHVkZXMobnVtKTtcclxuICAgIGNvbnN0IGlzQ29tcHV0ZXJUZWFtUG9zaXRpb24gPSB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbS5zb21lKChpdGVtKSA9PiBpdGVtLnBvc2l0aW9uID09PSBudW0pO1xyXG5cclxuICAgIGlmIChpc1NlbGVjdGVkICYmIGlzTm90SW5BdHRhY2tDZWxscyAmJiBpc0NvbXB1dGVyVGVhbVBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShcIkl0IGNhbid0IGJlIGRvbmVcIiwgJzk5NDAnKTtcclxuICAgIH0gZWxzZSBpZiAoIXRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIpIHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKCdUaGlzIGlzbmB0IHlvdXIgY2hhcmFjdGVyJywgJzk5OTUnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGRvRGFtYWdlKGluZGV4KSB7XHJcbiAgICBjb25zdCB7IGF0dGFjayB9ID0gdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhci5jaGFyYWN0ZXI7XHJcbiAgICBjb25zdCBvcHBvbmVudCA9IHRoaXMuZ2FtZVN0YXRlLmdldFBsYXllcihpbmRleCk7XHJcbiAgICBjb25zdCB7IGRlZmVuY2UsIGhlYWx0aCB9ID0gb3Bwb25lbnQuY2hhcmFjdGVyO1xyXG5cclxuICAgIGNvbnN0IGRhbWFnZSA9IGNhbGN1bGF0ZURhbWFnZShhdHRhY2ssIGRlZmVuY2UpO1xyXG4gICAgY29uc3QgcmVzcG9uc2VTaG93RGFtYWdlID0gYXdhaXQgdGhpcy5nYW1lUGxheS5zaG93RGFtYWdlKGluZGV4LCBkYW1hZ2UpO1xyXG5cclxuICAgIGlmIChyZXNwb25zZVNob3dEYW1hZ2UpIHtcclxuICAgICAgb3Bwb25lbnQuY2hhcmFjdGVyLmhlYWx0aCA9IGhlYWx0aCAtIGRhbWFnZTtcclxuICAgICAgdGhpcy5jaGVja0hlYWx0aFJlbW92ZURlYWQob3Bwb25lbnQpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjaGVja0hlYWx0aFJlbW92ZURlYWQocGxheWVyKSB7XHJcbiAgICBpZiAocGxheWVyLmNoYXJhY3Rlci5oZWFsdGggPD0gMCkge1xyXG4gICAgICBjb25zdCBpbmZvID0gdGhpcy5nYW1lU3RhdGUuZ2V0UHJlc3VtZWREZWNlYXNlZFBsYXllckluZm8ocGxheWVyLnBvc2l0aW9uKTtcclxuXHJcbiAgICAgIGlmIChpbmZvLmluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlW2luZm8udGVhbUtleV0uc3BsaWNlKGluZm8uaW5kZXgsIDEpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0ID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXQoKSB7XHJcbiAgICBpZiAoIXRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0KSByZXR1cm47XHJcblxyXG4gICAgT2JqZWN0LmtleXModGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QpLmZvckVhY2goKGNvbG9yKSA9PiB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0W2NvbG9yXSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0ID0gbnVsbDtcclxuICAgIHRoaXMuZ2FtZVBsYXkuc2V0Q3Vyc29yKGN1cnNvcnMuYXV0byk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQaWN0dXJlKCkge1xyXG4gICAgY29uc3QgbGV2ZWwgPSB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUgPiAwID8gdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lIC0gMSA6IDA7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmRyYXdVaShPYmplY3QudmFsdWVzKHRoZW1lcylbbGV2ZWxdKTtcclxuICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcclxuXHJcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgJiYgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QueWVsbG93KSB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2VsZWN0Q2VsbCh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC55ZWxsb3cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZG9BdHRhY2tDb21wKCkge1xyXG4gICAgY29uc3QgYWN0aXZlQ29tcCA9IGdldFJhbmRvbUNoYXJhY3Rlcih0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbSk7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyID0gYWN0aXZlQ29tcDtcclxuICAgIHRoaXMucmVhY3RPbkNsaWNrKGFjdGl2ZUNvbXAsIFsnZGFlbW9uJywgJ3VuZGVhZCcsICd2YW1waXJlJ10pO1xyXG5cclxuICAgIGNvbnN0IHVzZXJQb3NpdGlvbiA9IHRoaXMuZ2FtZVN0YXRlLmdldFVzZXJQb3NpdGlvbigpO1xyXG5cclxuICAgIGlmICh1c2VyUG9zaXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBjb25zdCByZXNwb25zZURvRGFtYWdlID0gYXdhaXQgdGhpcy5kb0RhbWFnZSh1c2VyUG9zaXRpb24pO1xyXG4gICAgICBpZiAocmVzcG9uc2VEb0RhbWFnZSkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tBbmRFbmRHYW1lSWZOZWNlc3NhcnkoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVBpY3R1cmUoKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhci5wb3NpdGlvbiA9IHRoaXMubW92ZVRvUmFuZG9tUG9zaXRpb24oKTtcclxuICAgICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5nYW1lU3RhdGUuZ2V0QWxsUGxheWVyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIgPSBudWxsO1xyXG4gICAgdGhpcy5yZXNldCgpO1xyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgY2hlY2tBbmRFbmRHYW1lSWZOZWNlc3NhcnkoKSB7XHJcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUudXNlclRlYW0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmJsb2NrID0gdHJ1ZTtcclxuXHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZSgnWW91IGxvc2UhJywgJzEyOTMzNScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbW92ZVRvUmFuZG9tUG9zaXRpb24oKSB7XHJcbiAgICBsZXQgcmFuZDtcclxuICAgIGxldCBpc1BsYXllcjtcclxuICAgIGRvIHtcclxuICAgICAgcmFuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxscy5sZW5ndGgpO1xyXG4gICAgICBjb25zdCBwb3RlbnRpYWxQb3NpdGlvbiA9IHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxsc1tyYW5kXTtcclxuICAgICAgaXNQbGF5ZXIgPSB0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKS5zb21lKChvKSA9PiBvLnBvc2l0aW9uID09PSBwb3RlbnRpYWxQb3NpdGlvbik7XHJcbiAgICB9IHdoaWxlIChpc1BsYXllcik7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxsc1tyYW5kXTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk1vZGFsUG9wdXAiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ0aGlzIiwiZWxlbU1vZGFsIiwiZXZlbnRTaG93TW9kYWwiLCJldmVudEhpZGVNb2RhbCIsImhpZGluZyIsImRlc3Ryb3llZCIsImFuaW1hdGlvblNwZWVkIiwiY3JlYXRlTW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlckNsb3NlTW9kYWwiLCJiaW5kIiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJtb2RhbEhUTUwiLCJtb2RhbEZvb3RlckhUTUwiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZXBsYWNlIiwidGl0bGUiLCJjb250ZW50IiwiZm9vdGVyQnV0dG9ucyIsImJ1dHRvbiIsIm1vZGFsRm9vdGVyQnV0dG9uIiwiY2xhc3MiLCJoYW5kbGVyIiwidGV4dCIsImlubmVySFRNTCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInNob3ciLCJkaXNwYXRjaEV2ZW50IiwiaGlkZSIsInJlbW92ZSIsInNldFRpbWVvdXQiLCJlIiwidGFyZ2V0IiwiZGF0YXNldCIsImRpc21pc3MiLCJkZXN0cm95IiwicGFyZW50RWxlbWVudCIsInJlbW92ZUNoaWxkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldENvbnRlbnQiLCJodG1sIiwicXVlcnlTZWxlY3RvciIsInNldFRpdGxlIiwiY2FsY1RpbGVUeXBlIiwiaW5kZXgiLCJib2FyZFNpemUiLCJpIiwicmVzdG9yZUNoYXJhY3RlcnMiLCJjaGFyYWN0ZXJzIiwicmVzdG9yZUZuIiwibWFwIiwidXBBdHRhY2tEZWZlbmNlIiwiYmVmb3JlIiwibGlmZSIsIk1hdGgiLCJmbG9vciIsIm1heCIsIm92ZXJ3cml0ZVByb3BlcnRpZXMiLCJzb3VyY2UiLCJPYmplY3QiLCJhc3NpZ24iLCJwcmFpcmllIiwiZGVzZXJ0IiwiYXJjdGljIiwibW91bnRhaW4iLCJHYW1lU3RhdGUiLCJnYW1lUGxheSIsImxldmVsR2FtZSIsImlzTW92ZSIsImNvdW50Q2xpY2siLCJzdXJ2aXZvcnMiLCJoaXN0b3J5IiwicG9pbnRzIiwiYmxvY2siLCJ1c2VyVGVhbSIsImNvbXBUZWFtIiwiYWN0aXZlQ2hhciIsImluZGV4U2VsZWN0IiwidHJhbnNpdGlvbkNlbGxzIiwiYXR0YWNrQ2VsbHMiLCJzaG93TW9kYWwiLCJnZXRBbGxQbGF5ZXIiLCJFcnJvciIsImNhbGN1bGF0ZVN1bVBvaW50cyIsInJlZHVjZSIsImEiLCJiIiwiY2hhcmFjdGVyIiwiaGVhbHRoIiwiZ2V0VXNlclBvc2l0aW9uIiwiZm91bmRJdGVtIiwiZmluZCIsIml0ZW0iLCJpbmNsdWRlcyIsInBvc2l0aW9uIiwidW5kZWZpbmVkIiwiZmluZFByZXN1bWVkRGVjZWFzZWRQbGF5ZXIiLCJhY3RpdmVDaGFyVXNlciIsImdldFByZXN1bWVkRGVjZWFzZWRQbGF5ZXJJbmZvIiwiZmluZEluZGV4IiwidGVhbUtleSIsImdldFBsYXllciIsImVsIiwiZ2V0VHJhbnNpdGlvbkF0dGFja0NlbGxzIiwibWF4UmFuZ2UiLCJhdHRhY2siLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcnJheUNlbGxzIiwicHVzaCIsInRhYmxlQ2VsbHMiLCJjZWxscyIsInJlc3VsdCIsInMiLCJzbGljZSIsImdldFRhYmxlIiwiYWxsb3dlZENlbGxzIiwicm93IiwiaiIsImdldEF0dGFja0NlbGxzIiwidHJhbnNpdENlbGxzIiwiZ2V0VHJhbnNpdGlvbkNlbGxzIiwiVGVhbSIsIkNoYXJhY3RlciIsImxldmVsIiwidHlwZSIsIm5hbWUiLCJkZWZlbmNlIiwibGV2ZWxVcCIsIm1pbiIsIlBvc2l0aW9uZWRDaGFyYWN0ZXIiLCJ2YWx1ZSIsIl9jaGFyYWN0ZXIiLCJfcG9zaXRpb24iLCJCb3dtYW4iLCJzdXBlciIsIm1heEF0dGFjayIsIlN3b3Jkc21hbiIsIk1hZ2ljaWFuIiwiRGFlbW9uIiwiVW5kZWFkIiwiVmFtcGlyZSIsImNob29zZVJhbmRQb3NpdGlvbnMiLCJjaG9vc2VSYW5kUG9zaXRpb24iLCJyYW5kb20iLCJjcmVhdGVQb3NpdGlvbnNDaGFyIiwicGxheWVyVHlwZXMiLCJvcHBvbmVudCIsIl9yZWYiLCJtYXhMZXZlbCIsImNoYXJDb3VudCIsInBvc2l0aW9ucyIsInRlYW0iLCJhbGxvd2VkVHlwZXMiLCJjaGFyYWN0ZXJDb3VudCIsInBsYXllckdlbmVyYXRvciIsInJhbmRvbUxldmVsIiwiUmFuZG9tQ2xhc3MiLCJjaGFyYWN0ZXJHZW5lcmF0b3IiLCJuZXh0IiwiZ2VuZXJhdGVUZWFtIiwicmFuZFBvc2l0aW9ucyIsImZvckVhY2giLCJjaGFyIiwicmFuZFBvc2l0aW9uIiwiaXNQb3NpdGlvblVuaXF1ZSIsInJlc3RvcmVDaGFyIiwib2JqIiwiYm93bWFuIiwic3dvcmRzbWFuIiwibWFnaWNpYW4iLCJkYWVtb24iLCJ1bmRlYWQiLCJ2YW1waXJlIiwicmVzdG9yZVBvc2l0aW9uZWRDaGFyIiwiY29udGFpbmVyIiwiYm9hcmRFbCIsImNlbGxDbGlja0xpc3RlbmVycyIsImNlbGxFbnRlckxpc3RlbmVycyIsImNlbGxMZWF2ZUxpc3RlbmVycyIsIm5ld0dhbWVMaXN0ZW5lcnMiLCJzYXZlR2FtZUxpc3RlbmVycyIsImxvYWRHYW1lTGlzdGVuZXJzIiwiaXNNb2RhbCIsImluaXRNb2RhbExpc3RlbmVyIiwiYmluZFRvRE9NIiwiSFRNTEVsZW1lbnQiLCJjdXJyZW50TW9kYWwiLCJkcmF3VWkiLCJ0aGVtZSIsImNoZWNrQmluZGluZyIsIm5ld0dhbWVFbCIsInNhdmVHYW1lRWwiLCJsb2FkR2FtZUVsIiwiZXZlbnQiLCJvbk5ld0dhbWVDbGljayIsIm9uU2F2ZUdhbWVDbGljayIsIm9uTG9hZEdhbWVDbGljayIsImNlbGxFbCIsIm9uQ2VsbEVudGVyIiwib25DZWxsTGVhdmUiLCJvbkNlbGxDbGljayIsIkFycmF5IiwiZnJvbSIsImNoaWxkcmVuIiwicmVkcmF3UG9zaXRpb25zIiwiY2VsbCIsImNoYXJFbCIsImhlYWx0aEVsIiwiaGVhbHRoSW5kaWNhdG9yRWwiLCJzdHlsZSIsIndpZHRoIiwibWVzc2FnZSIsInVuaWNvZGUiLCJtb2RhbCIsImFkZENlbGxFbnRlckxpc3RlbmVyIiwiY2FsbGJhY2siLCJhZGRDZWxsTGVhdmVMaXN0ZW5lciIsImFkZENlbGxDbGlja0xpc3RlbmVyIiwiYWRkTmV3R2FtZUxpc3RlbmVyIiwiYWRkU2F2ZUdhbWVMaXN0ZW5lciIsImFkZExvYWRHYW1lTGlzdGVuZXIiLCJpbmRleE9mIiwiY3VycmVudFRhcmdldCIsIm8iLCJjYWxsIiwic2hvd01vZGFsTWVzc2FnZSIsInNlbGVjdENlbGwiLCJjb2xvciIsImRlc2VsZWN0Q2VsbCIsImZpbHRlciIsInN0YXJ0c1dpdGgiLCJzaG93Q2VsbFRvb2x0aXAiLCJoaWRlQ2VsbFRvb2x0aXAiLCJzaG93RGFtYWdlIiwiZGFtYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYW1hZ2VFbCIsImNsYXNzTmFtZSIsInRleHRDb250ZW50Iiwic2V0Q3Vyc29yIiwiY3Vyc29yIiwic3RhdGVTZXJ2aWNlIiwic3RvcmFnZSIsInNhdmUiLCJzdGF0ZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwibG9hZCIsInBhcnNlIiwiZ2V0SXRlbSIsImxvY2FsU3RvcmFnZSIsImdhbWVDdHJsIiwiZ2FtZVN0YXRlIiwibmV3R2FtZSIsInNhdmVHYW1lIiwibG9hZEdhbWUiLCJldmVudHMiLCJpbml0IiwiaW5pdE5ld1RlYW1zIiwidXBkYXRlUGljdHVyZSIsImRhdGEiLCJyZXNldCIsInNhdmVkR2FtZVN0YXRlIiwicmVzdG9yZUdhbWVTdGF0ZSIsInJlc3RvcmVBY3RpdmVDaGFyYWN0ZXIiLCJzaG93R2FtZUluZm8iLCJoYW5kbGVMb2FkaW5nRXJyb3IiLCJzYXZlZFN0YXRlIiwicmVzZXRUZWFtcyIsInNhdmVkQWN0aXZlQ2hhciIsInJlc3RhcnRlZEFjdGl2ZUNoYXIiLCJyZWFjdE9uQ2xpY2siLCJnZXRVc2VyVGVhbSIsImdldENvbXBUZWFtIiwiX3JlZjIiLCJ1cGRhdGVUZWFtcyIsInBsYXllciIsInZhbHVlcyIsInRoZW1lcyIsIm5ld1VzZXJUZWFtIiwiYWxsU3RhcnRQb3NpdGlvbnMiLCJzcGxpY2UiLCJzdXJ2aXZvciIsIm5ld1Bvc2l0aW9uIiwiY29uY2F0IiwiaWNvbkNvZGUiLCJhc3luYyIsImhhbmRsZVVzZXJUdXJuIiwiaGFuZGxlQ29tcHV0ZXJUdXJuIiwiZ3JlZW4iLCJyZWQiLCJkb0RhbWFnZSIsImNoZWNrR2FtZVByb2dyZXNzIiwiZG9BdHRhY2tDb21wIiwiZ2V0SW5mbyIsImlzVHJhbnNpdGlvbkNlbGwiLCJpc0F0dGFja0NlbGwiLCJpc1VzZXJDZWxsIiwic29tZSIsImlzQ29tcENlbGwiLCJjdXJzb3JzIiwiaGFzU2VsZWN0ZWRHcmVlbiIsImlzQ29tcFRlYW1Qb3NpdGlvbiIsImFycmF5VHlwZXMiLCJ1cGRhdGVTZWxlY3RlZENlbGwiLCJoYW5kbGVJbnZhbGlkU2VsZWN0aW9uIiwibnVtIiwieWVsbG93IiwiaXNTZWxlY3RlZCIsImlzTm90SW5BdHRhY2tDZWxscyIsImlzQ29tcHV0ZXJUZWFtUG9zaXRpb24iLCJyb3VuZCIsImNhbGN1bGF0ZURhbWFnZSIsImNoZWNrSGVhbHRoUmVtb3ZlRGVhZCIsImluZm8iLCJrZXlzIiwiYWN0aXZlQ29tcCIsInVzZXJQb3NpdGlvbiIsImNoZWNrQW5kRW5kR2FtZUlmTmVjZXNzYXJ5IiwibW92ZVRvUmFuZG9tUG9zaXRpb24iLCJyYW5kIiwiaXNQbGF5ZXIiLCJwb3RlbnRpYWxQb3NpdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=