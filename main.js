(()=>{"use strict";class e{constructor(e){this.elemModal=null,this.eventShowModal=null,this.eventHideModal=null,this.hiding=!1,this.destroyed=!1,this.animationSpeed=200,this.options=e||{},this.createModal(),this.elemModal.addEventListener("click",this.handlerCloseModal.bind(this)),this.eventShowModal=new CustomEvent("show.modalFunc",{detail:this.elemModal}),this.eventHideModal=new CustomEvent("hide.modalFunc",{detail:this.elemModal})}createModal(){this.elemModal=document.createElement("div");let e,t="";if(this.elemModal.classList.add("modalFunc"),e='<div class="modal__backdrop" data-dismiss="modalFunc"><div class="modal__content"><div class="modal__header"><div class="modal__title" data-modalFunc="title">{{title}}</div><span class="modal__btn-close" data-dismiss="modalFunc" title="Закрыть">×</span></div><div class="modal__body" data-modalFunc="content">{{content}}</div>{{footer}}</div></div>'.replace("{{title}}",this.options.title||"Новое окно"),e=e.replace("{{content}}",this.options.content||""),this.options.footerButtons){for(const e of this.options.footerButtons){let a='<button type="button" class="{{button_class}}" data-handler={{button_handler}}>{{button_text}}</button>'.replace("{{button_class}}",e.class);a=a.replace("{{button_handler}}",e.handler),a=a.replace("{{button_text}}",e.text),t+=a}t='<div class="modal__footer">{{buttons}}</div>'.replace("{{buttons}}",t)}e=e.replace("{{footer}}",t),this.elemModal.innerHTML=e,document.body.appendChild(this.elemModal)}show(){this.destroyed||this.hiding||(this.elemModal.classList.add("modal__show"),document.dispatchEvent(this.eventShowModal))}hide(){this.hiding=!0,this.elemModal.classList.remove("modal__show"),this.elemModal.classList.add("modal__hiding"),setTimeout((()=>{this.elemModal.classList.remove("modal__hiding"),this.hiding=!1}),this.animationSpeed),document.dispatchEvent(this.eventHideModal)}handlerCloseModal(e){("modalFunc"===e.target.dataset.dismiss||e.target.dataset.handler)&&this.hide()}destroy(){this.elemModal.parentElement&&this.elemModal.parentElement.removeChild(this.elemModal),this.elemModal.removeEventListener("click",this.handlerCloseModal.bind(this))}setContent(e){this.elemModal.querySelector('[data-modalFunc="content"]').innerHTML=e}setTitle(e){this.elemModal.querySelector('[data-modalFunc="title"]').innerHTML=e}}function t(e,t){if(e<t-1&&e>0)return"top";if(e<t**2-1&&e>t**2-t)return"bottom";for(let a=1;a<t-1;a+=1){if(e===t*a)return"left";if(e===t*a+(t-1))return"right"}switch(e){case 0:return"top-left";case t-1:return"top-right";case t*(t-1):return"bottom-left";case t**2-1:return"bottom-right";default:return"center"}}function a(e,t){return e.map(t)}function s(e,t){return Math.floor(Math.max(e,e*(80+t)/100))}function i(e,t){return Object.assign(e,t),e}const l={prairie:"prairie",desert:"desert",arctic:"arctic",mountain:"mountain"};class n{constructor(e){this.levelGame=1,this.gamePlay=e,this.isMove="user",this.countClick=0,this.userTeamSurvivors=[],this.history=[],this.points=0,this.block=!1,this.userTeam=[],this.compTeam=[],this.activeChar=null,this.indexSelect=null,this.transitionCells=[],this.attackCells=[],this.showModal=!1}getAllPlayer(){if(!this.userTeam||!this.compTeam)throw new Error("it must have 2 arguments");return[...this.userTeam,...this.compTeam]}calculateSumPoints(){return this.userTeam.reduce(((e,t)=>e+t.character.health),0)}getUserPosition(){const e=this.userTeam.find((e=>this.attackCells.includes(e.position)));return e?e.position:void 0}findPresumedDeceasedPlayer(){return this.getAllPlayer().find((e=>e.position===this.activeCharUser?.position))}getPresumedDeceasedPlayerInfo(e){return{index:("comp"===this.isMove?this.userTeam:this.compTeam).findIndex((t=>e===t.position)),teamKey:"comp"===this.isMove?"userTeam":"compTeam"}}getPlayer(e){return this.getAllPlayer().find((t=>t.position===e))}}const o="auto",h="pointer",r="crosshair",c="not-allowed";function d(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=[];for(let e=0;e<t**2;e+=1)i.push(e);const l=function(e,t){const a=[];for(let s=0,i=t;s<e.length;s+=t,i+=t)a.push(e.slice(s,i));return a}(i,t);return s?function(e,t,a){const s=[];let i,l;for(let a=0;a<e.length&&(l=a,i=e[a].findIndex((e=>e===t)),-1===i);a+=1);for(let n=-a;n<=a;n+=1)for(let o=-a;o<=a;o+=1)l+n>=0&&i+o>=0&&l+n<e.length&&i+o<e.length&&e[l+n][i+o]!==t&&s.push(e[l+n][i+o]);return s}(l,e,a):function(e,t,a){const s=[];let i,l;for(let a=0;a<e.length&&(l=a,i=e[a].findIndex((e=>e===t)),-1===i);a+=1);for(let t=1;t<=a;t+=1)i-t>=0&&s.push(e[l][i-t]),i+t<e.length&&s.push(e[l][i+t]),l+t<e.length&&i-t>=0&&s.push(e[l+t][i-t]),l+t<e.length&&i+t<e.length&&s.push(e[l+t][i+t]),l-t>=0&&i-t>=0&&s.push(e[l-t][i-t]),l-t>=0&&i+t<e.length&&s.push(e[l-t][i+t]),l-t>=0&&s.push(e[l-t][i]),l+t<e.length&&s.push(e[l+t][i]);return s}(l,e,a)}class m{constructor(e){this.characters=e}}class u{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic";if("Character"===new.target.name)throw new Error("Invalid class");this.type=t,this.level=e,this.attack=0,this.defence=0,this.health=50}levelUp(){if(this.health<=0)throw new Error("Can't level up a dead character");this.level=Math.min(this.level+1,4),this.attack=s(this.attack,this.health),this.defence=s(this.defence,this.health),this.health=Math.min(this.health+80,100)}}class g{constructor(e,t){this.character=e,this.position=t}set character(e){if(!(e instanceof u))throw new Error("character must be instance of Character or its children");this._character=e}get character(){return this._character}set position(e){if("number"!=typeof e)throw new Error("position must be a number");this._position=e}get position(){return this._position}}class S extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="bowman",this.attack=25,this.defence=25,this.maxRange=2,this.maxAttack=2}}class v extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="swordsman",this.attack=40,this.defence=10,this.maxRange=4,this.maxAttack=1}}class p extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="magician",this.attack=10,this.defence=40,this.maxRange=1,this.maxAttack=4}}class C extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="daemon",this.attack=10,this.defence=10,this.maxRange=1,this.maxAttack=4}}class f extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="undead",this.attack=40,this.defence=10,this.maxRange=4,this.maxAttack=1}}class y extends u{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1),this.type="vampire",this.attack=25,this.defence=25,this.maxRange=2,this.maxAttack=2}}function w(e){const t=[];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])for(let a=e-2;a<e**2;a+=e)t.push(a),t.push(a+1);else for(let a=0;a<e**2;a+=8)t.push(a),t.push(a+1);return t}function M(e){const t=w(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return t[Math.floor(Math.random()*t.length)]}function P(e,t,a,s){let[i,l]=s;const n=[];i>=4&&(i=4),l>=10&&(l=10);const o=function(e,t,a){const s=[],i=function*(e,t){for(;;){const a=Math.floor(Math.random()*t+1),s=e[Math.floor(Math.random()*e.length)];yield new s(a)}}(e,t);for(let e=0;e<a;e+=1)s.push(i.next().value);return new m(s)}(e,i,l),h=[];return o.characters.forEach((e=>{let s,i=!1;do{s=M(t,a),h.find((e=>e===s))?s=M(t,a):(h.push(s),i=!0)}while(!i);n.push(new g(e,s))})),n}function k(e){if(!e)return null;const t=new({bowman:S,swordsman:v,magician:p,daemon:C,undead:f,vampire:y}[e._character.type]||null)(e._character.level),a=new g(t,e._position);return t.attack=e._character.attack,t.health=e._character.health,t.defence=e._character.defence,a}const b=new class{constructor(){this.boardSize=8,this.container=null,this.boardEl=null,this.cells=[],this.cellClickListeners=[],this.cellEnterListeners=[],this.cellLeaveListeners=[],this.newGameListeners=[],this.saveGameListeners=[],this.loadGameListeners=[],this.isModal=!1,this.initModalListener()}bindToDOM(e){if(!(e instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=e}initModalListener(){document.addEventListener("click",(e=>{"modalHandlerCancel"===e.target.dataset.handler&&this.currentModal&&(this.currentModal.hide(),this.isModal=!1)}))}drawUi(e){this.checkBinding(),this.container.innerHTML='\n      <div class="controls">\n        <button data-id="action-restart" class="btn">New Game</button>\n        <button data-id="action-save" class="btn">Save Game</button>\n        <button data-id="action-load" class="btn">Load Game</button>\n      </div>\n      <div class="board-container">\n        <div data-id="board" class="board"></div>\n      </div>\n    ',this.newGameEl=this.container.querySelector("[data-id=action-restart]"),this.saveGameEl=this.container.querySelector("[data-id=action-save]"),this.loadGameEl=this.container.querySelector("[data-id=action-load]"),this.newGameEl.addEventListener("click",(e=>this.onNewGameClick(e))),this.saveGameEl.addEventListener("click",(e=>this.onSaveGameClick(e))),this.loadGameEl.addEventListener("click",(e=>this.onLoadGameClick(e))),this.boardEl=this.container.querySelector("[data-id=board]"),this.boardEl.classList.add(e);for(let e=0;e<this.boardSize**2;e+=1){const a=document.createElement("div");a.classList.add("cell","map-tile",`map-tile-${t(e,this.boardSize)}`),a.addEventListener("mouseenter",(e=>this.onCellEnter(e))),a.addEventListener("mouseleave",(e=>this.onCellLeave(e))),a.addEventListener("click",(e=>this.onCellClick(e))),this.boardEl.appendChild(a)}this.cells=Array.from(this.boardEl.children)}redrawPositions(e){for(const e of this.cells)e.innerHTML="";for(const a of e){const e=this.boardEl.children[a.position],s=document.createElement("div");s.classList.add("character",a.character.type);const i=document.createElement("div");i.classList.add("health-level");const l=document.createElement("div");l.classList.add("health-level-indicator","health-level-indicator-"+((t=a.character.health)<15?"critical":t<50?"normal":"high")),l.style.width=`${a.character.health}%`,i.appendChild(l),s.appendChild(i),e.appendChild(s)}var t}showModal(t,a){const s=new e({title:t,content:`&#${a}`,footerButtons:[{class:"btn btn__cancel",text:"Close",handler:"modalHandlerCancel"}]});this.currentModal=s,s.show()}addCellEnterListener(e){this.cellEnterListeners.push(e)}addCellLeaveListener(e){this.cellLeaveListeners.push(e)}addCellClickListener(e){this.cellClickListeners.push(e)}addNewGameListener(e){this.newGameListeners.push(e)}addSaveGameListener(e){this.saveGameListeners.push(e)}addLoadGameListener(e){this.loadGameListeners.push(e)}onCellEnter(e){const t=this.cells.indexOf(e.currentTarget);this.cellEnterListeners.forEach((e=>e.call(null,t)))}onCellLeave(e){const t=this.cells.indexOf(e.currentTarget);this.cellLeaveListeners.forEach((e=>e.call(null,t)))}onCellClick(e){const t=this.cells.indexOf(e.currentTarget);this.cellClickListeners.forEach((e=>e.call(null,t)))}onNewGameClick(){this.newGameListeners.forEach((e=>e.call(null)))}onSaveGameClick(){this.saveGameListeners.forEach((e=>e.call(null)))}onLoadGameClick(){this.loadGameListeners.forEach((e=>e.call(null)))}showModalMessage(e,t){this.isModal||(this.isModal=!0,this.showModal(e,t))}selectCell(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yellow";this.deselectCell(e),this.cells[e].classList.add("selected",`selected-${t}`)}deselectCell(e){const t=this.cells[e];t&&t.classList.remove(...Array.from(t.classList).filter((e=>e.startsWith("selected"))))}showCellTooltip(e,t){this.cells[t].title=e}hideCellTooltip(e){this.cells[e].title=""}showDamage(e,t){return new Promise((a=>{const s=this.cells[e],i=document.createElement("span");i.className="damage",i.textContent=t,s.appendChild(i),i.addEventListener("animationend",(()=>{s.removeChild(i),a(!0)}))}))}setCursor(e){this.boardEl.style.cursor=e}checkBinding(){if(null===this.container)throw new Error("GamePlay not bind to DOM")}};b.bindToDOM(document.querySelector("#game-container"));const L=new class{constructor(e){this.storage=e}save(e){this.storage.setItem("state",JSON.stringify(e))}load(){try{return JSON.parse(this.storage.getItem("state"))}catch(e){throw new Error("Invalid state")}}}(localStorage),T=new class{constructor(e,t){this.gamePlay=e,this.stateService=t,this.gameState=new n(this.gamePlay),this.onCellClick=this.onCellClick.bind(this),this.onCellEnter=this.onCellEnter.bind(this),this.onCellLeave=this.onCellLeave.bind(this),this.newGame=this.newGame.bind(this),this.saveGame=this.saveGame.bind(this),this.loadGame=this.loadGame.bind(this),this.events()}init(){this.initNewTeams(),this.updatePicture()}events(){this.gamePlay.addCellEnterListener(this.onCellEnter),this.gamePlay.addCellLeaveListener(this.onCellLeave),this.gamePlay.addCellClickListener(this.onCellClick),this.gamePlay.addNewGameListener(this.newGame),this.gamePlay.addSaveGameListener(this.saveGame),this.gamePlay.addLoadGameListener(this.loadGame)}newGame(){const e={levelGame:1,countClick:0,history:[...this.gameState.history,{levelGame:this.gameState.levelGame,points:this.gameState.points}],isMove:"user",block:!1,points:0};i(this.gameState,e),this.reset(),this.init()}saveGame(){this.gameState.attackCells=[],this.gameState.transitionCells=[],this.gameState.activeCharUser=null,this.stateService.save(this.gameState),this.gamePlay.showModalMessage("Your game has saved!","9997")}loadGame(){try{const e=this.stateService.load();this.restoreGameState(e),this.restoreActiveCharacter(e.activeChar),this.updatePicture(),this.showGameInfo()}catch(e){this.handleLoadingError()}}restoreGameState(e){const{levelGame:t,countClick:a,history:s,isMove:l,block:n,points:o,indexSelect:h}=e;i(this.gameState,{levelGame:n?t-1:t,countClick:a,history:s,isMove:l,block:n,points:o,indexSelect:h}),this.resetTeams(e)}restoreActiveCharacter(e){const t=k(e);t&&"user"===t.isMove&&this.reactOnClick(t,["bowman","swordsman","magician"])}handleLoadingError(){this.gamePlay.showModalMessage("There's no game in memory","128075"),this.newGame()}initNewTeams(){this.gameState.userTeam=this.getUserTeam([this.gameState.levelGame,this.gameState.levelGame]),this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame,this.gameState.levelGame])}getUserTeam(e){let[t,a]=e;const s=P([S,v,p],this.gamePlay.boardSize,!1,[t,a]);return this.gameState.userTeam=s,s}getCompTeam(e){let[t,a]=e;const s=P([y,C,f],this.gamePlay.boardSize,!0,[t,a]);return this.gameState.compTeam=s,s}resetTeams(e){this.gameState.userTeam=a(e.userTeam,k),this.gameState.compTeam=a(e.compTeam,k)}levelUp(){const e=Object.values(l);this.updateTeams(),this.gameState.getAllPlayer().forEach((e=>e.character.levelUp())),this.gamePlay.drawUi(e[(this.gameState.levelGame-1)%e.length]),this.gameState.countClick=0,this.gameState.indexSelect=null}updateTeams(){const e=this.getUserTeam([this.gameState.levelGame-1,this.gameState.levelGame]),t=w(this.gamePlay.boardSize);e.forEach((e=>{t.splice(t.indexOf(e.position),1)})),this.gameState.userTeamSurvivors.forEach((e=>{if(!t.includes(e.position)){const a=t[Math.floor(Math.random()*t.length)];e.position=a}})),this.gameState.userTeam=this.gameState.userTeamSurvivors.concat(e),this.gameState.userTeamSurvivors=[],this.gameState.compTeam=this.getCompTeam([this.gameState.levelGame-1,this.gameState.userTeam.length])}showGameInfo(){const e=this.gameState.points?`Your level ${this.gameState.levelGame} and points ${this.gameState.points}`:"There's no points. \n It's the first round",t=this.gameState.points?"128076":"128083";this.gamePlay.showModalMessage(e,t)}async onCellClick(e){if(this.gameState.block)return;const t=this.gameState.getAllPlayer().find((t=>t.position===e));this.gameState.activeChar&&await this.handleUserTurn(e),this.reactOnClick(t,["bowman","swordsman","magician"]),this.gameState.countClick>=1&&await this.handleComputerTurn()}async handleUserTurn(e){this.gameState.indexSelect&&(this.gameState.indexSelect.green===e&&(this.gameState.activeChar.position=e,this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.indexSelect.red===e)&&(this.gameState.isMove="user",await this.doDamage(e)&&(this.gameState.countClick+=1,this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),await this.checkGameProgress()))}async checkGameProgress(){0===this.gameState.compTeam.length&&(this.gameState.levelGame+=1,this.gameState.points+=this.gameState.calculateSumPoints(),this.reset(),this.gameState.userTeamSurvivors=this.gameState.userTeam,this.gamePlay.showModalMessage(`Level up! Your level ${this.gameState.levelGame} and total points are ${this.gameState.points}`,"9996"),this.levelUp(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()))}async handleComputerTurn(){this.gameState.activeCharUser=this.gameState.activeChar,this.gameState.isMove="comp",await this.doAttackComp(this)&&(this.gameState.countClick=0,this.gameState.isMove="user",this.gameState.findPresumedDeceasedPlayer()&&(this.gameState.activeChar=this.gameState.activeCharUser,this.reactOnClick(this.gameState.activeChar,["bowman","swordsman","magician"]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())))}onCellEnter(e){if(this.gameState.block)return;const t=this.gameState.getPlayer(e);if(t&&this.gamePlay.showCellTooltip(function(e){return`🎖${e.level} ⚔${e.attack} 🛡${e.defence} ❤${e.health}`}(t.character),e),!this.gameState.activeChar)return;const a=this.gameState.transitionCells.includes(e),s=this.gameState.attackCells.includes(e),i=this.gameState.userTeam.some((t=>t.position===e)),l=this.gameState.compTeam.some((t=>t.position===e));this.gamePlay.setCursor(h),this.gameState.indexSelect&&(!a||i||l||(this.gameState.indexSelect.green=e,this.gamePlay.selectCell(e,"green")),s&&l&&(this.gameState.indexSelect.red=e,this.gamePlay.selectCell(e,"red"),this.gamePlay.setCursor(r)))}onCellLeave(e){if(this.gamePlay.hideCellTooltip(e),this.gameState.block)return;const t=document.querySelector(".selected-green"),a=this.gameState.attackCells?.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),!a&&s&&(this.gamePlay.deselectCell(this.gameState.indexSelect.green),this.gamePlay.setCursor(c))),document.querySelector(".selected-red")&&this.gamePlay.deselectCell(this.gameState.indexSelect.red)}reactOnClick(e,t){if(e)if(t.includes(e.character.type)){this.updateSelectedCell(e.position),this.gamePlay.selectCell(e.position),this.gameState.activeChar=e;const{maxRange:t,maxAttack:a}=e.character;this.gameState.transitionCells=d(e.position,this.gamePlay.boardSize,t),this.gameState.attackCells=d(e.position,this.gamePlay.boardSize,a,!0)}else this.handleInvalidSelection(e.position)}updateSelectedCell(e){this.gameState.indexSelect&&document.querySelector(".selected-yellow")&&this.gamePlay.deselectCell(this.gameState.indexSelect.yellow),this.gameState.indexSelect={yellow:e}}handleInvalidSelection(e){const t=this.gameState.indexSelect,a=!this.gameState.attackCells.includes(e),s=this.gameState.compTeam.some((t=>t.position===e));t&&a&&s?this.gamePlay.showModalMessage("It can't be done","9940"):this.gameState.activeChar||this.gamePlay.showModalMessage("This isn`t your character","9995")}async doDamage(e){const{attack:t}=this.gameState.activeChar.character,a=this.gameState.getPlayer(e),{defence:s,health:i}=a.character,l=function(e,t){return Math.round(Math.max(e-t,.3*e))}(t,s);return!!await this.gamePlay.showDamage(e,l)&&(a.character.health=i-l,this.checkHealthRemoveDead(a),!0)}checkHealthRemoveDead(e){if(e.character.health<=0){const t=this.gameState.getPresumedDeceasedPlayerInfo(e.position);-1!==t.index&&(this.gameState[t.teamKey].splice(t.index,1),this.gameState.indexSelect=null)}}reset(){this.gameState.indexSelect&&(Object.keys(this.gameState.indexSelect).forEach((e=>{this.gamePlay.deselectCell(this.gameState.indexSelect[e])})),this.gameState.indexSelect=null,this.gamePlay.setCursor(o))}updatePicture(){const e=this.gameState.levelGame>0?this.gameState.levelGame-1:0;this.gamePlay.drawUi(Object.values(l)[e]),this.gamePlay.redrawPositions(this.gameState.getAllPlayer()),this.gameState.indexSelect&&this.gameState.indexSelect.yellow&&this.gamePlay.selectCell(this.gameState.indexSelect.yellow)}async doAttackComp(){const e=(t=this.gameState.compTeam)[Math.floor(Math.random()*t.length)];var t;this.gameState.activeChar=e,this.reactOnClick(e,["daemon","undead","vampire"]);const a=this.gameState.getUserPosition();return void 0!==a?await this.doDamage(a)&&(this.checkAndEndGameIfNecessary(),this.updatePicture()):(this.gameState.activeChar.position=this.moveToRandomPosition(),this.gamePlay.redrawPositions(this.gameState.getAllPlayer())),this.gameState.activeChar=null,this.reset(),!0}checkAndEndGameIfNecessary(){0===this.gameState.userTeam.length&&(this.gameState.block=!0,this.gamePlay.showModalMessage("You lose!","129335"))}moveToRandomPosition(){let e,t;do{e=Math.floor(Math.random()*this.gameState.transitionCells.length);const a=this.gameState.transitionCells[e];t=this.gameState.getAllPlayer().some((e=>e.position===a))}while(t);return this.gameState.transitionCells[e]}}(b,L);T.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxVQUFVdEwsT0FBUSxFQUV2QjlFLEtBQUt1RSxTQUFTZ0ssaUJBQWlCLFlBQWEsVUFFaEQsQ0FFQWlHLHVCQUNFLElBQUlDLEVBQ0FDLEVBQ0osRUFBRyxDQUNERCxFQUFPOVEsS0FBS0MsTUFBTUQsS0FBSzBGLFNBQVdySixLQUFLb1EsVUFBVWpMLGdCQUFnQjZCLFFBQ2pFLE1BQU0yTixFQUFvQjNVLEtBQUtvUSxVQUFVakwsZ0JBQWdCc1AsR0FDekRDLEVBQVcxVSxLQUFLb1EsVUFDYjlLLGVBQ0E2TixNQUFNOUUsR0FBTUEsRUFBRWxJLFdBQWF3TyxHQUNoQyxPQUFTRCxHQUVULE9BQU8xVSxLQUFLb1EsVUFBVWpMLGdCQUFnQnNQLEVBQ3hDLEdIL2ZrQ2xRLEVBQVVpTCxHQUM5Q1csRUFBU00sTSIsInNvdXJjZXMiOlsid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL01vZGFsUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvdGhlbWVzLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL0dhbWVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9jdXJzb3JzLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL3RyYW5zaXRpb25BdHRhY2tDZWxscy5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9UZWFtLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL2NoYXJhY3RlcnMvQ2hhcmFjdGVyLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL1Bvc2l0aW9uZWRDaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9Cb3dtYW4uanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9Td29yZHNtYW4uanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY2hhcmFjdGVycy9NYWdpY2lhbi5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL0RhZW1vbi5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL1VuZGVhZC5qcyIsIndlYnBhY2s6Ly9hanMtZGlwbG9tYS8uL3NyYy9qcy9jaGFyYWN0ZXJzL1ZhbXBpcmUuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvY3JlYXRlUG9zaXRpb25zLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL2dlbmVyYXRvcnMuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvYXBwLmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL0dhbWVQbGF5LmpzIiwid2VicGFjazovL2Fqcy1kaXBsb21hLy4vc3JjL2pzL0dhbWVTdGF0ZVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vYWpzLWRpcGxvbWEvLi9zcmMvanMvR2FtZUNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5lbGVtTW9kYWwgPSBudWxsO1xyXG4gICAgdGhpcy5ldmVudFNob3dNb2RhbCA9IG51bGw7XHJcbiAgICB0aGlzLmV2ZW50SGlkZU1vZGFsID0gbnVsbDtcclxuICAgIHRoaXMuaGlkaW5nID0gZmFsc2U7XHJcbiAgICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5hbmltYXRpb25TcGVlZCA9IDIwMDtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlTW9kYWwoKTtcclxuICAgIHRoaXMuZWxlbU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyQ2xvc2VNb2RhbC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLmV2ZW50U2hvd01vZGFsID0gbmV3IEN1c3RvbUV2ZW50KCdzaG93Lm1vZGFsRnVuYycsIHsgZGV0YWlsOiB0aGlzLmVsZW1Nb2RhbCB9KTtcclxuICAgIHRoaXMuZXZlbnRIaWRlTW9kYWwgPSBuZXcgQ3VzdG9tRXZlbnQoJ2hpZGUubW9kYWxGdW5jJywgeyBkZXRhaWw6IHRoaXMuZWxlbU1vZGFsIH0pO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlTW9kYWwoKSB7XHJcbiAgICB0aGlzLmVsZW1Nb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgY29uc3QgbW9kYWxUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwibW9kYWxfX2JhY2tkcm9wXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxGdW5jXCI+PGRpdiBjbGFzcz1cIm1vZGFsX19jb250ZW50XCI+PGRpdiBjbGFzcz1cIm1vZGFsX19oZWFkZXJcIj48ZGl2IGNsYXNzPVwibW9kYWxfX3RpdGxlXCIgZGF0YS1tb2RhbEZ1bmM9XCJ0aXRsZVwiPnt7dGl0bGV9fTwvZGl2PjxzcGFuIGNsYXNzPVwibW9kYWxfX2J0bi1jbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsRnVuY1wiIHRpdGxlPVwi0JfQsNC60YDRi9GC0YxcIj7Dlzwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPVwibW9kYWxfX2JvZHlcIiBkYXRhLW1vZGFsRnVuYz1cImNvbnRlbnRcIj57e2NvbnRlbnR9fTwvZGl2Pnt7Zm9vdGVyfX08L2Rpdj48L2Rpdj4nO1xyXG4gICAgY29uc3QgbW9kYWxGb290ZXJUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwibW9kYWxfX2Zvb3RlclwiPnt7YnV0dG9uc319PC9kaXY+JztcclxuICAgIGNvbnN0IG1vZGFsQnV0dG9uVGVtcGxhdGUgPSAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJ7e2J1dHRvbl9jbGFzc319XCIgZGF0YS1oYW5kbGVyPXt7YnV0dG9uX2hhbmRsZXJ9fT57e2J1dHRvbl90ZXh0fX08L2J1dHRvbj4nO1xyXG4gICAgbGV0IG1vZGFsSFRNTDtcclxuICAgIGxldCBtb2RhbEZvb3RlckhUTUwgPSAnJztcclxuXHJcbiAgICB0aGlzLmVsZW1Nb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbEZ1bmMnKTtcclxuICAgIG1vZGFsSFRNTCA9IG1vZGFsVGVtcGxhdGUucmVwbGFjZShcclxuICAgICAgJ3t7dGl0bGV9fScsXHJcbiAgICAgIHRoaXMub3B0aW9ucy50aXRsZSB8fCAn0J3QvtCy0L7QtSDQvtC60L3QvicsXHJcbiAgICApO1xyXG4gICAgbW9kYWxIVE1MID0gbW9kYWxIVE1MLnJlcGxhY2UoJ3t7Y29udGVudH19JywgdGhpcy5vcHRpb25zLmNvbnRlbnQgfHwgJycpO1xyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5mb290ZXJCdXR0b25zKSB7XHJcbiAgICAgIGZvciAoY29uc3QgYnV0dG9uIG9mIHRoaXMub3B0aW9ucy5mb290ZXJCdXR0b25zKSB7XHJcbiAgICAgICAgbGV0IG1vZGFsRm9vdGVyQnV0dG9uID0gbW9kYWxCdXR0b25UZW1wbGF0ZS5yZXBsYWNlKFxyXG4gICAgICAgICAgJ3t7YnV0dG9uX2NsYXNzfX0nLFxyXG4gICAgICAgICAgYnV0dG9uLmNsYXNzLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgbW9kYWxGb290ZXJCdXR0b24gPSBtb2RhbEZvb3RlckJ1dHRvbi5yZXBsYWNlKFxyXG4gICAgICAgICAgJ3t7YnV0dG9uX2hhbmRsZXJ9fScsXHJcbiAgICAgICAgICBidXR0b24uaGFuZGxlcixcclxuICAgICAgICApO1xyXG4gICAgICAgIG1vZGFsRm9vdGVyQnV0dG9uID0gbW9kYWxGb290ZXJCdXR0b24ucmVwbGFjZShcclxuICAgICAgICAgICd7e2J1dHRvbl90ZXh0fX0nLFxyXG4gICAgICAgICAgYnV0dG9uLnRleHQsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBtb2RhbEZvb3RlckhUTUwgKz0gbW9kYWxGb290ZXJCdXR0b247XHJcbiAgICAgIH1cclxuICAgICAgbW9kYWxGb290ZXJIVE1MID0gbW9kYWxGb290ZXJUZW1wbGF0ZS5yZXBsYWNlKFxyXG4gICAgICAgICd7e2J1dHRvbnN9fScsXHJcbiAgICAgICAgbW9kYWxGb290ZXJIVE1MLFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgbW9kYWxIVE1MID0gbW9kYWxIVE1MLnJlcGxhY2UoJ3t7Zm9vdGVyfX0nLCBtb2RhbEZvb3RlckhUTUwpO1xyXG4gICAgdGhpcy5lbGVtTW9kYWwuaW5uZXJIVE1MID0gbW9kYWxIVE1MO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1Nb2RhbCk7XHJcbiAgfVxyXG5cclxuICBzaG93KCkge1xyXG4gICAgaWYgKCF0aGlzLmRlc3Ryb3llZCAmJiAhdGhpcy5oaWRpbmcpIHtcclxuICAgICAgdGhpcy5lbGVtTW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWxfX3Nob3cnKTtcclxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh0aGlzLmV2ZW50U2hvd01vZGFsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhpZGUoKSB7XHJcbiAgICB0aGlzLmhpZGluZyA9IHRydWU7XHJcbiAgICB0aGlzLmVsZW1Nb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9fc2hvdycpO1xyXG4gICAgdGhpcy5lbGVtTW9kYWwuY2xhc3NMaXN0LmFkZCgnbW9kYWxfX2hpZGluZycpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuZWxlbU1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX19oaWRpbmcnKTtcclxuICAgICAgdGhpcy5oaWRpbmcgPSBmYWxzZTtcclxuICAgIH0sIHRoaXMuYW5pbWF0aW9uU3BlZWQpO1xyXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh0aGlzLmV2ZW50SGlkZU1vZGFsKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZXJDbG9zZU1vZGFsKGUpIHtcclxuICAgIGlmIChlLnRhcmdldC5kYXRhc2V0LmRpc21pc3MgPT09ICdtb2RhbEZ1bmMnIHx8IGUudGFyZ2V0LmRhdGFzZXQuaGFuZGxlcikge1xyXG4gICAgICB0aGlzLmhpZGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICBpZiAodGhpcy5lbGVtTW9kYWwucGFyZW50RWxlbWVudCkge1xyXG4gICAgICB0aGlzLmVsZW1Nb2RhbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZWxlbU1vZGFsKTtcclxuICAgIH1cclxuICAgIHRoaXMuZWxlbU1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICdjbGljaycsXHJcbiAgICAgIHRoaXMuaGFuZGxlckNsb3NlTW9kYWwuYmluZCh0aGlzKSxcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZXRDb250ZW50KGh0bWwpIHtcclxuICAgIHRoaXMuZWxlbU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1vZGFsRnVuYz1cImNvbnRlbnRcIl0nKS5pbm5lckhUTUwgPSBodG1sO1xyXG4gIH1cclxuXHJcbiAgc2V0VGl0bGUodGV4dCkge1xyXG4gICAgdGhpcy5lbGVtTW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtbW9kYWxGdW5jPVwidGl0bGVcIl0nKS5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gIH1cclxufVxyXG4iLCIvKipcclxuICogQHRvZG9cclxuICogQHBhcmFtIGluZGV4IC0g0LjQvdC00LXQutGBINC/0L7Qu9GPXHJcbiAqIEBwYXJhbSBib2FyZFNpemUgLSDRgNCw0LfQvNC10YAg0LrQstCw0LTRgNCw0YLQvdC+0LPQviDQv9C+0LvRjyAo0LIg0LTQu9C40L3RgyDQuNC70Lgg0YjQuNGA0LjQvdGDKVxyXG4gKiBAcmV0dXJucyDRgdGC0YDQvtC60LAgLSDRgtC40L8g0Y/Rh9C10LnQutC4INC90LAg0L/QvtC70LU6XHJcbiAqXHJcbiAqIHRvcC1sZWZ0XHJcbiAqIHRvcC1yaWdodFxyXG4gKiB0b3BcclxuICogYm90dG9tLWxlZnRcclxuICogYm90dG9tLXJpZ2h0XHJcbiAqIGJvdHRvbVxyXG4gKiByaWdodFxyXG4gKiBsZWZ0XHJcbiAqIGNlbnRlclxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBjYWxjVGlsZVR5cGUoMCwgOCk7IC8vICd0b3AtbGVmdCdcclxuICogY2FsY1RpbGVUeXBlKDEsIDgpOyAvLyAndG9wJ1xyXG4gKiBjYWxjVGlsZVR5cGUoNjMsIDgpOyAvLyAnYm90dG9tLXJpZ2h0J1xyXG4gKiBjYWxjVGlsZVR5cGUoNywgNyk7IC8vICdsZWZ0J1xyXG4gKiBgYGBcclxuICogKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNUaWxlVHlwZShpbmRleCwgYm9hcmRTaXplKSB7XHJcbiAgLy8gVE9ETzog0LLQsNGIINC60L7QtCDQsdGD0LTQtdGCINGC0YPRglxyXG4gIGlmIChpbmRleCA8IGJvYXJkU2l6ZSAtIDEgJiYgaW5kZXggPiAwKSB7XHJcbiAgICByZXR1cm4gJ3RvcCc7XHJcbiAgfVxyXG4gIGlmIChpbmRleCA8IGJvYXJkU2l6ZSAqKiAyIC0gMSAmJiBpbmRleCA+IGJvYXJkU2l6ZSAqKiAyIC0gYm9hcmRTaXplKSB7XHJcbiAgICByZXR1cm4gJ2JvdHRvbSc7XHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSAxOyBpIDwgYm9hcmRTaXplIC0gMTsgaSArPSAxKSB7XHJcbiAgICBpZiAoaW5kZXggPT09IGJvYXJkU2l6ZSAqIGkpIHtcclxuICAgICAgcmV0dXJuICdsZWZ0JztcclxuICAgIH1cclxuICAgIGlmIChpbmRleCA9PT0gYm9hcmRTaXplICogaSArIChib2FyZFNpemUgLSAxKSkge1xyXG4gICAgICByZXR1cm4gJ3JpZ2h0JztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN3aXRjaCAoaW5kZXgpIHtcclxuICAgIGNhc2UgMDpcclxuICAgICAgcmV0dXJuICd0b3AtbGVmdCc7XHJcbiAgICBjYXNlIGJvYXJkU2l6ZSAtIDE6XHJcbiAgICAgIHJldHVybiAndG9wLXJpZ2h0JztcclxuICAgIGNhc2UgYm9hcmRTaXplICogKGJvYXJkU2l6ZSAtIDEpOlxyXG4gICAgICByZXR1cm4gJ2JvdHRvbS1sZWZ0JztcclxuICAgIGNhc2UgYm9hcmRTaXplICoqIDIgLSAxOlxyXG4gICAgICByZXR1cm4gJ2JvdHRvbS1yaWdodCc7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gJ2NlbnRlcic7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY0hlYWx0aExldmVsKGhlYWx0aCkge1xyXG4gIGlmIChoZWFsdGggPCAxNSkge1xyXG4gICAgcmV0dXJuICdjcml0aWNhbCc7XHJcbiAgfVxyXG5cclxuICBpZiAoaGVhbHRoIDwgNTApIHtcclxuICAgIHJldHVybiAnbm9ybWFsJztcclxuICB9XHJcblxyXG4gIHJldHVybiAnaGlnaCc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlQ2hhcmFjdGVycyhjaGFyYWN0ZXJzLCByZXN0b3JlRm4pIHtcclxuICByZXR1cm4gY2hhcmFjdGVycy5tYXAocmVzdG9yZUZuKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwQXR0YWNrRGVmZW5jZShiZWZvcmUsIGxpZmUpIHtcclxuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLm1heChiZWZvcmUsIChiZWZvcmUgKiAoODAgKyBsaWZlKSkgLyAxMDApKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZURhbWFnZShhdHRhY2ssIGRlZmVuY2UpIHtcclxuICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLm1heChhdHRhY2sgLSBkZWZlbmNlLCBhdHRhY2sgKiAwLjMpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEluZm8ocGxheWVyKSB7XHJcbiAgcmV0dXJuIGBcXHV7MUYzOTZ9JHtwbGF5ZXIubGV2ZWx9IFxcdTI2OTQke3BsYXllci5hdHRhY2t9IFxcdXsxRjZFMX0ke3BsYXllci5kZWZlbmNlfSBcXHUyNzY0JHtwbGF5ZXIuaGVhbHRofWA7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvdmVyd3JpdGVQcm9wZXJ0aWVzKHRhcmdldCwgc291cmNlKSB7XHJcbiAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHNvdXJjZSk7XHJcbiAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUNoYXJhY3Rlcih0ZWFtKSB7XHJcbiAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0ZWFtLmxlbmd0aCk7XHJcbiAgcmV0dXJuIHRlYW1bcmFuZG9tSW5kZXhdO1xyXG59XHJcbiIsImNvbnN0IHRoZW1lcyA9IHtcclxuICBwcmFpcmllOiAncHJhaXJpZScsXHJcbiAgZGVzZXJ0OiAnZGVzZXJ0JyxcclxuICBhcmN0aWM6ICdhcmN0aWMnLFxyXG4gIG1vdW50YWluOiAnbW91bnRhaW4nLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgdGhlbWVzO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGUge1xyXG4gIGNvbnN0cnVjdG9yKGdhbWVQbGF5KSB7XHJcbiAgICB0aGlzLmxldmVsR2FtZSA9IDE7XHJcbiAgICB0aGlzLmdhbWVQbGF5ID0gZ2FtZVBsYXk7XHJcbiAgICB0aGlzLmlzTW92ZSA9ICd1c2VyJztcclxuICAgIHRoaXMuY291bnRDbGljayA9IDA7XHJcbiAgICB0aGlzLnVzZXJUZWFtU3Vydml2b3JzID0gW107XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIHRoaXMucG9pbnRzID0gMDtcclxuICAgIHRoaXMuYmxvY2sgPSBmYWxzZTtcclxuICAgIHRoaXMudXNlclRlYW0gPSBbXTtcclxuICAgIHRoaXMuY29tcFRlYW0gPSBbXTtcclxuICAgIHRoaXMuYWN0aXZlQ2hhciA9IG51bGw7XHJcbiAgICB0aGlzLmluZGV4U2VsZWN0ID0gbnVsbDtcclxuICAgIHRoaXMudHJhbnNpdGlvbkNlbGxzID0gW107XHJcbiAgICB0aGlzLmF0dGFja0NlbGxzID0gW107XHJcbiAgICB0aGlzLnNob3dNb2RhbCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWxsUGxheWVyKCkge1xyXG4gICAgaWYgKCF0aGlzLnVzZXJUZWFtIHx8ICF0aGlzLmNvbXBUZWFtKSB0aHJvdyBuZXcgRXJyb3IoJ2l0IG11c3QgaGF2ZSAyIGFyZ3VtZW50cycpO1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLnVzZXJUZWFtLCAuLi50aGlzLmNvbXBUZWFtXTtcclxuICB9XHJcblxyXG4gIGNhbGN1bGF0ZVN1bVBvaW50cygpIHtcclxuICAgIHJldHVybiB0aGlzLnVzZXJUZWFtLnJlZHVjZSgoYSwgYikgPT4gYSArIGIuY2hhcmFjdGVyLmhlYWx0aCwgMCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyUG9zaXRpb24oKSB7XHJcbiAgICBjb25zdCBmb3VuZEl0ZW0gPSB0aGlzLnVzZXJUZWFtLmZpbmQoKGl0ZW0pID0+IHRoaXMuYXR0YWNrQ2VsbHMuaW5jbHVkZXMoaXRlbS5wb3NpdGlvbikpO1xyXG4gICAgcmV0dXJuIGZvdW5kSXRlbSA/IGZvdW5kSXRlbS5wb3NpdGlvbiA6IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIGZpbmRQcmVzdW1lZERlY2Vhc2VkUGxheWVyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxsUGxheWVyKCkuZmluZCgoZSkgPT4gZS5wb3NpdGlvbiA9PT0gdGhpcy5hY3RpdmVDaGFyVXNlcj8ucG9zaXRpb24pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJlc3VtZWREZWNlYXNlZFBsYXllckluZm8ocG9zaXRpb24pIHtcclxuICAgIGNvbnN0IHRlYW0gPSB0aGlzLmlzTW92ZSA9PT0gJ2NvbXAnID8gdGhpcy51c2VyVGVhbSA6IHRoaXMuY29tcFRlYW07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaW5kZXg6IHRlYW0uZmluZEluZGV4KChpdGVtKSA9PiBwb3NpdGlvbiA9PT0gaXRlbS5wb3NpdGlvbiksXHJcbiAgICAgIHRlYW1LZXk6IHRoaXMuaXNNb3ZlID09PSAnY29tcCcgPyAndXNlclRlYW0nIDogJ2NvbXBUZWFtJyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBnZXRQbGF5ZXIoaW5kZXgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldEFsbFBsYXllcigpLmZpbmQoKGVsKSA9PiBlbC5wb3NpdGlvbiA9PT0gaW5kZXgpO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBjdXJzb3JzID0ge1xyXG4gIGF1dG86ICdhdXRvJyxcclxuICBwb2ludGVyOiAncG9pbnRlcicsXHJcbiAgY3Jvc3NoYWlyOiAnY3Jvc3NoYWlyJyxcclxuICBub3RhbGxvd2VkOiAnbm90LWFsbG93ZWQnLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY3Vyc29ycztcclxuIiwiLy8gY3JlYXRlIHR3by1kaW1lbnNpb25hbCBmaWVsZFxyXG5mdW5jdGlvbiBnZXRUYWJsZShjZWxscywgYm9hcmRTaXplKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gW107XHJcbiAgZm9yIChcclxuICAgIGxldCBzID0gMCwgZSA9IGJvYXJkU2l6ZTtcclxuICAgIHMgPCBjZWxscy5sZW5ndGg7XHJcbiAgICBzICs9IGJvYXJkU2l6ZSwgZSArPSBib2FyZFNpemVcclxuICApIHtcclxuICAgIHJlc3VsdC5wdXNoKGNlbGxzLnNsaWNlKHMsIGUpKTtcclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QXR0YWNrQ2VsbHMoY2VsbHMsIGluZGV4LCBtYXhSYW5nZSkge1xyXG4gIGNvbnN0IGFsbG93ZWRDZWxscyA9IFtdO1xyXG4gIGxldCBmaW5kSW5kZXg7XHJcbiAgbGV0IHJvdztcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICByb3cgPSBpO1xyXG4gICAgZmluZEluZGV4ID0gY2VsbHNbaV0uZmluZEluZGV4KChlbCkgPT4gZWwgPT09IGluZGV4KTtcclxuICAgIGlmIChmaW5kSW5kZXggIT09IC0xKSBicmVhaztcclxuICB9XHJcbiAgZm9yIChsZXQgaSA9IC1tYXhSYW5nZTsgaSA8PSBtYXhSYW5nZTsgaSArPSAxKSB7XHJcbiAgICBmb3IgKGxldCBqID0gLW1heFJhbmdlOyBqIDw9IG1heFJhbmdlOyBqICs9IDEpIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIHJvdyArIGkgPj0gMFxyXG4gICAgICAgICYmIGZpbmRJbmRleCArIGogPj0gMFxyXG4gICAgICAgICYmIHJvdyArIGkgPCBjZWxscy5sZW5ndGhcclxuICAgICAgICAmJiBmaW5kSW5kZXggKyBqIDwgY2VsbHMubGVuZ3RoXHJcbiAgICAgICAgJiYgY2VsbHNbcm93ICsgaV1bZmluZEluZGV4ICsgal0gIT09IGluZGV4XHJcbiAgICAgICkge1xyXG4gICAgICAgIGFsbG93ZWRDZWxscy5wdXNoKGNlbGxzW3JvdyArIGldW2ZpbmRJbmRleCArIGpdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gYWxsb3dlZENlbGxzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uQ2VsbHMoY2VsbHMsIGluZGV4LCBtYXhSYW5nZSkge1xyXG4gIGNvbnN0IHRyYW5zaXRDZWxscyA9IFtdO1xyXG4gIGxldCBmaW5kSW5kZXg7XHJcbiAgbGV0IHJvdztcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNlbGxzLmxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICByb3cgPSBpO1xyXG4gICAgZmluZEluZGV4ID0gY2VsbHNbaV0uZmluZEluZGV4KChlbCkgPT4gZWwgPT09IGluZGV4KTtcclxuICAgIGlmIChmaW5kSW5kZXggIT09IC0xKSBicmVhaztcclxuICB9XHJcblxyXG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IG1heFJhbmdlOyBpICs9IDEpIHtcclxuICAgIGlmIChmaW5kSW5kZXggLSBpID49IDApIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93XVtmaW5kSW5kZXggLSBpXSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZpbmRJbmRleCArIGkgPCBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93XVtmaW5kSW5kZXggKyBpXSk7XHJcbiAgICB9XHJcbiAgICBpZiAocm93ICsgaSA8IGNlbGxzLmxlbmd0aCAmJiBmaW5kSW5kZXggLSBpID49IDApIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93ICsgaV1bZmluZEluZGV4IC0gaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb3cgKyBpIDwgY2VsbHMubGVuZ3RoICYmIGZpbmRJbmRleCArIGkgPCBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93ICsgaV1bZmluZEluZGV4ICsgaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb3cgLSBpID49IDAgJiYgZmluZEluZGV4IC0gaSA+PSAwKSB7XHJcbiAgICAgIHRyYW5zaXRDZWxscy5wdXNoKGNlbGxzW3JvdyAtIGldW2ZpbmRJbmRleCAtIGldKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocm93IC0gaSA+PSAwICYmIGZpbmRJbmRleCArIGkgPCBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93IC0gaV1bZmluZEluZGV4ICsgaV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyb3cgLSBpID49IDApIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93IC0gaV1bZmluZEluZGV4XSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJvdyArIGkgPCBjZWxscy5sZW5ndGgpIHtcclxuICAgICAgdHJhbnNpdENlbGxzLnB1c2goY2VsbHNbcm93ICsgaV1bZmluZEluZGV4XSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB0cmFuc2l0Q2VsbHM7XHJcbn1cclxuXHJcbi8vIHJldHVybnMgY2VsbHMgYWxsb3dlZCBmb3IgYWN0aW9uXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFRyYW5zaXRpb25BdHRhY2tDZWxscyhcclxuICBpbmRleCxcclxuICBib2FyZFNpemUsXHJcbiAgbWF4UmFuZ2UsXHJcbiAgYXR0YWNrID0gZmFsc2UsXHJcbikge1xyXG4gIGNvbnN0IGFycmF5Q2VsbHMgPSBbXTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJvYXJkU2l6ZSAqKiAyOyBpICs9IDEpIHtcclxuICAgIGFycmF5Q2VsbHMucHVzaChpKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHRhYmxlQ2VsbHMgPSBnZXRUYWJsZShhcnJheUNlbGxzLCBib2FyZFNpemUpO1xyXG4gIGlmIChhdHRhY2spIHtcclxuICAgIHJldHVybiBnZXRBdHRhY2tDZWxscyh0YWJsZUNlbGxzLCBpbmRleCwgbWF4UmFuZ2UpO1xyXG4gIH1cclxuICByZXR1cm4gZ2V0VHJhbnNpdGlvbkNlbGxzKHRhYmxlQ2VsbHMsIGluZGV4LCBtYXhSYW5nZSk7XHJcbn1cclxuIiwiLyoqXHJcbiAqINCa0LvQsNGB0YEsINC/0YDQtdC00YHRgtCw0LLQu9GP0Y7RidC40Lkg0L/QtdGA0YHQvtC90LDQttC10Lkg0LrQvtC80LDQvdC00YtcclxuICpcclxuICogQHRvZG8g0KHQsNC80L7RgdGC0L7Rj9GC0LXQu9GM0L3QviDQv9GA0L7QtNGD0LzQsNC50YLQtSDRhdGA0LDQvdC10L3QuNC1INC/0LXRgNGB0L7QvdCw0LbQtdC5INCyINC60LvQsNGB0YHQtVxyXG4gKiDQndCw0L/RgNC40LzQtdGAXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIGNvbnN0IGNoYXJhY3RlcnMgPSBbbmV3IFN3b3Jkc21hbigyKSwgbmV3IEJvd21hbigxKV1cclxuICogY29uc3QgdGVhbSA9IG5ldyBUZWFtKGNoYXJhY3RlcnMpO1xyXG4gKlxyXG4gKiB0ZWFtLmNoYXJhY3RlcnMgLy8gW3N3b3Jkc21hbiwgYm93bWFuXVxyXG4gKiBgYGBcclxuICogKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVhbSB7XHJcbiAgLy8gVE9ETzogd3JpdGUgeW91ciBsb2dpYyBoZXJlXHJcbiAgY29uc3RydWN0b3IoY2hhcmFjdGVycykge1xyXG4gICAgdGhpcy5jaGFyYWN0ZXJzID0gY2hhcmFjdGVycztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgdXBBdHRhY2tEZWZlbmNlIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuLyoqXHJcbiAqINCR0LDQt9C+0LLRi9C5INC60LvQsNGB0YEsINC+0YIg0LrQvtGC0L7RgNC+0LPQviDQvdCw0YHQu9C10LTRg9GO0YLRgdGPINC60LvQsNGB0YHRiyDQv9C10YDRgdC+0L3QsNC20LXQuVxyXG4gKiBAcHJvcGVydHkgbGV2ZWwgLSDRg9GA0L7QstC10L3RjCDQv9C10YDRgdC+0L3QsNC20LAsINC+0YIgMSDQtNC+IDRcclxuICogQHByb3BlcnR5IGF0dGFjayAtINC/0L7QutCw0LfQsNGC0LXQu9GMINCw0YLQsNC60LhcclxuICogQHByb3BlcnR5IGRlZmVuY2UgLSDQv9C+0LrQsNC30LDRgtC10LvRjCDQt9Cw0YnQuNGC0YtcclxuICogQHByb3BlcnR5IGhlYWx0aCAtINC30LTQvtGA0L7QstGM0LUg0L/QtdGA0YHQvtC90LDQttCwXHJcbiAqIEBwcm9wZXJ0eSB0eXBlIC0g0YHRgtGA0L7QutCwINGBINC+0LTQvdC40Lwg0LjQtyDQtNC+0L/Rg9GB0YLQuNC80YvRhSDQt9C90LDRh9C10L3QuNC5OlxyXG4gKiBzd29yZHNtYW5cclxuICogYm93bWFuXHJcbiAqIG1hZ2ljaWFuXHJcbiAqIGRhZW1vblxyXG4gKiB1bmRlYWRcclxuICogdmFtcGlyZVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhcmFjdGVyIHtcclxuICBjb25zdHJ1Y3RvcihsZXZlbCwgdHlwZSA9ICdnZW5lcmljJykge1xyXG4gICAgaWYgKG5ldy50YXJnZXQubmFtZSA9PT0gJ0NoYXJhY3RlcicpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNsYXNzJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xyXG4gICAgdGhpcy5hdHRhY2sgPSAwO1xyXG4gICAgdGhpcy5kZWZlbmNlID0gMDtcclxuICAgIHRoaXMuaGVhbHRoID0gNTA7XHJcbiAgfVxyXG5cclxuICBsZXZlbFVwKCkge1xyXG4gICAgaWYgKHRoaXMuaGVhbHRoIDw9IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgbGV2ZWwgdXAgYSBkZWFkIGNoYXJhY3RlclwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmxldmVsID0gTWF0aC5taW4odGhpcy5sZXZlbCArIDEsIDQpO1xyXG4gICAgdGhpcy5hdHRhY2sgPSB1cEF0dGFja0RlZmVuY2UodGhpcy5hdHRhY2ssIHRoaXMuaGVhbHRoKTtcclxuICAgIHRoaXMuZGVmZW5jZSA9IHVwQXR0YWNrRGVmZW5jZSh0aGlzLmRlZmVuY2UsIHRoaXMuaGVhbHRoKTtcclxuICAgIHRoaXMuaGVhbHRoID0gTWF0aC5taW4odGhpcy5oZWFsdGggKyA4MCwgMTAwKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENoYXJhY3RlciBmcm9tICcuL2NoYXJhY3RlcnMvQ2hhcmFjdGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvc2l0aW9uZWRDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGNoYXJhY3RlciwgcG9zaXRpb24pIHtcclxuICAgIHRoaXMuY2hhcmFjdGVyID0gY2hhcmFjdGVyO1xyXG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0IGNoYXJhY3Rlcih2YWx1ZSkge1xyXG4gICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBDaGFyYWN0ZXIpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAnY2hhcmFjdGVyIG11c3QgYmUgaW5zdGFuY2Ugb2YgQ2hhcmFjdGVyIG9yIGl0cyBjaGlsZHJlbicsXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jaGFyYWN0ZXIgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGdldCBjaGFyYWN0ZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2hhcmFjdGVyO1xyXG4gIH1cclxuXHJcbiAgc2V0IHBvc2l0aW9uKHZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Bvc2l0aW9uIG11c3QgYmUgYSBudW1iZXInKTtcclxuICAgIH1cclxuICAgIHRoaXMuX3Bvc2l0aW9uID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBnZXQgcG9zaXRpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi9DaGFyYWN0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm93bWFuIGV4dGVuZHMgQ2hhcmFjdGVyIHtcclxuICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEpIHtcclxuICAgIHN1cGVyKGxldmVsKTtcclxuICAgIHRoaXMudHlwZSA9ICdib3dtYW4nO1xyXG4gICAgdGhpcy5hdHRhY2sgPSAyNTtcclxuICAgIHRoaXMuZGVmZW5jZSA9IDI1O1xyXG4gICAgdGhpcy5tYXhSYW5nZSA9IDI7XHJcbiAgICB0aGlzLm1heEF0dGFjayA9IDI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi9DaGFyYWN0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3dvcmRzbWFuIGV4dGVuZHMgQ2hhcmFjdGVyIHtcclxuICBjb25zdHJ1Y3RvcihsZXZlbCA9IDEpIHtcclxuICAgIHN1cGVyKGxldmVsKTtcclxuICAgIHRoaXMudHlwZSA9ICdzd29yZHNtYW4nO1xyXG4gICAgdGhpcy5hdHRhY2sgPSA0MDtcclxuICAgIHRoaXMuZGVmZW5jZSA9IDEwO1xyXG4gICAgdGhpcy5tYXhSYW5nZSA9IDQ7XHJcbiAgICB0aGlzLm1heEF0dGFjayA9IDE7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBDaGFyYWN0ZXIgZnJvbSAnLi9DaGFyYWN0ZXInO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFnaWNpYW4gZXh0ZW5kcyBDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGxldmVsID0gMSkge1xyXG4gICAgc3VwZXIobGV2ZWwpO1xyXG4gICAgdGhpcy50eXBlID0gJ21hZ2ljaWFuJztcclxuICAgIHRoaXMuYXR0YWNrID0gMTA7XHJcbiAgICB0aGlzLmRlZmVuY2UgPSA0MDtcclxuICAgIHRoaXMubWF4UmFuZ2UgPSAxO1xyXG4gICAgdGhpcy5tYXhBdHRhY2sgPSA0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhZW1vbiBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgY29uc3RydWN0b3IobGV2ZWwgPSAxKSB7XHJcbiAgICBzdXBlcihsZXZlbCk7XHJcbiAgICB0aGlzLnR5cGUgPSAnZGFlbW9uJztcclxuICAgIHRoaXMuYXR0YWNrID0gMTA7XHJcbiAgICB0aGlzLmRlZmVuY2UgPSAxMDtcclxuICAgIHRoaXMubWF4UmFuZ2UgPSAxO1xyXG4gICAgdGhpcy5tYXhBdHRhY2sgPSA0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVuZGVhZCBleHRlbmRzIENoYXJhY3RlciB7XHJcbiAgY29uc3RydWN0b3IobGV2ZWwgPSAxKSB7XHJcbiAgICBzdXBlcihsZXZlbCk7XHJcbiAgICB0aGlzLnR5cGUgPSAndW5kZWFkJztcclxuICAgIHRoaXMuYXR0YWNrID0gNDA7XHJcbiAgICB0aGlzLmRlZmVuY2UgPSAxMDtcclxuICAgIHRoaXMubWF4UmFuZ2UgPSA0O1xyXG4gICAgdGhpcy5tYXhBdHRhY2sgPSAxO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ2hhcmFjdGVyIGZyb20gJy4vQ2hhcmFjdGVyJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbXBpcmUgZXh0ZW5kcyBDaGFyYWN0ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGxldmVsID0gMSkge1xyXG4gICAgc3VwZXIobGV2ZWwpO1xyXG4gICAgdGhpcy50eXBlID0gJ3ZhbXBpcmUnO1xyXG4gICAgdGhpcy5hdHRhY2sgPSAyNTtcclxuICAgIHRoaXMuZGVmZW5jZSA9IDI1O1xyXG4gICAgdGhpcy5tYXhSYW5nZSA9IDI7XHJcbiAgICB0aGlzLm1heEF0dGFjayA9IDI7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGdlbmVyYXRlVGVhbSB9IGZyb20gJy4vZ2VuZXJhdG9ycyc7XHJcbmltcG9ydCBQb3NpdGlvbmVkQ2hhcmFjdGVyIGZyb20gJy4vUG9zaXRpb25lZENoYXJhY3Rlcic7XHJcbmltcG9ydCBCb3dtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL0Jvd21hbic7XHJcbmltcG9ydCBTd29yZHNtYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL1N3b3Jkc21hbic7XHJcbmltcG9ydCBNYWdpY2lhbiBmcm9tICcuL2NoYXJhY3RlcnMvTWFnaWNpYW4nO1xyXG5pbXBvcnQgRGFlbW9uIGZyb20gJy4vY2hhcmFjdGVycy9EYWVtb24nO1xyXG5pbXBvcnQgVW5kZWFkIGZyb20gJy4vY2hhcmFjdGVycy9VbmRlYWQnO1xyXG5pbXBvcnQgVmFtcGlyZSBmcm9tICcuL2NoYXJhY3RlcnMvVmFtcGlyZSc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hvb3NlUmFuZFBvc2l0aW9ucyhib2FyZFNpemUsIG9wcG9uZW50ID0gZmFsc2UpIHtcclxuICBjb25zdCBjZWxscyA9IFtdO1xyXG4gIGlmICghb3Bwb25lbnQpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmRTaXplICoqIDI7IGkgKz0gOCkge1xyXG4gICAgICBjZWxscy5wdXNoKGkpO1xyXG4gICAgICBjZWxscy5wdXNoKGkgKyAxKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgZm9yIChsZXQgaSA9IGJvYXJkU2l6ZSAtIDI7IGkgPCBib2FyZFNpemUgKiogMjsgaSArPSBib2FyZFNpemUpIHtcclxuICAgICAgY2VsbHMucHVzaChpKTtcclxuICAgICAgY2VsbHMucHVzaChpICsgMSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBjZWxscztcclxufVxyXG5cclxuZnVuY3Rpb24gY2hvb3NlUmFuZFBvc2l0aW9uKGJvYXJkU2l6ZSwgb3Bwb25lbnQgPSBmYWxzZSkge1xyXG4gIGNvbnN0IGNlbGxzID0gY2hvb3NlUmFuZFBvc2l0aW9ucyhib2FyZFNpemUsIG9wcG9uZW50KTtcclxuICBjb25zdCByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2VsbHMubGVuZ3RoKTtcclxuICByZXR1cm4gY2VsbHNbcmFuZF07XHJcbn1cclxuXHJcbi8qIGVzbGludC1kaXNhYmxlICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uc0NoYXIoXHJcbiAgcGxheWVyVHlwZXMsXHJcbiAgYm9hcmRTaXplLFxyXG4gIG9wcG9uZW50LFxyXG4gIFttYXhMZXZlbCwgY2hhckNvdW50XVxyXG4pIHtcclxuICBjb25zdCBwb3NpdGlvbnMgPSBbXTtcclxuICBpZiAobWF4TGV2ZWwgPj0gNCkgbWF4TGV2ZWwgPSA0O1xyXG4gIGlmIChjaGFyQ291bnQgPj0gMTApIGNoYXJDb3VudCA9IDEwO1xyXG4gIGNvbnN0IHRlYW0gPSBnZW5lcmF0ZVRlYW0ocGxheWVyVHlwZXMsIG1heExldmVsLCBjaGFyQ291bnQpO1xyXG5cclxuICBjb25zdCByYW5kUG9zaXRpb25zID0gW107XHJcbiAgdGVhbS5jaGFyYWN0ZXJzLmZvckVhY2goKGNoYXIpID0+IHtcclxuICAgIGxldCByYW5kUG9zaXRpb247XHJcbiAgICBsZXQgaXNQb3NpdGlvblVuaXF1ZSA9IGZhbHNlO1xyXG4gICAgZG8ge1xyXG4gICAgICByYW5kUG9zaXRpb24gPSBjaG9vc2VSYW5kUG9zaXRpb24oYm9hcmRTaXplLCBvcHBvbmVudCk7XHJcbiAgICAgIGlmIChyYW5kUG9zaXRpb25zLmZpbmQoKGVsKSA9PiBlbCA9PT0gcmFuZFBvc2l0aW9uKSkge1xyXG4gICAgICAgIHJhbmRQb3NpdGlvbiA9IGNob29zZVJhbmRQb3NpdGlvbihib2FyZFNpemUsIG9wcG9uZW50KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByYW5kUG9zaXRpb25zLnB1c2gocmFuZFBvc2l0aW9uKTtcclxuICAgICAgICBpc1Bvc2l0aW9uVW5pcXVlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSB3aGlsZSAoIWlzUG9zaXRpb25VbmlxdWUpO1xyXG4gICAgcG9zaXRpb25zLnB1c2gobmV3IFBvc2l0aW9uZWRDaGFyYWN0ZXIoY2hhciwgcmFuZFBvc2l0aW9uKSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHBvc2l0aW9ucztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVDaGFyKG9iaikge1xyXG4gIGlmICghb2JqKSByZXR1cm4gbnVsbDtcclxuIFxyXG4gIGNvbnN0IGNoYXJDbGFzc2VzID0ge1xyXG4gICAgYm93bWFuOiBCb3dtYW4sXHJcbiAgICBzd29yZHNtYW46IFN3b3Jkc21hbixcclxuICAgIG1hZ2ljaWFuOiBNYWdpY2lhbixcclxuICAgIGRhZW1vbjogRGFlbW9uLFxyXG4gICAgdW5kZWFkOiBVbmRlYWQsXHJcbiAgICB2YW1waXJlOiBWYW1waXJlLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IENoYXJDbGFzcyA9IGNoYXJDbGFzc2VzW29iai5fY2hhcmFjdGVyLnR5cGVdIHx8IG51bGw7XHJcbiAgY29uc3QgY2hhciA9IG5ldyBDaGFyQ2xhc3Mob2JqLl9jaGFyYWN0ZXIubGV2ZWwpO1xyXG4gIGNvbnN0IHJlc3RvcmVQb3NpdGlvbmVkQ2hhciA9IG5ldyBQb3NpdGlvbmVkQ2hhcmFjdGVyKGNoYXIsIG9iai5fcG9zaXRpb24pO1xyXG5cclxuICBjaGFyLmF0dGFjayA9IG9iai5fY2hhcmFjdGVyLmF0dGFjaztcclxuICBjaGFyLmhlYWx0aCA9IG9iai5fY2hhcmFjdGVyLmhlYWx0aDtcclxuICBjaGFyLmRlZmVuY2UgPSBvYmouX2NoYXJhY3Rlci5kZWZlbmNlO1xyXG5cclxuICByZXR1cm4gcmVzdG9yZVBvc2l0aW9uZWRDaGFyO1xyXG59XHJcbiIsImltcG9ydCBUZWFtIGZyb20gJy4vVGVhbSc7XHJcblxyXG4vKipcclxuICog0KTQvtGA0LzQuNGA0YPQtdGCINGN0LrQt9C10LzQv9C70Y/RgCDQv9C10YDRgdC+0L3QsNC20LAg0LjQtyDQvNCw0YHRgdC40LLQsCBhbGxvd2VkVHlwZXMg0YHQvlxyXG4gKiDRgdC70YPRh9Cw0LnQvdGL0Lwg0YPRgNC+0LLQvdC10Lwg0L7RgiAxINC00L4gbWF4TGV2ZWxcclxuICpcclxuICogQHBhcmFtIGFsbG93ZWRUeXBlcyDQvNCw0YHRgdC40LIg0LrQu9Cw0YHRgdC+0LJcclxuICogQHBhcmFtIG1heExldmVsINC80LDQutGB0LjQvNCw0LvRjNC90YvQuSDQstC+0LfQvNC+0LbQvdGL0Lkg0YPRgNC+0LLQtdC90Ywg0L/QtdGA0YHQvtC90LDQttCwXHJcbiAqIEByZXR1cm5zINCz0LXQvdC10YDQsNGC0L7RgCwg0LrQvtGC0L7RgNGL0Lkg0L/RgNC4INC60LDQttC00L7QvCDQstGL0LfQvtCy0LUg0LLQvtC30LLRgNCw0YnQsNC10YIg0L3QvtCy0YvQuSDRjdC60LfQtdC80L/Qu9GP0YAg0LrQu9Cw0YHRgdCwINC/0LXRgNGB0L7QvdCw0LbQsFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uKiBjaGFyYWN0ZXJHZW5lcmF0b3IoYWxsb3dlZFR5cGVzLCBtYXhMZXZlbCkge1xyXG4gIC8vIFRPRE86IHdyaXRlIGxvZ2ljIGhlcmVcclxuICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgY29uc3QgcmFuZG9tTGV2ZWwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBtYXhMZXZlbCArIDEpO1xyXG4gICAgY29uc3QgUmFuZG9tQ2xhc3MgPSBhbGxvd2VkVHlwZXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsb3dlZFR5cGVzLmxlbmd0aCldO1xyXG4gICAgeWllbGQgbmV3IFJhbmRvbUNsYXNzKHJhbmRvbUxldmVsKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDQpNC+0YDQvNC40YDRg9C10YIg0LzQsNGB0YHQuNCyINC/0LXRgNGB0L7QvdCw0LbQtdC5INC90LAg0L7RgdC90L7QstC1IGNoYXJhY3RlckdlbmVyYXRvclxyXG4gKiBAcGFyYW0gYWxsb3dlZFR5cGVzINC80LDRgdGB0LjQsiDQutC70LDRgdGB0L7QslxyXG4gKiBAcGFyYW0gbWF4TGV2ZWwg0LzQsNC60YHQuNC80LDQu9GM0L3Ri9C5INCy0L7Qt9C80L7QttC90YvQuSDRg9GA0L7QstC10L3RjCDQv9C10YDRgdC+0L3QsNC20LBcclxuICogQHBhcmFtIGNoYXJhY3RlckNvdW50INC60L7Qu9C40YfQtdGB0YLQstC+INC/0LXRgNGB0L7QvdCw0LbQtdC5LCDQutC+0YLQvtGA0L7QtSDQvdGD0LbQvdC+INGB0YTQvtGA0LzQuNGA0L7QstCw0YLRjFxyXG4gKiBAcmV0dXJucyDRjdC60LfQtdC80L/Qu9GP0YAgVGVhbSwg0YXRgNCw0L3Rj9GJ0LjQuSDRjdC60LfQtdC80L/Qu9GP0YDRiyDQv9C10YDRgdC+0L3QsNC20LXQuS5cclxuICog0JrQvtC70LjRh9C10YHRgtCy0L4g0L/QtdGA0YHQvtC90LDQttC10Lkg0LIg0LrQvtC80LDQvdC00LUgLSBjaGFyYWN0ZXJDb3VudFxyXG4gKiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUZWFtKGFsbG93ZWRUeXBlcywgbWF4TGV2ZWwsIGNoYXJhY3RlckNvdW50KSB7XHJcbiAgLy8gVE9ETzogd3JpdGUgbG9naWMgaGVyZVxyXG4gIGNvbnN0IGNoYXJhY3RlcnMgPSBbXTtcclxuICBjb25zdCBwbGF5ZXJHZW5lcmF0b3IgPSBjaGFyYWN0ZXJHZW5lcmF0b3IoYWxsb3dlZFR5cGVzLCBtYXhMZXZlbCk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJDb3VudDsgaSArPSAxKSB7XHJcbiAgICBjaGFyYWN0ZXJzLnB1c2gocGxheWVyR2VuZXJhdG9yLm5leHQoKS52YWx1ZSk7XHJcbiAgfVxyXG4gIHJldHVybiBuZXcgVGVhbShjaGFyYWN0ZXJzKTtcclxufVxyXG4iLCIvKipcclxuICogRW50cnkgcG9pbnQgb2YgYXBwOiBkb24ndCBjaGFuZ2UgdGhpc1xyXG4gKi9cclxuaW1wb3J0IEdhbWVQbGF5IGZyb20gJy4vR2FtZVBsYXknO1xyXG5pbXBvcnQgR2FtZUNvbnRyb2xsZXIgZnJvbSAnLi9HYW1lQ29udHJvbGxlcic7XHJcbmltcG9ydCBHYW1lU3RhdGVTZXJ2aWNlIGZyb20gJy4vR2FtZVN0YXRlU2VydmljZSc7XHJcblxyXG5jb25zdCBnYW1lUGxheSA9IG5ldyBHYW1lUGxheSgpO1xyXG5nYW1lUGxheS5iaW5kVG9ET00oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtY29udGFpbmVyJykpO1xyXG5cclxuY29uc3Qgc3RhdGVTZXJ2aWNlID0gbmV3IEdhbWVTdGF0ZVNlcnZpY2UobG9jYWxTdG9yYWdlKTtcclxuY29uc3QgZ2FtZUN0cmwgPSBuZXcgR2FtZUNvbnRyb2xsZXIoZ2FtZVBsYXksIHN0YXRlU2VydmljZSk7XHJcbmdhbWVDdHJsLmluaXQoKTtcclxuXHJcbi8vIGRvbid0IHdyaXRlIHlvdXIgY29kZSBoZXJlXHJcbiIsImltcG9ydCBNb2RhbFBvcHVwIGZyb20gJy4vTW9kYWxQb3B1cCc7XHJcbmltcG9ydCB7IGNhbGNIZWFsdGhMZXZlbCwgY2FsY1RpbGVUeXBlIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lUGxheSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmJvYXJkU2l6ZSA9IDg7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XHJcbiAgICB0aGlzLmJvYXJkRWwgPSBudWxsO1xyXG4gICAgdGhpcy5jZWxscyA9IFtdO1xyXG4gICAgdGhpcy5jZWxsQ2xpY2tMaXN0ZW5lcnMgPSBbXTtcclxuICAgIHRoaXMuY2VsbEVudGVyTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmNlbGxMZWF2ZUxpc3RlbmVycyA9IFtdO1xyXG4gICAgdGhpcy5uZXdHYW1lTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLnNhdmVHYW1lTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzID0gW107XHJcbiAgICB0aGlzLmlzTW9kYWwgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmluaXRNb2RhbExpc3RlbmVyKCk7XHJcbiAgfVxyXG5cclxuICBiaW5kVG9ET00oY29udGFpbmVyKSB7XHJcbiAgICBpZiAoIShjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIGluaXRNb2RhbExpc3RlbmVyKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZS50YXJnZXQuZGF0YXNldC5oYW5kbGVyID09PSAnbW9kYWxIYW5kbGVyQ2FuY2VsJ1xyXG4gICAgICAgICYmIHRoaXMuY3VycmVudE1vZGFsXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudE1vZGFsLmhpZGUoKTtcclxuICAgICAgICB0aGlzLmlzTW9kYWwgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyBib2FyZEVsIHdpdGggc3BlY2lmaWMgdGhlbWVcclxuICAgKlxyXG4gICAqIEBwYXJhbSB0aGVtZVxyXG4gICAqL1xyXG4gIGRyYXdVaSh0aGVtZSkge1xyXG4gICAgdGhpcy5jaGVja0JpbmRpbmcoKTtcclxuXHJcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250cm9sc1wiPlxyXG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1yZXN0YXJ0XCIgY2xhc3M9XCJidG5cIj5OZXcgR2FtZTwvYnV0dG9uPlxyXG4gICAgICAgIDxidXR0b24gZGF0YS1pZD1cImFjdGlvbi1zYXZlXCIgY2xhc3M9XCJidG5cIj5TYXZlIEdhbWU8L2J1dHRvbj5cclxuICAgICAgICA8YnV0dG9uIGRhdGEtaWQ9XCJhY3Rpb24tbG9hZFwiIGNsYXNzPVwiYnRuXCI+TG9hZCBHYW1lPC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiYm9hcmQtY29udGFpbmVyXCI+XHJcbiAgICAgICAgPGRpdiBkYXRhLWlkPVwiYm9hcmRcIiBjbGFzcz1cImJvYXJkXCI+PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICB0aGlzLm5ld0dhbWVFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPWFjdGlvbi1yZXN0YXJ0XScpO1xyXG4gICAgdGhpcy5zYXZlR2FtZUVsID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9YWN0aW9uLXNhdmVdJyk7XHJcbiAgICB0aGlzLmxvYWRHYW1lRWwgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1hY3Rpb24tbG9hZF0nKTtcclxuXHJcbiAgICB0aGlzLm5ld0dhbWVFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gdGhpcy5vbk5ld0dhbWVDbGljayhldmVudCkpO1xyXG4gICAgdGhpcy5zYXZlR2FtZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB0aGlzLm9uU2F2ZUdhbWVDbGljayhldmVudCkpO1xyXG4gICAgdGhpcy5sb2FkR2FtZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB0aGlzLm9uTG9hZEdhbWVDbGljayhldmVudCkpO1xyXG5cclxuICAgIHRoaXMuYm9hcmRFbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPWJvYXJkXScpO1xyXG4gICAgdGhpcy5ib2FyZEVsLmNsYXNzTGlzdC5hZGQodGhlbWUpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvYXJkU2l6ZSAqKiAyOyBpICs9IDEpIHtcclxuICAgICAgY29uc3QgY2VsbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGNlbGxFbC5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICdjZWxsJyxcclxuICAgICAgICAnbWFwLXRpbGUnLFxyXG4gICAgICAgIGBtYXAtdGlsZS0ke2NhbGNUaWxlVHlwZShpLCB0aGlzLmJvYXJkU2l6ZSl9YCxcclxuICAgICAgKTtcclxuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoZXZlbnQpID0+IHRoaXMub25DZWxsRW50ZXIoZXZlbnQpKTtcclxuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoZXZlbnQpID0+IHRoaXMub25DZWxsTGVhdmUoZXZlbnQpKTtcclxuICAgICAgY2VsbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB0aGlzLm9uQ2VsbENsaWNrKGV2ZW50KSk7XHJcbiAgICAgIHRoaXMuYm9hcmRFbC5hcHBlbmRDaGlsZChjZWxsRWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2VsbHMgPSBBcnJheS5mcm9tKHRoaXMuYm9hcmRFbC5jaGlsZHJlbik7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEcmF3cyBwb3NpdGlvbnMgKHdpdGggY2hhcnMpIG9uIGJvYXJkRWxcclxuICAgKlxyXG4gICAqIEBwYXJhbSBwb3NpdGlvbnMgYXJyYXkgb2YgUG9zaXRpb25lZENoYXJhY3RlciBvYmplY3RzXHJcbiAgICovXHJcbiAgcmVkcmF3UG9zaXRpb25zKHBvc2l0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBjZWxsIG9mIHRoaXMuY2VsbHMpIHtcclxuICAgICAgY2VsbC5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHBvc2l0aW9ucykge1xyXG4gICAgICBjb25zdCBjZWxsRWwgPSB0aGlzLmJvYXJkRWwuY2hpbGRyZW5bcG9zaXRpb24ucG9zaXRpb25dO1xyXG4gICAgICBjb25zdCBjaGFyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgY2hhckVsLmNsYXNzTGlzdC5hZGQoJ2NoYXJhY3RlcicsIHBvc2l0aW9uLmNoYXJhY3Rlci50eXBlKTtcclxuXHJcbiAgICAgIGNvbnN0IGhlYWx0aEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIGhlYWx0aEVsLmNsYXNzTGlzdC5hZGQoJ2hlYWx0aC1sZXZlbCcpO1xyXG5cclxuICAgICAgY29uc3QgaGVhbHRoSW5kaWNhdG9yRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgaGVhbHRoSW5kaWNhdG9yRWwuY2xhc3NMaXN0LmFkZChcclxuICAgICAgICAnaGVhbHRoLWxldmVsLWluZGljYXRvcicsXHJcbiAgICAgICAgYGhlYWx0aC1sZXZlbC1pbmRpY2F0b3ItJHtjYWxjSGVhbHRoTGV2ZWwocG9zaXRpb24uY2hhcmFjdGVyLmhlYWx0aCl9YCxcclxuICAgICAgKTtcclxuICAgICAgaGVhbHRoSW5kaWNhdG9yRWwuc3R5bGUud2lkdGggPSBgJHtwb3NpdGlvbi5jaGFyYWN0ZXIuaGVhbHRofSVgO1xyXG4gICAgICBoZWFsdGhFbC5hcHBlbmRDaGlsZChoZWFsdGhJbmRpY2F0b3JFbCk7XHJcbiAgICAgIGNoYXJFbC5hcHBlbmRDaGlsZChoZWFsdGhFbCk7XHJcbiAgICAgIGNlbGxFbC5hcHBlbmRDaGlsZChjaGFyRWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hvd01vZGFsKG1lc3NhZ2UsIHVuaWNvZGUpIHtcclxuICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsUG9wdXAoe1xyXG4gICAgICB0aXRsZTogbWVzc2FnZSxcclxuICAgICAgY29udGVudDogYCYjJHt1bmljb2RlfWAsXHJcbiAgICAgIGZvb3RlckJ1dHRvbnM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjbGFzczogJ2J0biBidG5fX2NhbmNlbCcsXHJcbiAgICAgICAgICB0ZXh0OiAnQ2xvc2UnLFxyXG4gICAgICAgICAgaGFuZGxlcjogJ21vZGFsSGFuZGxlckNhbmNlbCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY3VycmVudE1vZGFsID0gbW9kYWw7XHJcblxyXG4gICAgbW9kYWwuc2hvdygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIG1vdXNlIGVudGVyIGZvciBjZWxsXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRDZWxsRW50ZXJMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbGlzdGVuZXIgdG8gbW91c2UgbGVhdmUgZm9yIGNlbGxcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIGFkZENlbGxMZWF2ZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmNlbGxMZWF2ZUxpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFkZCBsaXN0ZW5lciB0byBtb3VzZSBjbGljayBmb3IgY2VsbFxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNhbGxiYWNrXHJcbiAgICovXHJcbiAgYWRkQ2VsbENsaWNrTGlzdGVuZXIoY2FsbGJhY2spIHtcclxuICAgIHRoaXMuY2VsbENsaWNrTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIFwiTmV3IEdhbWVcIiBidXR0b24gY2xpY2tcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjYWxsYmFja1xyXG4gICAqL1xyXG4gIGFkZE5ld0dhbWVMaXN0ZW5lcihjYWxsYmFjaykge1xyXG4gICAgdGhpcy5uZXdHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIFwiU2F2ZSBHYW1lXCIgYnV0dG9uIGNsaWNrXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRTYXZlR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLnNhdmVHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQWRkIGxpc3RlbmVyIHRvIFwiTG9hZCBHYW1lXCIgYnV0dG9uIGNsaWNrXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgKi9cclxuICBhZGRMb2FkR2FtZUxpc3RlbmVyKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLmxvYWRHYW1lTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgb25DZWxsRW50ZXIoZXZlbnQpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jZWxscy5pbmRleE9mKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgdGhpcy5jZWxsRW50ZXJMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwsIGluZGV4KSk7XHJcbiAgfVxyXG5cclxuICBvbkNlbGxMZWF2ZShldmVudCkge1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmNlbGxzLmluZGV4T2YoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICB0aGlzLmNlbGxMZWF2ZUxpc3RlbmVycy5mb3JFYWNoKChvKSA9PiBvLmNhbGwobnVsbCwgaW5kZXgpKTtcclxuICB9XHJcblxyXG4gIG9uQ2VsbENsaWNrKGV2ZW50KSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuY2VsbHMuaW5kZXhPZihldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIHRoaXMuY2VsbENsaWNrTGlzdGVuZXJzLmZvckVhY2goKG8pID0+IG8uY2FsbChudWxsLCBpbmRleCkpO1xyXG4gIH1cclxuXHJcbiAgb25OZXdHYW1lQ2xpY2soKSB7XHJcbiAgICB0aGlzLm5ld0dhbWVMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwpKTtcclxuICB9XHJcblxyXG4gIG9uU2F2ZUdhbWVDbGljaygpIHtcclxuICAgIHRoaXMuc2F2ZUdhbWVMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwpKTtcclxuICB9XHJcblxyXG4gIG9uTG9hZEdhbWVDbGljaygpIHtcclxuICAgIHRoaXMubG9hZEdhbWVMaXN0ZW5lcnMuZm9yRWFjaCgobykgPT4gby5jYWxsKG51bGwpKTtcclxuICB9XHJcblxyXG4gIHNob3dNb2RhbE1lc3NhZ2UobWVzc2FnZSwgdW5pY29kZSkge1xyXG4gICAgaWYgKCF0aGlzLmlzTW9kYWwpIHtcclxuICAgICAgdGhpcy5pc01vZGFsID0gdHJ1ZTtcclxuICAgICAgdGhpcy5zaG93TW9kYWwobWVzc2FnZSwgdW5pY29kZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZWxlY3RDZWxsKGluZGV4LCBjb2xvciA9ICd5ZWxsb3cnKSB7XHJcbiAgICB0aGlzLmRlc2VsZWN0Q2VsbChpbmRleCk7XHJcbiAgICB0aGlzLmNlbGxzW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcsIGBzZWxlY3RlZC0ke2NvbG9yfWApO1xyXG4gIH1cclxuXHJcbiAgZGVzZWxlY3RDZWxsKGluZGV4KSB7XHJcbiAgICBjb25zdCBjZWxsID0gdGhpcy5jZWxsc1tpbmRleF07XHJcblxyXG4gICAgaWYgKGNlbGwpIHtcclxuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICAgIC4uLkFycmF5LmZyb20oY2VsbC5jbGFzc0xpc3QpLmZpbHRlcigobykgPT4gby5zdGFydHNXaXRoKCdzZWxlY3RlZCcpKSxcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3dDZWxsVG9vbHRpcChtZXNzYWdlLCBpbmRleCkge1xyXG4gICAgdGhpcy5jZWxsc1tpbmRleF0udGl0bGUgPSBtZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgaGlkZUNlbGxUb29sdGlwKGluZGV4KSB7XHJcbiAgICB0aGlzLmNlbGxzW2luZGV4XS50aXRsZSA9ICcnO1xyXG4gIH1cclxuXHJcbiAgc2hvd0RhbWFnZShpbmRleCwgZGFtYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgY29uc3QgY2VsbCA9IHRoaXMuY2VsbHNbaW5kZXhdO1xyXG4gICAgICBjb25zdCBkYW1hZ2VFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgZGFtYWdlRWwuY2xhc3NOYW1lID0gJ2RhbWFnZSc7XHJcbiAgICAgIGRhbWFnZUVsLnRleHRDb250ZW50ID0gZGFtYWdlO1xyXG4gICAgICBjZWxsLmFwcGVuZENoaWxkKGRhbWFnZUVsKTtcclxuXHJcbiAgICAgIGRhbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2FuaW1hdGlvbmVuZCcsICgpID0+IHtcclxuICAgICAgICBjZWxsLnJlbW92ZUNoaWxkKGRhbWFnZUVsKTtcclxuICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0Q3Vyc29yKGN1cnNvcikge1xyXG4gICAgdGhpcy5ib2FyZEVsLnN0eWxlLmN1cnNvciA9IGN1cnNvcjtcclxuICB9XHJcblxyXG4gIGNoZWNrQmluZGluZygpIHtcclxuICAgIGlmICh0aGlzLmNvbnRhaW5lciA9PT0gbnVsbCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dhbWVQbGF5IG5vdCBiaW5kIHRvIERPTScpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhdGVTZXJ2aWNlIHtcclxuICBjb25zdHJ1Y3RvcihzdG9yYWdlKSB7XHJcbiAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xyXG4gIH1cclxuXHJcbiAgc2F2ZShzdGF0ZSkge1xyXG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oJ3N0YXRlJywgSlNPTi5zdHJpbmdpZnkoc3RhdGUpKTtcclxuICB9XHJcblxyXG4gIGxvYWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLnN0b3JhZ2UuZ2V0SXRlbSgnc3RhdGUnKSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdGF0ZScpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgdGhlbWVzIGZyb20gJy4vdGhlbWVzJztcclxuaW1wb3J0IEdhbWVTdGF0ZSBmcm9tICcuL0dhbWVTdGF0ZSc7XHJcbmltcG9ydCBjdXJzb3JzIGZyb20gJy4vY3Vyc29ycyc7XHJcbmltcG9ydCBnZXRUcmFuc2l0aW9uQXR0YWNrQ2VsbHMgZnJvbSAnLi90cmFuc2l0aW9uQXR0YWNrQ2VsbHMnO1xyXG5pbXBvcnQgY3JlYXRlUG9zaXRpb25zQ2hhciwge1xyXG4gIGNob29zZVJhbmRQb3NpdGlvbnMsXHJcbiAgcmVzdG9yZUNoYXIsXHJcbn0gZnJvbSAnLi9jcmVhdGVQb3NpdGlvbnMnO1xyXG5pbXBvcnQge1xyXG4gIGNhbGN1bGF0ZURhbWFnZSxcclxuICBnZXRJbmZvLFxyXG4gIGdldFJhbmRvbUNoYXJhY3RlcixcclxuICBvdmVyd3JpdGVQcm9wZXJ0aWVzLFxyXG4gIHJlc3RvcmVDaGFyYWN0ZXJzLFxyXG59IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgQm93bWFuIGZyb20gJy4vY2hhcmFjdGVycy9Cb3dtYW4nO1xyXG5pbXBvcnQgU3dvcmRzbWFuIGZyb20gJy4vY2hhcmFjdGVycy9Td29yZHNtYW4nO1xyXG5pbXBvcnQgTWFnaWNpYW4gZnJvbSAnLi9jaGFyYWN0ZXJzL01hZ2ljaWFuJztcclxuaW1wb3J0IFZhbXBpcmUgZnJvbSAnLi9jaGFyYWN0ZXJzL1ZhbXBpcmUnO1xyXG5pbXBvcnQgRGFlbW9uIGZyb20gJy4vY2hhcmFjdGVycy9EYWVtb24nO1xyXG5pbXBvcnQgVW5kZWFkIGZyb20gJy4vY2hhcmFjdGVycy9VbmRlYWQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbnRyb2xsZXIge1xyXG4gIGNvbnN0cnVjdG9yKGdhbWVQbGF5LCBzdGF0ZVNlcnZpY2UpIHtcclxuICAgIHRoaXMuZ2FtZVBsYXkgPSBnYW1lUGxheTtcclxuICAgIHRoaXMuc3RhdGVTZXJ2aWNlID0gc3RhdGVTZXJ2aWNlO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUgPSBuZXcgR2FtZVN0YXRlKHRoaXMuZ2FtZVBsYXkpO1xyXG5cclxuICAgIHRoaXMub25DZWxsQ2xpY2sgPSB0aGlzLm9uQ2VsbENsaWNrLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uQ2VsbEVudGVyID0gdGhpcy5vbkNlbGxFbnRlci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbkNlbGxMZWF2ZSA9IHRoaXMub25DZWxsTGVhdmUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMubmV3R2FtZSA9IHRoaXMubmV3R2FtZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zYXZlR2FtZSA9IHRoaXMuc2F2ZUdhbWUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMubG9hZEdhbWUgPSB0aGlzLmxvYWRHYW1lLmJpbmQodGhpcyk7XHJcblxyXG4gICAgdGhpcy5ldmVudHMoKTtcclxuICB9XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICAvLyBUT0RPOiBhZGQgZXZlbnQgbGlzdGVuZXJzIHRvIGdhbWVQbGF5IGV2ZW50c1xyXG4gICAgLy8gVE9ETzogbG9hZCBzYXZlZCBzdGF0ZWQgZnJvbSBzdGF0ZVNlcnZpY2VcclxuICAgIHRoaXMuaW5pdE5ld1RlYW1zKCk7XHJcbiAgICB0aGlzLnVwZGF0ZVBpY3R1cmUoKTtcclxuICB9XHJcblxyXG4gIGV2ZW50cygpIHtcclxuICAgIHRoaXMuZ2FtZVBsYXkuYWRkQ2VsbEVudGVyTGlzdGVuZXIodGhpcy5vbkNlbGxFbnRlcik7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmFkZENlbGxMZWF2ZUxpc3RlbmVyKHRoaXMub25DZWxsTGVhdmUpO1xyXG4gICAgdGhpcy5nYW1lUGxheS5hZGRDZWxsQ2xpY2tMaXN0ZW5lcih0aGlzLm9uQ2VsbENsaWNrKTtcclxuICAgIHRoaXMuZ2FtZVBsYXkuYWRkTmV3R2FtZUxpc3RlbmVyKHRoaXMubmV3R2FtZSk7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmFkZFNhdmVHYW1lTGlzdGVuZXIodGhpcy5zYXZlR2FtZSk7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmFkZExvYWRHYW1lTGlzdGVuZXIodGhpcy5sb2FkR2FtZSk7XHJcbiAgfVxyXG5cclxuICBuZXdHYW1lKCkge1xyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgbGV2ZWxHYW1lOiAxLFxyXG4gICAgICBjb3VudENsaWNrOiAwLFxyXG4gICAgICBoaXN0b3J5OiBbXHJcbiAgICAgICAgLi4udGhpcy5nYW1lU3RhdGUuaGlzdG9yeSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBsZXZlbEdhbWU6IHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSxcclxuICAgICAgICAgIHBvaW50czogdGhpcy5nYW1lU3RhdGUucG9pbnRzLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICAgIGlzTW92ZTogJ3VzZXInLFxyXG4gICAgICBibG9jazogZmFsc2UsXHJcbiAgICAgIHBvaW50czogMCxcclxuICAgIH07XHJcblxyXG4gICAgb3ZlcndyaXRlUHJvcGVydGllcyh0aGlzLmdhbWVTdGF0ZSwgZGF0YSk7XHJcblxyXG4gICAgdGhpcy5yZXNldCgpO1xyXG4gICAgdGhpcy5pbml0KCk7XHJcbiAgfVxyXG5cclxuICBzYXZlR2FtZSgpIHtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmF0dGFja0NlbGxzID0gW107XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS50cmFuc2l0aW9uQ2VsbHMgPSBbXTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXJVc2VyID0gbnVsbDtcclxuICAgIHRoaXMuc3RhdGVTZXJ2aWNlLnNhdmUodGhpcy5nYW1lU3RhdGUpO1xyXG4gICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKCdZb3VyIGdhbWUgaGFzIHNhdmVkIScsICc5OTk3Jyk7XHJcbiAgfVxyXG5cclxuICBsb2FkR2FtZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNhdmVkR2FtZVN0YXRlID0gdGhpcy5zdGF0ZVNlcnZpY2UubG9hZCgpO1xyXG4gICAgICB0aGlzLnJlc3RvcmVHYW1lU3RhdGUoc2F2ZWRHYW1lU3RhdGUpO1xyXG4gICAgICB0aGlzLnJlc3RvcmVBY3RpdmVDaGFyYWN0ZXIoc2F2ZWRHYW1lU3RhdGUuYWN0aXZlQ2hhcik7XHJcbiAgICAgIHRoaXMudXBkYXRlUGljdHVyZSgpO1xyXG4gICAgICB0aGlzLnNob3dHYW1lSW5mbygpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aGlzLmhhbmRsZUxvYWRpbmdFcnJvcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzdG9yZUdhbWVTdGF0ZShzYXZlZFN0YXRlKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGxldmVsR2FtZSxcclxuICAgICAgY291bnRDbGljayxcclxuICAgICAgaGlzdG9yeSxcclxuICAgICAgaXNNb3ZlLFxyXG4gICAgICBibG9jayxcclxuICAgICAgcG9pbnRzLFxyXG4gICAgICBpbmRleFNlbGVjdCxcclxuICAgIH0gPSBzYXZlZFN0YXRlO1xyXG5cclxuICAgIG92ZXJ3cml0ZVByb3BlcnRpZXModGhpcy5nYW1lU3RhdGUsIHtcclxuICAgICAgbGV2ZWxHYW1lOiBibG9jayA/IGxldmVsR2FtZSAtIDEgOiBsZXZlbEdhbWUsXHJcbiAgICAgIGNvdW50Q2xpY2ssXHJcbiAgICAgIGhpc3RvcnksXHJcbiAgICAgIGlzTW92ZSxcclxuICAgICAgYmxvY2ssXHJcbiAgICAgIHBvaW50cyxcclxuICAgICAgaW5kZXhTZWxlY3QsXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnJlc2V0VGVhbXMoc2F2ZWRTdGF0ZSk7XHJcbiAgfVxyXG5cclxuICByZXN0b3JlQWN0aXZlQ2hhcmFjdGVyKHNhdmVkQWN0aXZlQ2hhcikge1xyXG4gICAgY29uc3QgcmVzdGFydGVkQWN0aXZlQ2hhciA9IHJlc3RvcmVDaGFyKHNhdmVkQWN0aXZlQ2hhcik7XHJcbiAgICBpZiAocmVzdGFydGVkQWN0aXZlQ2hhciAmJiByZXN0YXJ0ZWRBY3RpdmVDaGFyLmlzTW92ZSA9PT0gJ3VzZXInKSB7XHJcbiAgICAgIHRoaXMucmVhY3RPbkNsaWNrKHJlc3RhcnRlZEFjdGl2ZUNoYXIsIFtcclxuICAgICAgICAnYm93bWFuJyxcclxuICAgICAgICAnc3dvcmRzbWFuJyxcclxuICAgICAgICAnbWFnaWNpYW4nLFxyXG4gICAgICBdKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGhhbmRsZUxvYWRpbmdFcnJvcigpIHtcclxuICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShcIlRoZXJlJ3Mgbm8gZ2FtZSBpbiBtZW1vcnlcIiwgJzEyODA3NScpO1xyXG4gICAgdGhpcy5uZXdHYW1lKCk7XHJcbiAgfVxyXG5cclxuICBpbml0TmV3VGVhbXMoKSB7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbSA9IHRoaXMuZ2V0VXNlclRlYW0oW1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSxcclxuICAgIF0pO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUuY29tcFRlYW0gPSB0aGlzLmdldENvbXBUZWFtKFtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lLFxyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUsXHJcbiAgICBdKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJUZWFtKFttYXhMZXZlbCwgY2hhckNvdW50XSkge1xyXG4gICAgY29uc3QgdXNlclR5cGVzID0gW0Jvd21hbiwgU3dvcmRzbWFuLCBNYWdpY2lhbl07XHJcbiAgICBjb25zdCB1c2VyVGVhbSA9IGNyZWF0ZVBvc2l0aW9uc0NoYXIoXHJcbiAgICAgIHVzZXJUeXBlcyxcclxuICAgICAgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUsXHJcbiAgICAgIGZhbHNlLFxyXG4gICAgICBbbWF4TGV2ZWwsIGNoYXJDb3VudF0sXHJcbiAgICApO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW0gPSB1c2VyVGVhbTtcclxuICAgIHJldHVybiB1c2VyVGVhbTtcclxuICB9XHJcblxyXG4gIGdldENvbXBUZWFtKFttYXhMZXZlbCwgY2hhckNvdW50XSkge1xyXG4gICAgY29uc3QgY29tcFR5cGVzID0gW1ZhbXBpcmUsIERhZW1vbiwgVW5kZWFkXTtcclxuICAgIGNvbnN0IGNvbXBUZWFtID0gY3JlYXRlUG9zaXRpb25zQ2hhcihcclxuICAgICAgY29tcFR5cGVzLFxyXG4gICAgICB0aGlzLmdhbWVQbGF5LmJvYXJkU2l6ZSxcclxuICAgICAgdHJ1ZSxcclxuICAgICAgW21heExldmVsLCBjaGFyQ291bnRdLFxyXG4gICAgKTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtID0gY29tcFRlYW07XHJcbiAgICByZXR1cm4gY29tcFRlYW07XHJcbiAgfVxyXG5cclxuICByZXNldFRlYW1zKGdhbWVTdGF0ZSkge1xyXG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW0gPSByZXN0b3JlQ2hhcmFjdGVycyhcclxuICAgICAgZ2FtZVN0YXRlLnVzZXJUZWFtLFxyXG4gICAgICByZXN0b3JlQ2hhcixcclxuICAgICk7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbSA9IHJlc3RvcmVDaGFyYWN0ZXJzKFxyXG4gICAgICBnYW1lU3RhdGUuY29tcFRlYW0sXHJcbiAgICAgIHJlc3RvcmVDaGFyLFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGxldmVsVXAoKSB7XHJcbiAgICBjb25zdCB0aGVtZVZhbHVlcyA9IE9iamVjdC52YWx1ZXModGhlbWVzKTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZVRlYW1zKCk7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKS5mb3JFYWNoKChwbGF5ZXIpID0+IHBsYXllci5jaGFyYWN0ZXIubGV2ZWxVcCgpKTtcclxuICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKHRoZW1lVmFsdWVzWyh0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUgLSAxKSAlIHRoZW1lVmFsdWVzLmxlbmd0aF0pO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayA9IDA7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVUZWFtcygpIHtcclxuICAgIGNvbnN0IG5ld1VzZXJUZWFtID0gdGhpcy5nZXRVc2VyVGVhbShbXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEsXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSxcclxuICAgIF0pO1xyXG4gICAgY29uc3QgYWxsU3RhcnRQb3NpdGlvbnMgPSBjaG9vc2VSYW5kUG9zaXRpb25zKHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplKTtcclxuICAgIG5ld1VzZXJUZWFtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgYWxsU3RhcnRQb3NpdGlvbnMuc3BsaWNlKGFsbFN0YXJ0UG9zaXRpb25zLmluZGV4T2YoaXRlbS5wb3NpdGlvbiksIDEpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW1TdXJ2aXZvcnMuZm9yRWFjaCgoc3Vydml2b3IpID0+IHtcclxuICAgICAgaWYgKCFhbGxTdGFydFBvc2l0aW9ucy5pbmNsdWRlcyhzdXJ2aXZvci5wb3NpdGlvbikpIHtcclxuICAgICAgICBjb25zdCBuZXdQb3NpdGlvbiA9IGFsbFN0YXJ0UG9zaXRpb25zW1xyXG4gICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsU3RhcnRQb3NpdGlvbnMubGVuZ3RoKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXHJcbiAgICAgICAgc3Vydml2b3IucG9zaXRpb24gPSBuZXdQb3NpdGlvbjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW0gPSB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbVN1cnZpdm9ycy5jb25jYXQobmV3VXNlclRlYW0pO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUudXNlclRlYW1TdXJ2aXZvcnMgPSBbXTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtID0gdGhpcy5nZXRDb21wVGVhbShbXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSAtIDEsXHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtLmxlbmd0aCxcclxuICAgIF0pO1xyXG4gIH1cclxuXHJcbiAgc2hvd0dhbWVJbmZvKCkge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZ2FtZVN0YXRlLnBvaW50c1xyXG4gICAgICA/IGBZb3VyIGxldmVsICR7dGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lfSBhbmQgcG9pbnRzICR7dGhpcy5nYW1lU3RhdGUucG9pbnRzfWBcclxuICAgICAgOiBcIlRoZXJlJ3Mgbm8gcG9pbnRzLiBcXG4gSXQncyB0aGUgZmlyc3Qgcm91bmRcIjtcclxuICAgIGNvbnN0IGljb25Db2RlID0gdGhpcy5nYW1lU3RhdGUucG9pbnRzID8gJzEyODA3NicgOiAnMTI4MDgzJztcclxuXHJcbiAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UobWVzc2FnZSwgaWNvbkNvZGUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25DZWxsQ2xpY2soaW5kZXgpIHtcclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5ibG9jaykgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHBsYXllciA9IHRoaXMuZ2FtZVN0YXRlXHJcbiAgICAgIC5nZXRBbGxQbGF5ZXIoKVxyXG4gICAgICAuZmluZCgoZWwpID0+IGVsLnBvc2l0aW9uID09PSBpbmRleCk7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIpIHtcclxuICAgICAgYXdhaXQgdGhpcy5oYW5kbGVVc2VyVHVybihpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5yZWFjdE9uQ2xpY2socGxheWVyLCBbJ2Jvd21hbicsICdzd29yZHNtYW4nLCAnbWFnaWNpYW4nXSk7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmNvdW50Q2xpY2sgPj0gMSkge1xyXG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZUNvbXB1dGVyVHVybigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgaGFuZGxlVXNlclR1cm4oaW5kZXgpIHtcclxuICAgIGlmICghdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QpIHJldHVybjtcclxuXHJcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4gPT09IGluZGV4KSB7XHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIucG9zaXRpb24gPSBpbmRleDtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayArPSAxO1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnJlZCA9PT0gaW5kZXgpIHtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuaXNNb3ZlID0gJ3VzZXInO1xyXG4gICAgICBjb25zdCByZXNwb25zZURvRGFtYWdlID0gYXdhaXQgdGhpcy5kb0RhbWFnZShpbmRleCk7XHJcbiAgICAgIGlmIChyZXNwb25zZURvRGFtYWdlKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY291bnRDbGljayArPSAxO1xyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmNoZWNrR2FtZVByb2dyZXNzKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNoZWNrR2FtZVByb2dyZXNzKCkge1xyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUgKz0gMTtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUucG9pbnRzICs9IHRoaXMuZ2FtZVN0YXRlLmNhbGN1bGF0ZVN1bVBvaW50cygpO1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcblxyXG4gICAgICAvLyBVbmNvbW1lbnQgdGhlIGZvbGxvd2luZyBpZiB5b3Ugd2FudCB0byBoYW5kbGUgZ2FtZSBlbmRpbmdcclxuICAgICAgLy8gYXdhaXQgdGhpcy5jaGVja0dhbWVPdmVyKCk7XHJcblxyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbVN1cnZpdm9ycyA9IHRoaXMuZ2FtZVN0YXRlLnVzZXJUZWFtO1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dNb2RhbE1lc3NhZ2UoXHJcbiAgICAgICAgYExldmVsIHVwISBZb3VyIGxldmVsICR7dGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lfSBhbmQgdG90YWwgcG9pbnRzIGFyZSAke3RoaXMuZ2FtZVN0YXRlLnBvaW50c31gLFxyXG4gICAgICAgICc5OTk2JyxcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5sZXZlbFVwKCk7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkucmVkcmF3UG9zaXRpb25zKHRoaXMuZ2FtZVN0YXRlLmdldEFsbFBsYXllcigpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGlmIHlvdSB3YW50IHRvIGhhbmRsZSBnYW1lIGVuZGluZ1xyXG4gIC8vIGFzeW5jIGNoZWNrR2FtZU92ZXIoKSB7XHJcbiAgLy8gICBpZiAodGhpcy5nYW1lU3RhdGUubGV2ZWxHYW1lID49IDUpIHtcclxuICAvLyAgICAgdGhpcy5nYW1lU3RhdGUucG9pbnQgPSB0aGlzLmdhbWVTdGF0ZS5jYWxjdWxhdGVTdW1Qb2ludHMoKTtcclxuICAvLyAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2sgPSB0cnVlO1xyXG4gIC8vICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5hbGxQbGF5ZXIpO1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXHJcbiAgLy8gICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShgWW91IHdpbiEgWW91ciBwb2ludHMgYXJlICR7dGhpcy5nYW1lU3RhdGUucG9pbnR9YCwgJzEyNzg4MScpO1xyXG4gIC8vICAgICByZXR1cm47XHJcbiAgLy8gICB9XHJcbiAgLy8gfVxyXG5cclxuICBhc3luYyBoYW5kbGVDb21wdXRlclR1cm4oKSB7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyVXNlciA9IHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXI7XHJcbiAgICB0aGlzLmdhbWVTdGF0ZS5pc01vdmUgPSAnY29tcCc7XHJcbiAgICBjb25zdCByZXNwb25zZURvQXR0YWNrQ29tcCA9IGF3YWl0IHRoaXMuZG9BdHRhY2tDb21wKHRoaXMpO1xyXG4gICAgaWYgKHJlc3BvbnNlRG9BdHRhY2tDb21wKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVN0YXRlLmNvdW50Q2xpY2sgPSAwO1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5pc01vdmUgPSAndXNlcic7XHJcblxyXG4gICAgICBpZiAodGhpcy5nYW1lU3RhdGUuZmluZFByZXN1bWVkRGVjZWFzZWRQbGF5ZXIoKSkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIgPSB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyVXNlcjtcclxuICAgICAgICB0aGlzLnJlYWN0T25DbGljayh0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyLCBbXHJcbiAgICAgICAgICAnYm93bWFuJyxcclxuICAgICAgICAgICdzd29yZHNtYW4nLFxyXG4gICAgICAgICAgJ21hZ2ljaWFuJyxcclxuICAgICAgICBdKTtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQ2VsbEVudGVyKGluZGV4KSB7XHJcbiAgICBpZiAodGhpcy5nYW1lU3RhdGUuYmxvY2spIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLmdhbWVTdGF0ZS5nZXRQbGF5ZXIoaW5kZXgpO1xyXG4gICAgaWYgKHBsYXllcikge1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LnNob3dDZWxsVG9vbHRpcChnZXRJbmZvKHBsYXllci5jaGFyYWN0ZXIpLCBpbmRleCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaXNUcmFuc2l0aW9uQ2VsbCA9IHRoaXMuZ2FtZVN0YXRlLnRyYW5zaXRpb25DZWxscy5pbmNsdWRlcyhpbmRleCk7XHJcbiAgICBjb25zdCBpc0F0dGFja0NlbGwgPSB0aGlzLmdhbWVTdGF0ZS5hdHRhY2tDZWxscy5pbmNsdWRlcyhpbmRleCk7XHJcbiAgICBjb25zdCBpc1VzZXJDZWxsID0gdGhpcy5nYW1lU3RhdGUudXNlclRlYW0uc29tZShcclxuICAgICAgKGl0ZW0pID0+IGl0ZW0ucG9zaXRpb24gPT09IGluZGV4LFxyXG4gICAgKTtcclxuICAgIGNvbnN0IGlzQ29tcENlbGwgPSB0aGlzLmdhbWVTdGF0ZS5jb21wVGVhbS5zb21lKFxyXG4gICAgICAoaXRlbSkgPT4gaXRlbS5wb3NpdGlvbiA9PT0gaW5kZXgsXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuZ2FtZVBsYXkuc2V0Q3Vyc29yKGN1cnNvcnMucG9pbnRlcik7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0KSB7XHJcbiAgICAgIGlmIChpc1RyYW5zaXRpb25DZWxsICYmICFpc1VzZXJDZWxsICYmICFpc0NvbXBDZWxsKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4gPSBpbmRleDtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwoaW5kZXgsICdncmVlbicpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNBdHRhY2tDZWxsICYmIGlzQ29tcENlbGwpIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC5yZWQgPSBpbmRleDtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNlbGVjdENlbGwoaW5kZXgsICdyZWQnKTtcclxuICAgICAgICB0aGlzLmdhbWVQbGF5LnNldEN1cnNvcihjdXJzb3JzLmNyb3NzaGFpcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQ2VsbExlYXZlKGluZGV4KSB7XHJcbiAgICB0aGlzLmdhbWVQbGF5LmhpZGVDZWxsVG9vbHRpcChpbmRleCk7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZVN0YXRlLmJsb2NrKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaGFzU2VsZWN0ZWRHcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1ncmVlbicpO1xyXG4gICAgY29uc3QgaXNBdHRhY2tDZWxsID0gdGhpcy5nYW1lU3RhdGUuYXR0YWNrQ2VsbHM/LmluY2x1ZGVzKGluZGV4KTtcclxuICAgIGNvbnN0IGlzQ29tcFRlYW1Qb3NpdGlvbiA9IHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtLnNvbWUoXHJcbiAgICAgIChpdGVtKSA9PiBpdGVtLnBvc2l0aW9uID09PSBpbmRleCxcclxuICAgICk7XHJcblxyXG4gICAgaWYgKGhhc1NlbGVjdGVkR3JlZW4pIHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4pO1xyXG5cclxuICAgICAgaWYgKCFpc0F0dGFja0NlbGwgJiYgaXNDb21wVGVhbVBvc2l0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QuZ3JlZW4pO1xyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuc2V0Q3Vyc29yKGN1cnNvcnMubm90YWxsb3dlZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXJlZCcpKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuZGVzZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnJlZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWFjdE9uQ2xpY2socGxheWVyLCBhcnJheVR5cGVzKSB7XHJcbiAgICBpZiAoIXBsYXllcikgcmV0dXJuO1xyXG5cclxuICAgIGlmIChhcnJheVR5cGVzLmluY2x1ZGVzKHBsYXllci5jaGFyYWN0ZXIudHlwZSkpIHtcclxuICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZENlbGwocGxheWVyLnBvc2l0aW9uKTtcclxuICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKHBsYXllci5wb3NpdGlvbik7XHJcblxyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyID0gcGxheWVyO1xyXG4gICAgICBjb25zdCB7IG1heFJhbmdlLCBtYXhBdHRhY2sgfSA9IHBsYXllci5jaGFyYWN0ZXI7XHJcblxyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS50cmFuc2l0aW9uQ2VsbHMgPSBnZXRUcmFuc2l0aW9uQXR0YWNrQ2VsbHMoXHJcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uLFxyXG4gICAgICAgIHRoaXMuZ2FtZVBsYXkuYm9hcmRTaXplLFxyXG4gICAgICAgIG1heFJhbmdlLFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5hdHRhY2tDZWxscyA9IGdldFRyYW5zaXRpb25BdHRhY2tDZWxscyhcclxuICAgICAgICBwbGF5ZXIucG9zaXRpb24sXHJcbiAgICAgICAgdGhpcy5nYW1lUGxheS5ib2FyZFNpemUsXHJcbiAgICAgICAgbWF4QXR0YWNrLFxyXG4gICAgICAgIHRydWUsXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmhhbmRsZUludmFsaWRTZWxlY3Rpb24ocGxheWVyLnBvc2l0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZVNlbGVjdGVkQ2VsbChudW0pIHtcclxuICAgIGlmIChcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3RcclxuICAgICAgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXllbGxvdycpXHJcbiAgICApIHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QueWVsbG93KTtcclxuICAgIH1cclxuICAgIHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0ID0geyB5ZWxsb3c6IG51bSB9O1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlSW52YWxpZFNlbGVjdGlvbihudW0pIHtcclxuICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdDtcclxuICAgIGNvbnN0IGlzTm90SW5BdHRhY2tDZWxscyA9ICF0aGlzLmdhbWVTdGF0ZS5hdHRhY2tDZWxscy5pbmNsdWRlcyhudW0pO1xyXG4gICAgY29uc3QgaXNDb21wdXRlclRlYW1Qb3NpdGlvbiA9IHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtLnNvbWUoXHJcbiAgICAgIChpdGVtKSA9PiBpdGVtLnBvc2l0aW9uID09PSBudW0sXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChpc1NlbGVjdGVkICYmIGlzTm90SW5BdHRhY2tDZWxscyAmJiBpc0NvbXB1dGVyVGVhbVBvc2l0aW9uKSB7XHJcbiAgICAgIHRoaXMuZ2FtZVBsYXkuc2hvd01vZGFsTWVzc2FnZShcIkl0IGNhbid0IGJlIGRvbmVcIiwgJzk5NDAnKTtcclxuICAgIH0gZWxzZSBpZiAoIXRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIpIHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKCdUaGlzIGlzbmB0IHlvdXIgY2hhcmFjdGVyJywgJzk5OTUnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGRvRGFtYWdlKGluZGV4KSB7XHJcbiAgICBjb25zdCB7IGF0dGFjayB9ID0gdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhci5jaGFyYWN0ZXI7XHJcbiAgICBjb25zdCBvcHBvbmVudCA9IHRoaXMuZ2FtZVN0YXRlLmdldFBsYXllcihpbmRleCk7XHJcbiAgICBjb25zdCB7IGRlZmVuY2UsIGhlYWx0aCB9ID0gb3Bwb25lbnQuY2hhcmFjdGVyO1xyXG5cclxuICAgIGNvbnN0IGRhbWFnZSA9IGNhbGN1bGF0ZURhbWFnZShhdHRhY2ssIGRlZmVuY2UpO1xyXG4gICAgY29uc3QgcmVzcG9uc2VTaG93RGFtYWdlID0gYXdhaXQgdGhpcy5nYW1lUGxheS5zaG93RGFtYWdlKGluZGV4LCBkYW1hZ2UpO1xyXG5cclxuICAgIGlmIChyZXNwb25zZVNob3dEYW1hZ2UpIHtcclxuICAgICAgb3Bwb25lbnQuY2hhcmFjdGVyLmhlYWx0aCA9IGhlYWx0aCAtIGRhbWFnZTtcclxuICAgICAgdGhpcy5jaGVja0hlYWx0aFJlbW92ZURlYWQob3Bwb25lbnQpO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjaGVja0hlYWx0aFJlbW92ZURlYWQocGxheWVyKSB7XHJcbiAgICBpZiAocGxheWVyLmNoYXJhY3Rlci5oZWFsdGggPD0gMCkge1xyXG4gICAgICBjb25zdCBpbmZvID0gdGhpcy5nYW1lU3RhdGUuZ2V0UHJlc3VtZWREZWNlYXNlZFBsYXllckluZm8oXHJcbiAgICAgICAgcGxheWVyLnBvc2l0aW9uLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGluZm8uaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGVbaW5mby50ZWFtS2V5XS5zcGxpY2UoaW5mby5pbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIGlmICghdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QpIHJldHVybjtcclxuXHJcbiAgICBPYmplY3Qua2V5cyh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCkuZm9yRWFjaCgoY29sb3IpID0+IHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5kZXNlbGVjdENlbGwodGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3RbY29sb3JdKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5nYW1lU3RhdGUuaW5kZXhTZWxlY3QgPSBudWxsO1xyXG4gICAgdGhpcy5nYW1lUGxheS5zZXRDdXJzb3IoY3Vyc29ycy5hdXRvKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVBpY3R1cmUoKSB7XHJcbiAgICBjb25zdCBsZXZlbCA9IHRoaXMuZ2FtZVN0YXRlLmxldmVsR2FtZSA+IDAgPyB0aGlzLmdhbWVTdGF0ZS5sZXZlbEdhbWUgLSAxIDogMDtcclxuICAgIHRoaXMuZ2FtZVBsYXkuZHJhd1VpKE9iamVjdC52YWx1ZXModGhlbWVzKVtsZXZlbF0pO1xyXG4gICAgdGhpcy5nYW1lUGxheS5yZWRyYXdQb3NpdGlvbnModGhpcy5nYW1lU3RhdGUuZ2V0QWxsUGxheWVyKCkpO1xyXG5cclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdCAmJiB0aGlzLmdhbWVTdGF0ZS5pbmRleFNlbGVjdC55ZWxsb3cpIHtcclxuICAgICAgdGhpcy5nYW1lUGxheS5zZWxlY3RDZWxsKHRoaXMuZ2FtZVN0YXRlLmluZGV4U2VsZWN0LnllbGxvdyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBkb0F0dGFja0NvbXAoKSB7XHJcbiAgICBjb25zdCBhY3RpdmVDb21wID0gZ2V0UmFuZG9tQ2hhcmFjdGVyKHRoaXMuZ2FtZVN0YXRlLmNvbXBUZWFtKTtcclxuICAgIHRoaXMuZ2FtZVN0YXRlLmFjdGl2ZUNoYXIgPSBhY3RpdmVDb21wO1xyXG4gICAgdGhpcy5yZWFjdE9uQ2xpY2soYWN0aXZlQ29tcCwgWydkYWVtb24nLCAndW5kZWFkJywgJ3ZhbXBpcmUnXSk7XHJcblxyXG4gICAgY29uc3QgdXNlclBvc2l0aW9uID0gdGhpcy5nYW1lU3RhdGUuZ2V0VXNlclBvc2l0aW9uKCk7XHJcblxyXG4gICAgaWYgKHVzZXJQb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlRG9EYW1hZ2UgPSBhd2FpdCB0aGlzLmRvRGFtYWdlKHVzZXJQb3NpdGlvbik7XHJcbiAgICAgIGlmIChyZXNwb25zZURvRGFtYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0FuZEVuZEdhbWVJZk5lY2Vzc2FyeSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUGljdHVyZSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdhbWVTdGF0ZS5hY3RpdmVDaGFyLnBvc2l0aW9uID0gdGhpcy5tb3ZlVG9SYW5kb21Qb3NpdGlvbigpO1xyXG4gICAgICB0aGlzLmdhbWVQbGF5LnJlZHJhd1Bvc2l0aW9ucyh0aGlzLmdhbWVTdGF0ZS5nZXRBbGxQbGF5ZXIoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nYW1lU3RhdGUuYWN0aXZlQ2hhciA9IG51bGw7XHJcbiAgICB0aGlzLnJlc2V0KCk7XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBjaGVja0FuZEVuZEdhbWVJZk5lY2Vzc2FyeSgpIHtcclxuICAgIGlmICh0aGlzLmdhbWVTdGF0ZS51c2VyVGVhbS5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhpcy5nYW1lU3RhdGUuYmxvY2sgPSB0cnVlO1xyXG5cclxuICAgICAgdGhpcy5nYW1lUGxheS5zaG93TW9kYWxNZXNzYWdlKCdZb3UgbG9zZSEnLCAnMTI5MzM1Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtb3ZlVG9SYW5kb21Qb3NpdGlvbigpIHtcclxuICAgIGxldCByYW5kO1xyXG4gICAgbGV0IGlzUGxheWVyO1xyXG4gICAgZG8ge1xyXG4gICAgICByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzLmxlbmd0aCk7XHJcbiAgICAgIGNvbnN0IHBvdGVudGlhbFBvc2l0aW9uID0gdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzW3JhbmRdO1xyXG4gICAgICBpc1BsYXllciA9IHRoaXMuZ2FtZVN0YXRlXHJcbiAgICAgICAgLmdldEFsbFBsYXllcigpXHJcbiAgICAgICAgLnNvbWUoKG8pID0+IG8ucG9zaXRpb24gPT09IHBvdGVudGlhbFBvc2l0aW9uKTtcclxuICAgIH0gd2hpbGUgKGlzUGxheWVyKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5nYW1lU3RhdGUudHJhbnNpdGlvbkNlbGxzW3JhbmRdO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTW9kYWxQb3B1cCIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInRoaXMiLCJlbGVtTW9kYWwiLCJldmVudFNob3dNb2RhbCIsImV2ZW50SGlkZU1vZGFsIiwiaGlkaW5nIiwiZGVzdHJveWVkIiwiYW5pbWF0aW9uU3BlZWQiLCJjcmVhdGVNb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyQ2xvc2VNb2RhbCIsImJpbmQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm1vZGFsSFRNTCIsIm1vZGFsRm9vdGVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsInJlcGxhY2UiLCJ0aXRsZSIsImNvbnRlbnQiLCJmb290ZXJCdXR0b25zIiwiYnV0dG9uIiwibW9kYWxGb290ZXJCdXR0b24iLCJjbGFzcyIsImhhbmRsZXIiLCJ0ZXh0IiwiaW5uZXJIVE1MIiwiYm9keSIsImFwcGVuZENoaWxkIiwic2hvdyIsImRpc3BhdGNoRXZlbnQiLCJoaWRlIiwicmVtb3ZlIiwic2V0VGltZW91dCIsImUiLCJ0YXJnZXQiLCJkYXRhc2V0IiwiZGlzbWlzcyIsImRlc3Ryb3kiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0Q29udGVudCIsImh0bWwiLCJxdWVyeVNlbGVjdG9yIiwic2V0VGl0bGUiLCJjYWxjVGlsZVR5cGUiLCJpbmRleCIsImJvYXJkU2l6ZSIsImkiLCJyZXN0b3JlQ2hhcmFjdGVycyIsImNoYXJhY3RlcnMiLCJyZXN0b3JlRm4iLCJtYXAiLCJ1cEF0dGFja0RlZmVuY2UiLCJiZWZvcmUiLCJsaWZlIiwiTWF0aCIsImZsb29yIiwibWF4Iiwib3ZlcndyaXRlUHJvcGVydGllcyIsInNvdXJjZSIsIk9iamVjdCIsImFzc2lnbiIsInByYWlyaWUiLCJkZXNlcnQiLCJhcmN0aWMiLCJtb3VudGFpbiIsIkdhbWVTdGF0ZSIsImdhbWVQbGF5IiwibGV2ZWxHYW1lIiwiaXNNb3ZlIiwiY291bnRDbGljayIsInVzZXJUZWFtU3Vydml2b3JzIiwiaGlzdG9yeSIsInBvaW50cyIsImJsb2NrIiwidXNlclRlYW0iLCJjb21wVGVhbSIsImFjdGl2ZUNoYXIiLCJpbmRleFNlbGVjdCIsInRyYW5zaXRpb25DZWxscyIsImF0dGFja0NlbGxzIiwic2hvd01vZGFsIiwiZ2V0QWxsUGxheWVyIiwiRXJyb3IiLCJjYWxjdWxhdGVTdW1Qb2ludHMiLCJyZWR1Y2UiLCJhIiwiYiIsImNoYXJhY3RlciIsImhlYWx0aCIsImdldFVzZXJQb3NpdGlvbiIsImZvdW5kSXRlbSIsImZpbmQiLCJpdGVtIiwiaW5jbHVkZXMiLCJwb3NpdGlvbiIsInVuZGVmaW5lZCIsImZpbmRQcmVzdW1lZERlY2Vhc2VkUGxheWVyIiwiYWN0aXZlQ2hhclVzZXIiLCJnZXRQcmVzdW1lZERlY2Vhc2VkUGxheWVySW5mbyIsImZpbmRJbmRleCIsInRlYW1LZXkiLCJnZXRQbGF5ZXIiLCJlbCIsImdldFRyYW5zaXRpb25BdHRhY2tDZWxscyIsIm1heFJhbmdlIiwiYXR0YWNrIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJyYXlDZWxscyIsInB1c2giLCJ0YWJsZUNlbGxzIiwiY2VsbHMiLCJyZXN1bHQiLCJzIiwic2xpY2UiLCJnZXRUYWJsZSIsImFsbG93ZWRDZWxscyIsInJvdyIsImoiLCJnZXRBdHRhY2tDZWxscyIsInRyYW5zaXRDZWxscyIsImdldFRyYW5zaXRpb25DZWxscyIsIlRlYW0iLCJDaGFyYWN0ZXIiLCJsZXZlbCIsInR5cGUiLCJuYW1lIiwiZGVmZW5jZSIsImxldmVsVXAiLCJtaW4iLCJQb3NpdGlvbmVkQ2hhcmFjdGVyIiwidmFsdWUiLCJfY2hhcmFjdGVyIiwiX3Bvc2l0aW9uIiwiQm93bWFuIiwic3VwZXIiLCJtYXhBdHRhY2siLCJTd29yZHNtYW4iLCJNYWdpY2lhbiIsIkRhZW1vbiIsIlVuZGVhZCIsIlZhbXBpcmUiLCJjaG9vc2VSYW5kUG9zaXRpb25zIiwiY2hvb3NlUmFuZFBvc2l0aW9uIiwicmFuZG9tIiwiY3JlYXRlUG9zaXRpb25zQ2hhciIsInBsYXllclR5cGVzIiwib3Bwb25lbnQiLCJfcmVmIiwibWF4TGV2ZWwiLCJjaGFyQ291bnQiLCJwb3NpdGlvbnMiLCJ0ZWFtIiwiYWxsb3dlZFR5cGVzIiwiY2hhcmFjdGVyQ291bnQiLCJwbGF5ZXJHZW5lcmF0b3IiLCJyYW5kb21MZXZlbCIsIlJhbmRvbUNsYXNzIiwiY2hhcmFjdGVyR2VuZXJhdG9yIiwibmV4dCIsImdlbmVyYXRlVGVhbSIsInJhbmRQb3NpdGlvbnMiLCJmb3JFYWNoIiwiY2hhciIsInJhbmRQb3NpdGlvbiIsImlzUG9zaXRpb25VbmlxdWUiLCJyZXN0b3JlQ2hhciIsIm9iaiIsImJvd21hbiIsInN3b3Jkc21hbiIsIm1hZ2ljaWFuIiwiZGFlbW9uIiwidW5kZWFkIiwidmFtcGlyZSIsInJlc3RvcmVQb3NpdGlvbmVkQ2hhciIsImNvbnRhaW5lciIsImJvYXJkRWwiLCJjZWxsQ2xpY2tMaXN0ZW5lcnMiLCJjZWxsRW50ZXJMaXN0ZW5lcnMiLCJjZWxsTGVhdmVMaXN0ZW5lcnMiLCJuZXdHYW1lTGlzdGVuZXJzIiwic2F2ZUdhbWVMaXN0ZW5lcnMiLCJsb2FkR2FtZUxpc3RlbmVycyIsImlzTW9kYWwiLCJpbml0TW9kYWxMaXN0ZW5lciIsImJpbmRUb0RPTSIsIkhUTUxFbGVtZW50IiwiY3VycmVudE1vZGFsIiwiZHJhd1VpIiwidGhlbWUiLCJjaGVja0JpbmRpbmciLCJuZXdHYW1lRWwiLCJzYXZlR2FtZUVsIiwibG9hZEdhbWVFbCIsImV2ZW50Iiwib25OZXdHYW1lQ2xpY2siLCJvblNhdmVHYW1lQ2xpY2siLCJvbkxvYWRHYW1lQ2xpY2siLCJjZWxsRWwiLCJvbkNlbGxFbnRlciIsIm9uQ2VsbExlYXZlIiwib25DZWxsQ2xpY2siLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsInJlZHJhd1Bvc2l0aW9ucyIsImNlbGwiLCJjaGFyRWwiLCJoZWFsdGhFbCIsImhlYWx0aEluZGljYXRvckVsIiwic3R5bGUiLCJ3aWR0aCIsIm1lc3NhZ2UiLCJ1bmljb2RlIiwibW9kYWwiLCJhZGRDZWxsRW50ZXJMaXN0ZW5lciIsImNhbGxiYWNrIiwiYWRkQ2VsbExlYXZlTGlzdGVuZXIiLCJhZGRDZWxsQ2xpY2tMaXN0ZW5lciIsImFkZE5ld0dhbWVMaXN0ZW5lciIsImFkZFNhdmVHYW1lTGlzdGVuZXIiLCJhZGRMb2FkR2FtZUxpc3RlbmVyIiwiaW5kZXhPZiIsImN1cnJlbnRUYXJnZXQiLCJvIiwiY2FsbCIsInNob3dNb2RhbE1lc3NhZ2UiLCJzZWxlY3RDZWxsIiwiY29sb3IiLCJkZXNlbGVjdENlbGwiLCJmaWx0ZXIiLCJzdGFydHNXaXRoIiwic2hvd0NlbGxUb29sdGlwIiwiaGlkZUNlbGxUb29sdGlwIiwic2hvd0RhbWFnZSIsImRhbWFnZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGFtYWdlRWwiLCJjbGFzc05hbWUiLCJ0ZXh0Q29udGVudCIsInNldEN1cnNvciIsImN1cnNvciIsInN0YXRlU2VydmljZSIsInN0b3JhZ2UiLCJzYXZlIiwic3RhdGUiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvYWQiLCJwYXJzZSIsImdldEl0ZW0iLCJsb2NhbFN0b3JhZ2UiLCJnYW1lQ3RybCIsImdhbWVTdGF0ZSIsIm5ld0dhbWUiLCJzYXZlR2FtZSIsImxvYWRHYW1lIiwiZXZlbnRzIiwiaW5pdCIsImluaXROZXdUZWFtcyIsInVwZGF0ZVBpY3R1cmUiLCJkYXRhIiwicmVzZXQiLCJzYXZlZEdhbWVTdGF0ZSIsInJlc3RvcmVHYW1lU3RhdGUiLCJyZXN0b3JlQWN0aXZlQ2hhcmFjdGVyIiwic2hvd0dhbWVJbmZvIiwiaGFuZGxlTG9hZGluZ0Vycm9yIiwic2F2ZWRTdGF0ZSIsInJlc2V0VGVhbXMiLCJzYXZlZEFjdGl2ZUNoYXIiLCJyZXN0YXJ0ZWRBY3RpdmVDaGFyIiwicmVhY3RPbkNsaWNrIiwiZ2V0VXNlclRlYW0iLCJnZXRDb21wVGVhbSIsIl9yZWYyIiwidGhlbWVWYWx1ZXMiLCJ2YWx1ZXMiLCJ0aGVtZXMiLCJ1cGRhdGVUZWFtcyIsInBsYXllciIsIm5ld1VzZXJUZWFtIiwiYWxsU3RhcnRQb3NpdGlvbnMiLCJzcGxpY2UiLCJzdXJ2aXZvciIsIm5ld1Bvc2l0aW9uIiwiY29uY2F0IiwiaWNvbkNvZGUiLCJhc3luYyIsImhhbmRsZVVzZXJUdXJuIiwiaGFuZGxlQ29tcHV0ZXJUdXJuIiwiZ3JlZW4iLCJyZWQiLCJkb0RhbWFnZSIsImNoZWNrR2FtZVByb2dyZXNzIiwiZG9BdHRhY2tDb21wIiwiZ2V0SW5mbyIsImlzVHJhbnNpdGlvbkNlbGwiLCJpc0F0dGFja0NlbGwiLCJpc1VzZXJDZWxsIiwic29tZSIsImlzQ29tcENlbGwiLCJjdXJzb3JzIiwiaGFzU2VsZWN0ZWRHcmVlbiIsImlzQ29tcFRlYW1Qb3NpdGlvbiIsImFycmF5VHlwZXMiLCJ1cGRhdGVTZWxlY3RlZENlbGwiLCJoYW5kbGVJbnZhbGlkU2VsZWN0aW9uIiwibnVtIiwieWVsbG93IiwiaXNTZWxlY3RlZCIsImlzTm90SW5BdHRhY2tDZWxscyIsImlzQ29tcHV0ZXJUZWFtUG9zaXRpb24iLCJyb3VuZCIsImNhbGN1bGF0ZURhbWFnZSIsImNoZWNrSGVhbHRoUmVtb3ZlRGVhZCIsImluZm8iLCJrZXlzIiwiYWN0aXZlQ29tcCIsInVzZXJQb3NpdGlvbiIsImNoZWNrQW5kRW5kR2FtZUlmTmVjZXNzYXJ5IiwibW92ZVRvUmFuZG9tUG9zaXRpb24iLCJyYW5kIiwiaXNQbGF5ZXIiLCJwb3RlbnRpYWxQb3NpdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=